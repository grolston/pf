(()=>{"use strict";const n=require("@aws-sdk/client-sts"),e=require("@aws-sdk/client-organizations"),a=require("@aws-sdk/client-iam"),i=require("@aws-sdk/client-cloudformation"),o=require("@aws-sdk/client-sso-admin"),c=require("@aws-sdk/client-ec2"),t=require("@aws-sdk/client-cloudtrail"),s=require("@aws-sdk/client-config-service"),r=require("@aws-sdk/client-controltower"),l=require("@aws-sdk/client-cost-and-usage-report-service");async function d(n,e,a){return`${e} - Task ${n} - Deploy top-level OU ${a}.`}async function p(n,e,a){return`${e} - Task ${n} - Remove IAM user ${a}`}async function y(n,e,a,i){return`${e} - Task ${n} - Remove IAM user ${a} API key: ${i}`}async function S(n,e,a){return`${e} - Task ${n} - Delete VPC in the ${a} region.`}async function u(n,e,a){return`${e} - Task ${n} - Delete VPC in the ${a} region.`}async function f(n,e,a){return`${e} - Task ${n} - Enable the AWS service ${a} within your AWS Organization`}async function g(n,e,a){return`${e} - Task ${n} - Delegate the AWS service ${a} within your AWS Organization to a member account`}async function A(n,e,a){return`${e} - Task ${n} - Enable the policy type ${a} within your AWS Organization.`}const F=require("fs");(async()=>{const w="./Pathfinder.txt";let m=new Date;const C=process.env.AWS_REGION||"us-east-1",E=await async function(){const n=new c.EC2Client({region:"us-east-1"});try{const e=new c.DescribeRegionsCommand({}),a=await n.send(e),i=[];for(const n of a.Regions||[])i.push(n.RegionName||"");return i}catch(n){return console.error("Error retrieving regions:",n),[]}finally{n.destroy()}}();console.log("Discovering your AWS environment....");const I=await(async a=>{const i=new e.OrganizationsClient({region:a});let o=!1,c=!1;try{const t=await async function(e){const a=new n.STSClient({region:e});try{const e=new n.GetCallerIdentityCommand({});return(await a.send(e)).Account}catch(n){throw console.error("Error getting account ID:",n),n}}(a);if(t){const n=new e.DescribeOrganizationCommand({}),a=await i.send(n);if(a.Organization?.MasterAccountId){const n=a.Organization?.MasterAccountId;n==t?(c=!0,o=!0):o=!0}else o=!1}}catch(n){console.error("Error:",n)}finally{i.destroy()}return{isInOrganization:o,isManagementAccount:c}})(C);F.writeFileSync(w,"Cloud Foundations - Pathfinder"),F.appendFileSync(w,`\nGenerated on: ${m.toUTCString()} \n\n`),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n                   MANAGEMENT ACCOUNT"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nAWS ACCOUNT TYPE\n"),I&&(console.dir(I,{depth:null,colors:!0}),F.appendFileSync(w,`\n  Is in AWS Organization: ${I.isInOrganization}`),F.appendFileSync(w,`\n  Assessing AWS Management Account: ${I.isManagementAccount}`)),console.log("Discovering IAM Users....");const $=await(async()=>{const n=new a.IAMClient({region:"us-east-1"}),e=[];try{const i=new a.ListUsersCommand({}),o=await n.send(i);for(const i of o.Users||[]){const o=i.UserName||"",c=new a.ListAccessKeysCommand({UserName:o}),t=(await n.send(c)).AccessKeyMetadata||[];if(t.length>0)for(const i of t){const c=i.AccessKeyId||"",t=new a.GetAccessKeyLastUsedCommand({AccessKeyId:c}),s=await n.send(t),r={userName:o,accessKeyId:c,lastUsed:s&&s.AccessKeyLastUsed&&`${s.AccessKeyLastUsed.LastUsedDate}`||"Not available"};e.push(r)}else{const n={userName:o};e.push(n)}}}catch(n){console.error("Error:",n)}finally{n.destroy()}return e})();if(F.appendFileSync(w,"\n\nIAM USERS CHECK\n"),$&&$.length>0){console.dir($,{depth:null,colors:!0});for(const n of $)F.appendFileSync(w,`\n  IAM User: ${n.userName}`),n.accessKeyId&&F.appendFileSync(w,`\n    User API Key ID: ${n.accessKeyId}`),F.appendFileSync(w,"\n")}else F.appendFileSync(w,"\n  No IAM Users found.");console.log("Discovering EC2 instances across all AWS Regions....");const N=await async function(n){let e=[];for(const a of n){const n=new c.EC2Client({region:a}),i=new c.DescribeInstancesCommand({});try{const o=await n.send(i);if(o.Reservations)if(o.Reservations.length>0){const n={region:a,ec2Found:!0};e.push(n)}else{const n={region:a,ec2Found:!1};e.push(n)}else{const n={region:a,ec2Found:!1};e.push(n)}}catch(n){console.log(`Error checking instance: ${n}`)}finally{n.destroy()}}return e}(E);if(F.appendFileSync(w,"\n\nEC2 INSTANCE CHECK\n"),N&&N.find((n=>!0===n.ec2Found))){console.dir(N,{depth:null,colors:!0});for(const n of N)n.ec2Found&&F.appendFileSync(w,`\n  ${n.region} - found EC2 Instance(s).`)}else F.appendFileSync(w,"\n  No EC2 instances found.");console.log("Discovering VPCs across all AWS Regions....");const O=await async function(n){let e=[];for(const a of n){const n=new c.EC2Client({region:a}),i=new c.DescribeVpcsCommand({});try{const o=await n.send(i);if(o.Vpcs)if(o.Vpcs.length>0){const n={region:a,vpcFound:!0};e.push(n)}else{const n={region:a,vpcFound:!1};e.push(n)}else{const n={region:a,vpcFound:!1};e.push(n)}}catch(n){console.log(`Error checking instance: ${n}`)}finally{n.destroy()}}return e}(E);if(F.appendFileSync(w,"\n\nVPC CHECK\n"),O&&O.length>0){console.dir(O,{depth:null,colors:!0});for(const n of O)n.vpcFound&&F.appendFileSync(w,`\n  ${n.region} - found VPC(s).`)}else F.appendFileSync(w,"\n  No VPCs found.");console.log("Discovering AWS Config configurations across all AWS Regions....");const T=await async function(n){let e=[];for(const a of n){const n=new t.CloudTrailClient({region:a}),i=new t.DescribeTrailsCommand({});try{const o=await n.send(i);if(o.trailList)for(const n of o.trailList){let i={};i=n.HomeRegion==a?{region:a,trailFound:!0,isOrgTrail:n.IsMultiRegionTrail,isMultiRegion:n.IsMultiRegionTrail}:{region:a,trailFound:!1},e.push(i)}}catch(n){console.log(`Error checking instance: ${n}`)}finally{n.destroy()}}return e}(E),h=await async function(n){let e=[];for(const a of n){const n=new s.ConfigServiceClient({region:a});let i={region:a,configRecorderFound:!1,configDeliveryChannelFound:!1};try{const a=await n.send(new s.DescribeConfigurationRecorderStatusCommand({}));0!==a.ConfigurationRecordersStatus?.length&&(i.configRecorderFound=!0);const o=await n.send(new s.DescribeDeliveryChannelsCommand({}));0!==o.DeliveryChannels?.length&&(i.configDeliveryChannelFound=!0),e.push(i)}catch(n){console.error(`Error checking AWS Config in ${a}:`,n)}finally{n.destroy()}}return e}(E);if(F.appendFileSync(w,"\n\nAWS CONFIG CHECK\n"),h&&h.find((n=>!0===n.configRecorderFound))){console.dir(h,{depth:null,colors:!0});for(const n of h)n.configRecorderFound&&F.appendFileSync(w,`\n  ${n.region} - Config Recorder found`),n.configDeliveryChannelFound&&F.appendFileSync(w,`\n  ${n.region} - Config Delivery Channel found`)}else F.appendFileSync(w,"\n  No AWS Config resource discovered");if(I.isInOrganization&&I.isManagementAccount){const n=await async function(n){const a=new e.OrganizationsClient({region:n});let i={};try{const n=new e.DescribeOrganizationCommand({}),o=await a.send(n);o.Organization&&(i.id=o.Organization.Id??"",i.arn=o.Organization.Arn??"");const c=new e.ListRootsCommand({}),t=await a.send(c);t.Roots?i.rootOuId=t.Roots[0].Id:console.log("No info found for your AWS Organization.")}catch(n){console.error(`An error occurred: ${n}`)}finally{return a.destroy(),i}}("us-east-1");console.dir(n,{depth:null,colors:!0});const a=await(async n=>{const e=new l.CostAndUsageReportServiceClient({region:n});let a=!1;try{const n={},i=new l.DescribeReportDefinitionsCommand(n),o=await e.send(i);return o.ReportDefinitions&&o.ReportDefinitions.length>0&&(a=!0),{isLegacyCurSetup:a}}catch(n){return console.error(`Error: ${n}`),a=!1,{isLegacyCurSetup:a}}finally{e.destroy()}})("us-east-1"),c=await async function(n){const a=new e.OrganizationsClient({region:n});let i={scpEnabled:!1,tagPolicyEnabled:!1,backupPolicyEnabled:!1};try{const n={},o=new e.ListRootsCommand(n),c=await a.send(o);if(c.Roots&&c.Roots[0].PolicyTypes)for(const n of c.Roots[0].PolicyTypes)"SERVICE_CONTROL_POLICY"==n.Type&&"ENABLED"==n.Status&&(i.scpEnabled=!0),"TAG_POLICY"==n.Type&&"ENABLED"==n.Status&&(i.tagPolicyEnabled=!0),"BACKUP_POLICY"==n.Type&&"ENABLED"==n.Status&&(i.backupPolicyEnabled=!0)}catch(n){console.error(`An error occurred: ${n}`)}finally{return a.destroy(),i}}("us-east-1");console.dir(c,{depth:null,colors:!0});const t=await async function(n){const a=[],i=new e.OrganizationsClient({region:n});try{const n=new e.ListAWSServiceAccessForOrganizationCommand({}),o=await i.send(n);if(o.EnabledServicePrincipals&&o.EnabledServicePrincipals.length>0){o.EnabledServicePrincipals;for(const n of o.EnabledServicePrincipals){const e={service:n.ServicePrincipal??""};a.push(e)}}}catch(n){console.error("Error checking service access:",n)}finally{return i.destroy(),a}}("us-east-1");console.dir(t,{depth:null,colors:!0});const s=await async function(n){let e={status:"disabled"};const a=new i.CloudFormationClient({region:n});try{const n={},o=new i.DescribeOrganizationsAccessCommand(n),c=await a.send(o);e.status=c.Status??"disabled"}catch(n){console.log(`Error: ${n}`)}finally{return a.destroy(),e}}(C);console.dir(s,{depth:null,colors:!0});const m=await async function(n){let e={};const a=new r.ControlTowerClient({region:n});try{const n=new r.ListLandingZonesCommand({}),i=await a.send(n);if(console.log(JSON.stringify(i.landingZones,null,2)),i.landingZones&&i.landingZones.length>0){const n={landingZoneIdentifier:i.landingZones[0].arn},a=i.landingZones[0].arn?.toString().split(":")[3]??"";if(a){e.controlTowerRegion=a;const i=new r.ControlTowerClient({region:a}),o=new r.GetLandingZoneCommand(n),c=await i.send(o);c.landingZone&&(console.log(JSON.stringify(c.landingZone,null,2)),e.status=c.landingZone.status,e.latestAvailableVersion=c.landingZone.latestAvailableVersion,e.deployedVersion=c.landingZone.version,e.driftStatus=c.landingZone.driftStatus?.status)}}}catch(e){console.error(`Error checking Control Tower in ${n}:`,e)}finally{a.destroy()}return e}(C),I=await async function(n){let e={found:!1};for(const a of n){const n=new o.SSOAdminClient({region:a});try{const i={MaxResults:Number("100")},c=new o.ListInstancesCommand(i),t=await n.send(c);if(t.Instances&&t.Instances.length>0){const n=t.Instances[0];e.found=!0,e.region=a,e.arn=n.InstanceArn,e.id=n.IdentityStoreId;break}}catch(n){console.log(`Error looking for AWS Identity Center details in region ${a}`)}finally{n.destroy()}}return e}(E);console.dir(I,{depth:null,colors:!0});const h=await async function(){let n=[];const a=new e.OrganizationsClient({region:"us-east-1"});let i={};try{const o=new e.ListDelegatedAdministratorsCommand({}),c=await a.send(o);if(c.DelegatedAdministrators)for(const o of c.DelegatedAdministrators){const c={AccountId:o.Id},t=new e.ListDelegatedServicesForAccountCommand(c),s=await a.send(t);s.DelegatedServices&&(i={services:s.DelegatedServices,accountName:o.Name},n.push(i))}}catch(n){console.log("Error looking for delegated services.")}finally{a.destroy()}return n}();console.dir(h,{depth:null,colors:!0});const v=await async function(){let n=[];const a=new e.OrganizationsClient({region:"us-east-1"}),i={MaxResults:Number("2000")};try{const o=await a.send(new e.ListAccountsCommand(i));if(o.Accounts&&o.Accounts.length>0)for(const e of o.Accounts){let a={accountName:e.Name,accountEmail:e.Email};n.push(a)}}catch(n){console.error("Error listing AWS accounts:",n)}finally{a.destroy()}return n}();console.dir(v,{depth:null,colors:!0}),F.appendFileSync(w,"\n\nMANAGEMENT ACCOUNT RECOMMENDED TASKS:");let R=1;const D="Management Account";if($&&$.length>0)for(const n of $){const e=await p(R,D,n.userName);if(F.appendFileSync(w,`\n  ${e}`),R++,n.accessKeyId){const e=await y(R,D,n.userName,n.accessKeyId);F.appendFileSync(w,`\n  ${e}`),R++}}if(N&&N.find((n=>!0===n.ec2Found)))for(const n of N)if(n.ec2Found&&n.region){const e=await u(R,D,n.region);F.appendFileSync(w,`\n  ${e}`),R++}if(O&&O.length>0)for(const n of O)if(n.vpcFound&&n.region){const e=await S(R,D,n.region);F.appendFileSync(w,`\n  ${e}`),R++}if(F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                    GOVERNANCE"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nAWS ORGANIZATION POLICY TYPES\n"),F.appendFileSync(w,`\n  Service Control Policies (SCP) enabled: ${c.scpEnabled}`),F.appendFileSync(w,`\n  Tag Policies enabled: ${c.tagPolicyEnabled}`),F.appendFileSync(w,`\n  Backup Policies enabled: ${c.backupPolicyEnabled}`),F.appendFileSync(w,"\n\nAWS ORGANIZATION CLOUDFORMATION\n"),F.appendFileSync(w,`\n  AWS CloudFormation Organization stack sets status : ${s.status}`),F.appendFileSync(w,"\n\nCLOUDTRAIL CHECK\n"),T&&T.length>0){console.dir(T,{depth:null,colors:!0});for(const n of T)n.trailFound&&(F.appendFileSync(w,`\n  CloudTrail found in ${n.region}`),F.appendFileSync(w,`\n    Is Organization Trail: ${n.isOrgTrail}`),F.appendFileSync(w,`\n    Is MultiRegion: ${n.isMultiRegion}`),F.appendFileSync(w,"\n"))}else F.appendFileSync(w,"\n  No AWS CloudTrail resource discovered");F.appendFileSync(w,"\n\nGOVERNANCE SERVICES ENABLED IN AWS ORGANIZATION:\n"),t.find((n=>"cloudtrail.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  AWS CloudTrail"),t.find((n=>"config.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  AWS Config"),F.appendFileSync(w,"\n\nGOVERNANCE RECOMMENDED TASKS:");const z="Governance";let W=1;if(!t.find((n=>"cloudtrail.amazonaws.com"===n.service))){const n=await f(W,z,"AWS CloudTrail");F.appendFileSync(w,`\n  ${n}`),W++}if(!t.find((n=>"config.amazonaws.com"===n.service))){const n=await f(W,z,"AWS Config");F.appendFileSync(w,`\n  ${n}`),W++}if(!c.scpEnabled){const n=await A(W,z,"Service Control Policy");F.appendFileSync(w,`\n  ${n}`),W++}if(!c.tagPolicyEnabled){const n=await A(W,z,"Tag Policy");F.appendFileSync(w,`\n  ${n}`),W++}if(!c.backupPolicyEnabled){const n=await A(W,z,"Backup Policy");F.appendFileSync(w,`\n  ${n}`),W++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                FINANCIAL MANAGEMENT"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nLegacy CUR"),F.appendFileSync(w,`\n  Is legacy CUR setup: ${a.isLegacyCurSetup}`),F.appendFileSync(w,"\n\nCLOUD FINANCIAL MANAGEMENT RECOMMENDED TASKS:");let b=1;const M="Cloud Financial Management";if(!a.isLegacyCurSetup){const n=await async function(n,e){return`${e} - Task ${n} - Enable and create a Cost and Utilization Report (CUR) in the billing console.`}(b,M);F.appendFileSync(w,`\n  ${n}`)}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                MULTI-ACCOUNT STRATEGY"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nAWS ORGANIZATION DETAILS\n"),F.appendFileSync(w,`\n  AWS Organization Id: ${n.id}`),F.appendFileSync(w,`\n  AWS Organization ARN: ${n.arn}`),F.appendFileSync(w,`\n  AWS Organization Root OU Id: ${n.rootOuId}`),F.appendFileSync(w,"\n\nAWS ORGANIZATION CLOUDFORMATION\n"),F.appendFileSync(w,`\n  AWS CloudFormation Organization stack sets status : ${s.status}`);let P,L,k,U=!1;if(n.rootOuId){const a=await async function(n,a){const i=new e.OrganizationsClient({region:n});let o=[];try{const n=new e.ListOrganizationalUnitsForParentCommand({ParentId:a}),c=await i.send(n);if(c.OrganizationalUnits)for(const n of c.OrganizationalUnits){let a={id:n.Id,name:n.Name};const c=await i.send(new e.ListAccountsForParentCommand({ParentId:n.Id}));c.Accounts&&c.Accounts.length>0&&(a.accounts=c.Accounts),o.push(a)}}catch(n){return console.error("Error checking service access:",n),[]}finally{i.destroy()}return o}("us-east-1",n.rootOuId);if(console.dir(a,{depth:null,colors:!0}),F.appendFileSync(w,"\n\nAWS ORGANIZATION TOP-LEVEL ORGANIZATION UNITS\n"),F.appendFileSync(w,"\n  List of Organization's top-level OUs and AWS accounts:"),a&&a.length>0)for(const n of a)if("suspended"===n.name?.toLowerCase()&&(L=!0),"transitional"===n.name?.toLowerCase()&&(P=!0),"workloads"===n.name?.toLowerCase()&&(k=!0),"security"===n.name?.toLowerCase()&&(U=!0),F.appendFileSync(w,`\n    Organizational Unit: ${n.name}`),F.appendFileSync(w,`\n      Organizational Unit Id: ${n.id}`),n.accounts&&n.accounts.length>0){F.appendFileSync(w,"\n      AWS Accounts:");for(const e of n.accounts)F.appendFileSync(w,`\n        ${e.Name}`);F.appendFileSync(w,"\n")}else F.appendFileSync(w,"\n      AWS Accounts: None"),F.appendFileSync(w,"\n");else F.appendFileSync(w,"\n  No top level OUs found.")}if(F.appendFileSync(w,"\n\nAWS ORGANIZATION MEMBER ACCOUNTS\n"),v&&v.length>0)for(const n of v)F.appendFileSync(w,`\n  Account: ${n.accountName}`),F.appendFileSync(w,`\n  Account Email: ${n.accountEmail}\n`);else F.appendFileSync(w,"No member accounts found which is amazing as this is running from one.");F.appendFileSync(w,"\n\nAWS ORGANIZATION ENABLED SERVICES\n"),F.appendFileSync(w,"\n  The following AWS Services are enabled within your AWS Organization:");for(const n of t)F.appendFileSync(w,`\n    ${n.service}`);let G=!1,K=!1,V=!1,Z=!1,B=!1,Y=!1,q=!1,H=!1,_=!1;if(F.appendFileSync(w,"\n\nAWS ORGANIZATION INTEGRATED SERVICE REGISTERED DELEGATED ADMINS\n"),h&&h.length>0)for(const n of h){if(F.appendFileSync(w,`\n  Account: ${n.accountName}`),n.services&&n.services.length>0){F.appendFileSync(w,"\n  Delegated Services:");for(const e of n.services)F.appendFileSync(w,`\n    ${e.ServicePrincipal}`),"securityhub.amazonaws.com"===e.ServicePrincipal&&(K=!0),"guardduty.amazonaws.com"===e.ServicePrincipal&&(V=!0),"sso.amazonaws.com"===e.ServicePrincipal&&(G=!0),"config.amazonaws.com"===e.ServicePrincipal&&(Z=!0),"access-analyzer.amazonaws.com"===e.ServicePrincipal&&(B=!0),"storage-lens.s3.amazonaws.com"===e.ServicePrincipal&&(Y=!0),"ipam.amazonaws.com"===e.ServicePrincipal&&(q=!0),"account.amazonaws.com"===e.ServicePrincipal&&(H=!0),"backup.amazonaws.com"===e.ServicePrincipal&&(_=!0)}F.appendFileSync(w,"\n ")}else F.appendFileSync(w,"\n  No delegated admin accounts in AWS Organization");F.appendFileSync(w,"\n\nMULTI-ACCOUNT STRATEGY RECOMMENDED TASKS:");let x=1,J="Multi-Account Strategy";const j=await async function(n,e){return`${e} - Task ${n} - Review and validate your email addresses and their domains for the root user administrator for management and all member accounts.`}(x,J);if(F.appendFileSync(w,`\n  ${j}`),x++,!c.scpEnabled){const n=await A(x,J,"Service Control Policy");F.appendFileSync(w,`\n  ${n}`),x++}if(!P){const n=await d(x,J,"Transitional");F.appendFileSync(w,`\n  ${n}`),x++}if(!L){const n=await d(x,J,"Suspended");F.appendFileSync(w,`\n  ${n}`),x++}if(!k){const n=await d(x,J,"Workloads");F.appendFileSync(w,`\n  ${n}`),x++}if(!U){const n=await d(x,J,"Security");F.appendFileSync(w,`\n  ${n}`),x++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                  LANDING ZONE"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nAWS CONTROL TOWER\n"),m.controlTowerRegion?(console.dir(m,{depth:null,colors:!0}),F.appendFileSync(w,`\n  Control Tower home region: ${m.controlTowerRegion}`),F.appendFileSync(w,`\n  Control Tower status: ${m.status}`),F.appendFileSync(w,`\n  Control Tower Landing Zone version: ${m.deployedVersion}`),F.appendFileSync(w,`\n  Latest available version: ${m.latestAvailableVersion}`),F.appendFileSync(w,`\n  Drift Status: ${m.driftStatus}`)):F.appendFileSync(w,"\n  AWS Control Tower is not deployed in the AWS Organization"),F.appendFileSync(w,"\n\nLANDING ZONE RECOMMENDED TASKS:");let Q=1;const X="Landing Zone";if(void 0===m.controlTowerRegion){const n=await async function(n,e){return`${e} - Task ${n} - Deploy AWS Control Tower in your home AWS Region.`}(Q,X);F.appendFileSync(w,`\n  ${n}`),Q++}if("DRIFTED"===m.driftStatus){const n=await async function(n,e){return`${e} - Task ${n} - Fix drift in deployed landing zone.`}(Q,X);F.appendFileSync(w,`\n  ${n}`),Q++}if(m.deployedVersion!==m.latestAvailableVersion){const n=m.deployedVersion??"",e=m.latestAvailableVersion??"",a=await async function(n,e,a,i){return`${e} - Task ${n} - Update your AWS Control Tower Landing Zone from ${a} to ${i}.`}(Q,X,n,e);F.appendFileSync(w,`\n  ${a}`),Q++}if(!t.find((n=>"member.org.stacksets.cloudformation.amazonaws.com"===n.service))){const n=await f(Q,X,"AWS CloudFormation");F.appendFileSync(w,`\n  ${n}`),Q++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                    IDENTITY"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nAWS IAM IDENTITY CENTER\n"),F.appendFileSync(w,`\n  IdC Region: ${I.region}`),F.appendFileSync(w,`\n  IdC ARN: ${I.arn}`),F.appendFileSync(w,`\n  IdC Instance Id: ${I.id}`),F.appendFileSync(w,"\n\nIDENTITY RECOMMENDED TASKS:");let nn=1;const en="Identity";if(!t.find((n=>"sso.amazonaws.com"===n.service))){const n=await f(nn,en,"AWS IAM Identity Center");F.appendFileSync(w,`\n  ${n}`),nn++}if(!G){const n=await g(nn,en,"AWS IAM Identity Center");F.appendFileSync(w,`\n  ${n}`),nn++}if(!c.scpEnabled){const n=await A(nn,en,"Service Control Policy");F.appendFileSync(w,`\n  ${n}`),nn++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                    SECURITY"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nAWS SECURITY SERVICES ENABLED IN AWS ORGANIZATION:\n"),t.find((n=>"guardduty.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  AWS GuardDuty"),t.find((n=>"securityhub.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  AWS Security Hub"),t.find((n=>"access-analyzer.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  IAM Access Analyzer"),t.find((n=>"macie.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  Macie"),t.find((n=>"storage-lens.s3.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  Amazon S3 Storage Lens"),t.find((n=>"inspector2.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  Amazon Inspector"),t.find((n=>"cloudtrail.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  AWS CloudTrail"),t.find((n=>"config.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  AWS Config"),F.appendFileSync(w,"\n\nSECURITY RECOMMENDED TASKS:");let an=1;const on="Security";if(!c.scpEnabled){const n=await A(an,on,"Service Control Policy");F.appendFileSync(w,`\n  ${n}`),an++}if(!t.find((n=>"guardduty.amazonaws.com"===n.service))){const n=await f(an,on,"AWS GuardDuty");F.appendFileSync(w,`\n  ${n}`),an++}if(!t.find((n=>"securityhub.amazonaws.com"===n.service))){const n=await f(an,on,"AWS SecurityHub");F.appendFileSync(w,`\n  ${n}`),an++}if(!t.find((n=>"access-analyzer.amazonaws.com"===n.service))){const n=await f(an,on,"AWS IAM Access Analyzer");F.appendFileSync(w,`\n  ${n}`),an++}if(!t.find((n=>"cloudtrail.amazonaws.com"===n.service))){const n=await f(an,on,"AWS CloudTrail");F.appendFileSync(w,`\n  ${n}`),an++}if(!t.find((n=>"config.amazonaws.com"===n.service))){const n=await f(an,on,"AWS Config");F.appendFileSync(w,`\n  ${n}`),an++}if(!K){const n=await g(an,on,"Security Hub");F.appendFileSync(w,`\n  ${n}`),an++}if(!V){const n=await g(an,on,"GuardDuty");F.appendFileSync(w,`\n  ${n}`),an++}if(!Z){const n=await g(an,on,"AWS Config");F.appendFileSync(w,`\n  ${n}`),an++}if(!B){const n=await g(an,on,"AWS IAM Access Analyzer");F.appendFileSync(w,`\n  ${n}`),an++}if(!Y){const n=await g(an,on,"S3 Storage Lens");F.appendFileSync(w,`\n  ${n}`),an++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                    NETWORK"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nNETWORK RECOMMENDED TASKS:");let cn=1;const tn="Network";if(!t.find((n=>"guardduty.amazonaws.com"===n.service))){const n=await f(cn,tn,"AWS GuardDuty");F.appendFileSync(w,`\n  ${n}`),cn++}if(!t.find((n=>"ipam.amazonaws.com"===n.service))){const n=await f(cn,tn,"AWS IPAM");F.appendFileSync(w,`\n  ${n}`),cn++}if(!t.find((n=>"ram.amazonaws.com"===n.service))){const n=await f(cn,tn,"AWS Resource Access Manager");F.appendFileSync(w,`\n  ${n}`),cn++}if(!q){const n=await g(cn,tn,"AWS IPAM");F.appendFileSync(w,`\n  ${n}`),cn++}if(!c.scpEnabled){const n=await A(cn,tn,"Service Control Policy");F.appendFileSync(w,`\n  ${n}`),cn++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                  OBSERVABILITY"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nOBSERVABILITY RECOMMENDED TASKS:");let sn=1;const rn="Observability";if(!t.find((n=>"account.amazonaws.com"===n.service))){const n=await f(sn,rn,"Account Manager");F.appendFileSync(w,`\n  ${n}`),sn++}if(!H){const n=await g(sn,rn,"Account Manager");F.appendFileSync(w,`\n  ${n}`),sn++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n               BACKUP AND RECOVERY"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nBACKUP AND RECOVERY RECOMMENDED TASKS:");let ln=1;const dn="Backup and Recovery";if(!t.find((n=>"backup.amazonaws.com"===n.service))){const n=await f(ln,dn,"AWS Backup");F.appendFileSync(w,`\n  ${n}`),ln++}if(!_){const n=await g(ln,dn,"AWS Backup");F.appendFileSync(w,`\n  ${n}`),ln++}if(!c.backupPolicyEnabled){const n=await A(ln,dn,"Backup Policy");F.appendFileSync(w,`\n  ${n}`),ln++}if(!c.scpEnabled){const n=await A(ln,dn,"Service Control Policy");F.appendFileSync(w,`\n  ${n}`),ln++}}else if(I.isInOrganization&&!I.isManagementAccount){const n="\nWARNING: You are running Pathfinder from an account that is a member of your AWS Organization. Please run the solution from your AWS Management account.";console.warn(n),F.appendFileSync(w,n)}else{const n="\nWARNING: You are running Pathfinder from an account that not part of an AWS Organization. This account will be treated as a standalone account.";console.warn(n),F.appendFileSync(w,n)}F.appendFileSync(w,"\n\n\n  END REVIEW")})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGF0aGZpbmRlci5qcyIsIm1hcHBpbmdzIjoibUJBQUEsTUFBTSxFQUErQkEsUUFBUSx1QkNBdkMsRUFBK0JBLFFBQVEsaUNDQXZDLEVBQStCQSxRQUFRLHVCQ0F2QyxFQUErQkEsUUFBUSxrQ0NBdkMsRUFBK0JBLFFBQVEsNkJDQXZDLEVBQStCQSxRQUFRLHVCQ0F2QyxFQUErQkEsUUFBUSw4QkNBdkMsRUFBK0JBLFFBQVEsa0NDQXZDLEVBQStCQSxRQUFRLGdDQ0F2QyxFQUErQkEsUUFBUSxpREN3QnRDQyxlQUFlQyxFQUFhQyxFQUFZQyxFQUFVQyxHQUVyRCxNQURhLEdBQUdELFlBQW1CRCwyQkFBb0NFLElBRTNFLENBQ09KLGVBQWVLLEVBQWtCSCxFQUFZQyxFQUFVRyxHQUUxRCxNQURhLEdBQUdILFlBQW1CRCx1QkFBZ0NJLEdBRXZFLENBQ09OLGVBQWVPLEVBQXdCTCxFQUFZQyxFQUFVRyxFQUFhRSxHQUU3RSxNQURhLEdBQUdMLFlBQW1CRCx1QkFBZ0NJLGNBQXdCRSxHQUUvRixDQUNPUixlQUFlUyxFQUFVUCxFQUFZQyxFQUFVTyxHQUVsRCxNQURhLEdBQUdQLFlBQW1CRCx5QkFBa0NRLFdBRXpFLENBQ09WLGVBQWVXLEVBQVVULEVBQVlDLEVBQVVPLEdBRWxELE1BRGEsR0FBR1AsWUFBbUJELHlCQUFrQ1EsV0FFekUsQ0FDT1YsZUFBZVksRUFBNkJWLEVBQVlDLEVBQVVVLEdBRXJFLE1BRGEsR0FBR1YsWUFBbUJELDhCQUF1Q1csZ0NBRTlFLENBQ09iLGVBQWVjLEVBQWlDWixFQUFZQyxFQUFVVSxHQUV6RSxNQURhLEdBQUdWLFlBQW1CRCxnQ0FBeUNXLG9EQUVoRixDQVNPYixlQUFlZSxFQUFxQmIsRUFBWUMsRUFBVWEsR0FFN0QsTUFEYSxHQUFHYixZQUFtQkQsOEJBQXVDYyxpQ0FFOUUsQ0MvREEsTUFBTSxFQUErQmpCLFFBQVEsTUNtQmhDQyxXQUNULE1BQU1pQixFQUFhLG1CQUNuQixJQUFJQyxFQUFXLElBQUlDLEtBQ25CLE1BQU1ULEVBQVNVLFFBQVFDLElBQUlDLFlBQWMsWUFDbkNDLFFDdEJWdkIsaUJBRUksTUFBTXdCLEVBQVksSUFBSSxFQUFBQyxVQUFVLENBQUVmLE9BQVEsY0FDMUMsSUFDSSxNQUFNZ0IsRUFBeUIsSUFBSSxFQUFBQyx1QkFBdUIsQ0FBQyxHQUNyREMsUUFBaUJKLEVBQVVLLEtBQUtILEdBQ2hDSSxFQUFVLEdBQ2hCLElBQUssTUFBTXBCLEtBQVVrQixFQUFTRyxTQUFXLEdBQ3JDRCxFQUFRRSxLQUFLdEIsRUFBT3VCLFlBQWMsSUFFdEMsT0FBT0gsQ0FDWCxDQUNBLE1BQU9JLEdBRUgsT0FEQUMsUUFBUUQsTUFBTSw0QkFBNkJBLEdBQ3BDLEVBQ1gsQ0FDQSxRQUNJVixFQUFVWSxTQUNkLENBQ0osQ0RHNkIsR0FDekJELFFBQVFFLElBQUksd0NBQ1osTUFBTUMsT0VUdUJ0QyxPQUFPVSxJQUNwQyxNQUFNNkIsRUFBc0IsSUFBSSxFQUFBQyxvQkFBb0IsQ0FBRTlCLFdBQ3RELElBQUkrQixHQUFtQixFQUNuQkMsR0FBc0IsRUFDMUIsSUFDSSxNQUFNQyxRQW5CZDNDLGVBQTRCVSxHQUN4QixNQUFNa0MsRUFBWSxJQUFJLEVBQUFDLFVBQVUsQ0FBRW5DLFdBQ2xDLElBQ0ksTUFBTW9DLEVBQTJCLElBQUksRUFBQUMseUJBQXlCLENBQUMsR0FFL0QsYUFEc0JILEVBQVVmLEtBQUtpQixJQUN0QkUsT0FDbkIsQ0FDQSxNQUFPZCxHQUVILE1BREFDLFFBQVFELE1BQU0sNEJBQTZCQSxHQUNyQ0EsQ0FDVixDQUNKLENBUXVDZSxDQUFhdkMsR0FDNUMsR0FBSWlDLEVBQWtCLENBQ2xCLE1BQU1PLEVBQThCLElBQUksRUFBQUMsNEJBQTRCLENBQUMsR0FDL0RDLFFBQXFDYixFQUFvQlYsS0FBS3FCLEdBRXBFLEdBQUlFLEVBQTZCQyxjQUFjQyxnQkFBaUIsQ0FDNUQsTUFBTUMsRUFBc0JILEVBQTZCQyxjQUFjQyxnQkFDbkVDLEdBQXVCWixHQUV2QkQsR0FBc0IsRUFDdEJELEdBQW1CLEdBSW5CQSxHQUFtQixDQUUzQixNQUdJQSxHQUFtQixDQUUzQixDQUNKLENBQ0EsTUFBT1AsR0FDSEMsUUFBUUQsTUFBTSxTQUFVQSxFQUM1QixDQUNBLFFBQ0lLLEVBQW9CSCxTQUN4QixDQUNBLE1BQU8sQ0FBRUssbUJBQWtCQyxzQkFBcUIsRUZ6QnRCYyxDQUFrQjlDLEdBQzVDLGdCQUFpQk8sRUFBWSxrQ0FDN0IsaUJBQWtCQSxFQUFZLG1CQUFtQkMsRUFBU3VDLHNCQUMxRCxpQkFBa0J4QyxFQUFZLCtEQUM5QixpQkFBa0JBLEVBQVksMkNBQzlCLGlCQUFrQkEsRUFBWSwrREFDOUIsaUJBQWtCQSxFQUFZLDBCQUMxQnFCLElBQ0FILFFBQVF1QixJQUFJcEIsRUFBYSxDQUFFcUIsTUFBTyxLQUFNQyxRQUFRLElBQ2hELGlCQUFrQjNDLEVBQVksK0JBQStCcUIsRUFBWUcsb0JBQ3pFLGlCQUFrQnhCLEVBQVkseUNBQXlDcUIsRUFBWUksd0JBRXZGUCxRQUFRRSxJQUFJLDZCQUNaLE1BQU13QixPR3BDWTdELFdBRWxCLE1BQU04RCxFQUFZLElBQUksRUFBQUMsVUFBVSxDQUFFckQsT0FBUSxjQUNwQ3NELEVBQWMsR0FDcEIsSUFDSSxNQUFNQyxFQUFtQixJQUFJLEVBQUFDLGlCQUFpQixDQUFDLEdBQ3pDQyxRQUEwQkwsRUFBVWpDLEtBQUtvQyxHQUMvQyxJQUFLLE1BQU1HLEtBQVFELEVBQWtCRSxPQUFTLEdBQUksQ0FDOUMsTUFBTUMsRUFBV0YsRUFBS0csVUFBWSxHQUM1QkMsRUFBd0IsSUFBSSxFQUFBQyxzQkFBc0IsQ0FDcERGLFNBQVVELElBR1JJLFNBRCtCWixFQUFVakMsS0FBSzJDLElBQ1ZHLG1CQUFxQixHQUMvRCxHQUFJRCxFQUFXRSxPQUFTLEVBQ3BCLElBQUssTUFBTUMsS0FBYUgsRUFBWSxDQUNoQyxNQUFNSSxFQUFjRCxFQUFVRSxhQUFlLEdBQ3ZDQyxFQUFxQixJQUFJLEVBQUFDLDRCQUE0QixDQUN2REYsWUFBYUQsSUFFWEksUUFBeUJwQixFQUFVakMsS0FBS21ELEdBQ3hDRyxFQUFnQixDQUNsQmIsV0FDQVEsY0FDQU0sU0FBVUYsR0FBb0JBLEVBQWlCRyxtQkFDekMsR0FBR0gsRUFBaUJHLGtCQUFrQkMsZ0JBQ3RDLGlCQUVWdEIsRUFBWWhDLEtBQUttRCxFQUNyQixLQUVDLENBQ0QsTUFBTUEsRUFBZ0IsQ0FDbEJiLFlBRUpOLEVBQVloQyxLQUFLbUQsRUFDckIsQ0FDSixDQUNKLENBQ0EsTUFBT2pELEdBQ0hDLFFBQVFELE1BQU0sU0FBVUEsRUFDNUIsQ0FDQSxRQUNJNEIsRUFBVTFCLFNBQ2QsQ0FDQSxPQUFPNEIsQ0FBVyxFSFRVLEdBRTVCLEdBREEsaUJBQWtCL0MsRUFBWSx5QkFDMUI0QyxHQUFpQkEsRUFBY2UsT0FBUyxFQUFHLENBQzNDekMsUUFBUXVCLElBQUlHLEVBQWUsQ0FBRUYsTUFBTyxLQUFNQyxRQUFRLElBQ2xELElBQUssTUFBTTJCLEtBQVcxQixFQUNsQixpQkFBa0I1QyxFQUFZLGlCQUFpQnNFLEVBQVFqQixZQUNuRGlCLEVBQVFULGFBQ1IsaUJBQWtCN0QsRUFBWSwwQkFBMEJzRSxFQUFRVCxlQUVwRSxpQkFBa0I3RCxFQUFZLEtBRXRDLE1BRUksaUJBQWtCQSxFQUFZLDJCQUVsQ2tCLFFBQVFFLElBQUksd0RBQ1osTUFBTW1ELFFJckRWeEYsZUFBOEI4QixHQUMxQixJQUFJMkQsRUFBZ0IsR0FDcEIsSUFBSyxNQUFNL0UsS0FBVW9CLEVBQVMsQ0FDMUIsTUFBTU4sRUFBWSxJQUFJLEVBQUFDLFVBQVUsQ0FBRWYsV0FDNUJnRixFQUFVLElBQUksRUFBQUMseUJBQXlCLENBQUMsR0FDOUMsSUFDSSxNQUFNL0QsUUFBaUJKLEVBQVVLLEtBQUs2RCxHQUN0QyxHQUFJOUQsRUFBU2dFLGFBQ1QsR0FBSWhFLEVBQVNnRSxhQUFhaEIsT0FBUyxFQUFHLENBRWxDLE1BQU1pQixFQUFXLENBQ2JuRixPQUFRQSxFQUNSbUYsVUFBVSxHQUVkSixFQUFjekQsS0FBSzZELEVBQ3ZCLEtBQ0ssQ0FDRCxNQUFNQSxFQUFXLENBQ2JuRixPQUFRQSxFQUNSbUYsVUFBVSxHQUVkSixFQUFjekQsS0FBSzZELEVBQ3ZCLEtBRUMsQ0FDRCxNQUFNQSxFQUFXLENBQ2JuRixPQUFRQSxFQUNSbUYsVUFBVSxHQUVkSixFQUFjekQsS0FBSzZELEVBQ3ZCLENBQ0osQ0FDQSxNQUFPM0QsR0FDSEMsUUFBUUUsSUFBSSw0QkFBNEJILElBQzVDLENBQ0EsUUFDSVYsRUFBVVksU0FDZCxDQUNKLENBQ0EsT0FBT3FELENBQ1gsQ0phMkIsQ0FBZWxFLEdBRXRDLEdBREEsaUJBQWtCTixFQUFZLDRCQUMxQnVFLEdBQVlBLEVBQVNNLE1BQUtDLElBQTRCLElBQW5CQSxFQUFNRixXQUFvQixDQUM3RDFELFFBQVF1QixJQUFJOEIsRUFBVSxDQUFFN0IsTUFBTyxLQUFNQyxRQUFRLElBQzdDLElBQUssTUFBTW9DLEtBQU9SLEVBQ1ZRLEVBQUlILFVBQ0osaUJBQWtCNUUsRUFBWSxPQUFPK0UsRUFBSXRGLGtDQUdyRCxNQUVJLGlCQUFrQk8sRUFBWSwrQkFFbENrQixRQUFRRSxJQUFJLCtDQUNaLE1BQU00RCxRS25FVmpHLGVBQThCOEIsR0FDMUIsSUFBSW9FLEVBQWdCLEdBQ3BCLElBQUssTUFBTXhGLEtBQVVvQixFQUFTLENBQzFCLE1BQU1OLEVBQVksSUFBSSxFQUFBQyxVQUFVLENBQUVmLFdBQzVCZ0YsRUFBVSxJQUFJLEVBQUFTLG9CQUFvQixDQUFDLEdBQ3pDLElBQ0ksTUFBTXZFLFFBQWlCSixFQUFVSyxLQUFLNkQsR0FDdEMsR0FBSTlELEVBQVN3RSxLQUNULEdBQUl4RSxFQUFTd0UsS0FBS3hCLE9BQVMsRUFBRyxDQUUxQixNQUFNeUIsRUFBVyxDQUNiM0YsT0FBUUEsRUFDUjJGLFVBQVUsR0FFZEgsRUFBY2xFLEtBQUtxRSxFQUN2QixLQUNLLENBQ0QsTUFBTUEsRUFBVyxDQUNiM0YsT0FBUUEsRUFDUjJGLFVBQVUsR0FFZEgsRUFBY2xFLEtBQUtxRSxFQUN2QixLQUVDLENBQ0QsTUFBTUEsRUFBVyxDQUNiM0YsT0FBUUEsRUFDUjJGLFVBQVUsR0FFZEgsRUFBY2xFLEtBQUtxRSxFQUN2QixDQUNKLENBQ0EsTUFBT25FLEdBQ0hDLFFBQVFFLElBQUksNEJBQTRCSCxJQUM1QyxDQUNBLFFBQ0lWLEVBQVVZLFNBQ2QsQ0FDSixDQUNBLE9BQU84RCxDQUNYLENMMkIyQixDQUFlM0UsR0FFdEMsR0FEQSxpQkFBa0JOLEVBQVksbUJBQzFCZ0YsR0FBWUEsRUFBU3JCLE9BQVMsRUFBRyxDQUNqQ3pDLFFBQVF1QixJQUFJdUMsRUFBVSxDQUFFdEMsTUFBTyxLQUFNQyxRQUFRLElBQzdDLElBQUssTUFBTTBDLEtBQVdMLEVBQ2RLLEVBQVFELFVBQ1IsaUJBQWtCcEYsRUFBWSxPQUFPcUYsRUFBUTVGLHlCQUd6RCxNQUVJLGlCQUFrQk8sRUFBWSxzQkFFbENrQixRQUFRRSxJQUFJLG9FQUNaLE1BQU1rRSxRTWpGVnZHLGVBQXFDOEIsR0FDakMsSUFBSTBFLEVBQXVCLEdBQzNCLElBQUssTUFBTTlGLEtBQVVvQixFQUFTLENBQzFCLE1BQU0yRSxFQUFtQixJQUFJLEVBQUFDLGlCQUFpQixDQUFFaEcsV0FDMUNpRyxFQUE0QixJQUFJLEVBQUFDLHNCQUFzQixDQUFDLEdBQzdELElBQ0ksTUFBTUMsUUFBMkJKLEVBQWlCNUUsS0FBSzhFLEdBQ3ZELEdBQUlFLEVBQW1CQyxVQUNuQixJQUFLLE1BQU1DLEtBQVNGLEVBQW1CQyxVQUFXLENBQzlDLElBQUlFLEVBQVksQ0FBQyxFQUdiQSxFQUZBRCxFQUFNRSxZQUFjdkcsRUFFUixDQUNSQSxPQUFRQSxFQUNSd0csWUFBWSxFQUNaQyxXQUFZSixFQUFNSyxtQkFDbEJDLGNBQWVOLEVBQU1LLG9CQUliLENBQ1IxRyxPQUFRQSxFQUNSd0csWUFBWSxHQUdwQlYsRUFBcUJ4RSxLQUFLZ0YsRUFDOUIsQ0FFUixDQUNBLE1BQU85RSxHQUNIQyxRQUFRRSxJQUFJLDRCQUE0QkgsSUFDNUMsQ0FDQSxRQUNJdUUsRUFBaUJyRSxTQUNyQixDQUNKLENBQ0EsT0FBT29FLENBQ1gsQ040Q2tDLENBQXNCakYsR0FDOUMrRixRT2xGVnRILGVBQWlDOEIsR0FDN0IsSUFBSXlGLEVBQWdCLEdBQ3BCLElBQUssTUFBTTdHLEtBQVVvQixFQUFTLENBQzFCLE1BQU0wRixFQUFzQixJQUFJLEVBQUFDLG9CQUFvQixDQUFFL0csV0FDdEQsSUFBSWdILEVBQWUsQ0FDZmhILE9BQVFBLEVBQ1JpSCxxQkFBcUIsRUFDckJDLDRCQUE0QixHQUVoQyxJQUVJLE1BQU1DLFFBQXlCTCxFQUFvQjNGLEtBQUssSUFBSSxFQUFBaUcsMkNBQTJDLENBQUMsSUFDdkIsSUFBMURELEVBQWlCRSw4QkFBOEJuRCxTQUVsRThDLEVBQWFDLHFCQUFzQixHQUd2QyxNQUFNSyxRQUF3QlIsRUFBb0IzRixLQUFLLElBQUksRUFBQW9HLGdDQUFnQyxDQUFDLElBQ3pCLElBQTdDRCxFQUFnQkUsa0JBQWtCdEQsU0FFcEQ4QyxFQUFhRSw0QkFBNkIsR0FFOUNMLEVBQWN2RixLQUFLMEYsRUFDdkIsQ0FDQSxNQUFPeEYsR0FDSEMsUUFBUUQsTUFBTSxnQ0FBZ0N4QixLQUFXd0IsRUFDN0QsQ0FDQSxRQUNJc0YsRUFBb0JwRixTQUN4QixDQUNKLENBQ0EsT0FBT21GLENBQ1gsQ1BrRDhCLENBQWtCaEcsR0FFNUMsR0FEQSxpQkFBa0JOLEVBQVksMEJBQzFCcUcsR0FBZUEsRUFBWXhCLE1BQUtDLElBQXVDLElBQTlCQSxFQUFNNEIsc0JBQStCLENBQzlFeEYsUUFBUXVCLElBQUk0RCxFQUFhLENBQUUzRCxNQUFPLEtBQU1DLFFBQVEsSUFDaEQsSUFBSyxNQUFNdUUsS0FBY2IsRUFDakJhLEVBQVdSLHFCQUNYLGlCQUFrQjFHLEVBQVksT0FBT2tILEVBQVd6SCxrQ0FFaER5SCxFQUFXUCw0QkFDWCxpQkFBa0IzRyxFQUFZLE9BQU9rSCxFQUFXekgseUNBRzVELE1BRUksaUJBQWtCTyxFQUFZLHlDQUdsQyxHQUFJcUIsRUFBWUcsa0JBQW9CSCxFQUFZSSxvQkFBcUIsQ0FDakUsTUFBTTBGLFFRcEdkcEksZUFBNkJVLEdBQ3pCLE1BQU0ySCxFQUFZLElBQUksRUFBQTdGLG9CQUFvQixDQUFFOUIsV0FDNUMsSUFBSTBILEVBQWEsQ0FBQyxFQUNsQixJQUNJLE1BQU1FLEVBQXFCLElBQUksRUFBQW5GLDRCQUE0QixDQUFDLEdBQ3REb0YsUUFBZ0JGLEVBQVV4RyxLQUFLeUcsR0FDakNDLEVBQVFsRixlQUNSK0UsRUFBV0ksR0FBS0QsRUFBUWxGLGFBQWFvRixJQUFNLEdBRTNDTCxFQUFXTSxJQUFNSCxFQUFRbEYsYUFBYXNGLEtBQU8sSUFHakQsTUFBTWpELEVBQVUsSUFBSSxFQUFBa0QsaUJBQWlCLENBQUMsR0FDaENDLFFBQWNSLEVBQVV4RyxLQUFLNkQsR0FDL0JtRCxFQUFNQyxNQUNOVixFQUFXVyxTQUFXRixFQUFNQyxNQUFNLEdBQUdMLEdBSXJDdEcsUUFBUUUsSUFBSSwyQ0FFcEIsQ0FDQSxNQUFPSCxHQUNIQyxRQUFRRCxNQUFNLHNCQUFzQkEsSUFDeEMsQ0FDQSxRQUVJLE9BREFtRyxFQUFVakcsVUFDSGdHLENBQ1gsQ0FDSixDUnVFaUMsQ0FBYyxhQUN2Q2pHLFFBQVF1QixJQUFJMEUsRUFBWSxDQUFFekUsTUFBTyxLQUFNQyxRQUFRLElBQy9DLE1BQU1vRixPU3RHU2hKLE9BQU9VLElBRTFCLE1BQU11SSxFQUFZLElBQUksRUFBQUMsZ0NBQWdDLENBQUV4SSxXQUN4RCxJQUFJeUksR0FBbUIsRUFDdkIsSUFFSSxNQUFNQyxFQUFRLENBQUMsRUFDVDFELEVBQVUsSUFBSSxFQUFBMkQsaUNBQWlDRCxHQUMvQ3hILFFBQWlCcUgsRUFBVXBILEtBQUs2RCxHQUl0QyxPQUhJOUQsRUFBUzBILG1CQUFxQjFILEVBQVMwSCxrQkFBa0IxRSxPQUFTLElBQ2xFdUUsR0FBbUIsR0FFaEIsQ0FBRUEsbUJBQ2IsQ0FDQSxNQUFPakgsR0FJSCxPQUZBQyxRQUFRRCxNQUFNLFVBQVVBLEtBQ3hCaUgsR0FBbUIsRUFDWixDQUFFQSxtQkFDYixDQUNBLFFBRUlGLEVBQVU3RyxTQUNkLEdUK0VpQyxDQUFlLGFBQ3RDbUgsUVV2R2R2SixlQUF3Q1UsR0FDcEMsTUFBTTJILEVBQVksSUFBSSxFQUFBN0Ysb0JBQW9CLENBQUU5QixXQUM1QyxJQUFJOEksRUFBcUIsQ0FDckJDLFlBQVksRUFDWkMsa0JBQWtCLEVBQ2xCQyxxQkFBcUIsR0FFekIsSUFDSSxNQUFNUCxFQUFRLENBQUMsRUFDVDFELEVBQVUsSUFBSSxFQUFBa0QsaUJBQWlCUSxHQUMvQlAsUUFBY1IsRUFBVXhHLEtBQUs2RCxHQUNuQyxHQUFJbUQsRUFBTUMsT0FDRkQsRUFBTUMsTUFBTSxHQUFHYyxZQUNmLElBQUssTUFBTUMsS0FBaUJoQixFQUFNQyxNQUFNLEdBQUdjLFlBQ2IsMEJBQXRCQyxFQUFjQyxNQUE0RCxXQUF4QkQsRUFBY0UsU0FDaEVQLEVBQW1CQyxZQUFhLEdBRVYsY0FBdEJJLEVBQWNDLE1BQWdELFdBQXhCRCxFQUFjRSxTQUNwRFAsRUFBbUJFLGtCQUFtQixHQUVoQixpQkFBdEJHLEVBQWNDLE1BQW1ELFdBQXhCRCxFQUFjRSxTQUN2RFAsRUFBbUJHLHFCQUFzQixFQUs3RCxDQUNBLE1BQU96SCxHQUNIQyxRQUFRRCxNQUFNLHNCQUFzQkEsSUFDeEMsQ0FDQSxRQUVJLE9BREFtRyxFQUFVakcsVUFDSG9ILENBQ1gsQ0FDSixDVnFFNkMsQ0FBeUIsYUFDOURySCxRQUFRdUIsSUFBSTZGLEVBQXdCLENBQUU1RixNQUFPLEtBQU1DLFFBQVEsSUFDM0QsTUFBTW9HLFFXekdkaEssZUFBcUNVLEdBQ2pDLE1BQU11SixFQUF3QixHQUN4QjVCLEVBQVksSUFBSSxFQUFBN0Ysb0JBQW9CLENBQUU5QixXQUM1QyxJQUNJLE1BQU13SixFQUEwQixJQUFJLEVBQUFDLDJDQUEyQyxDQUFDLEdBQzFFQyxRQUFpQy9CLEVBQVV4RyxLQUFLcUksR0FDdEQsR0FBSUUsRUFBeUJDLDBCQUE0QkQsRUFBeUJDLHlCQUF5QnpGLE9BQVMsRUFBRyxDQUNuSHdGLEVBQXlCQyx5QkFDekIsSUFBSyxNQUFNQyxLQUFjRixFQUF5QkMseUJBQTBCLENBQ3hFLE1BQU1FLEVBQWtCLENBQUVDLFFBQVNGLEVBQVdHLGtCQUFvQixJQUNsRVIsRUFBc0JqSSxLQUFLdUksRUFDL0IsQ0FDSixDQUNKLENBQ0EsTUFBT3JJLEdBQ0hDLFFBQVFELE1BQU0saUNBQWtDQSxFQUNwRCxDQUNBLFFBRUksT0FEQW1HLEVBQVVqRyxVQUNINkgsQ0FDWCxDQUNKLENYb0Z5QyxDQUFzQixhQUN2RDlILFFBQVF1QixJQUFJc0csRUFBb0IsQ0FBRXJHLE1BQU8sS0FBTUMsUUFBUSxJQUN2RCxNQUFNOEcsUVkzR2QxSyxlQUFvQ1UsR0FDaEMsSUFBSWlLLEVBQWUsQ0FDZkMsT0FBUSxZQUVaLE1BQU1DLEVBQXVCLElBQUksRUFBQUMscUJBQXFCLENBQUVwSyxXQUN4RCxJQUNJLE1BQU1xSyxFQUF5QixDQUFDLEVBQzFCckYsRUFBVSxJQUFJLEVBQUFzRixtQ0FBbUNELEdBQ2pERSxRQUFnQ0osRUFBcUJoSixLQUFLNkQsR0FFaEVpRixFQUFhQyxPQUFTSyxFQUF3QmxCLFFBQVUsVUFDNUQsQ0FDQSxNQUFPN0gsR0FDSEMsUUFBUUUsSUFBSSxVQUFVSCxJQUUxQixDQUNBLFFBRUksT0FEQTJJLEVBQXFCekksVUFDZHVJLENBQ1gsQ0FDSixDWnVGbUMsQ0FBcUJqSyxHQUNoRHlCLFFBQVF1QixJQUFJZ0gsRUFBYyxDQUFFL0csTUFBTyxLQUFNQyxRQUFRLElBQ2pELE1BQU1zSCxRYTdHZGxMLGVBQStCVSxHQUMzQixJQUFJeUssRUFBbUIsQ0FBQyxFQUN4QixNQUFNQyxFQUFxQixJQUFJLEVBQUFDLG1CQUFtQixDQUFFM0ssV0FDcEQsSUFDSSxNQUFNZ0YsRUFBVSxJQUFJLEVBQUE0Rix3QkFBd0IsQ0FBQyxHQUN2QzFKLFFBQWlCd0osRUFBbUJ2SixLQUFLNkQsR0FFL0MsR0FEQXZELFFBQVFFLElBQUlrSixLQUFLQyxVQUFVNUosRUFBUzZKLGFBQWMsS0FBTSxJQUNwRDdKLEVBQVM2SixjQUFnQjdKLEVBQVM2SixhQUFhN0csT0FBUyxFQUFHLENBQzNELE1BQU13RSxFQUFRLENBQ1ZzQyxzQkFBdUI5SixFQUFTNkosYUFBYSxHQUFHL0MsS0FFOUNpRCxFQUFXL0osRUFBUzZKLGFBQWEsR0FBRy9DLEtBQUtrRCxXQUFXQyxNQUFNLEtBQUssSUFBTSxHQUMzRSxHQUFJRixFQUFVLENBQ1ZSLEVBQWlCVyxtQkFBcUJILEVBQ3RDLE1BQU1JLEVBQTJCLElBQUksRUFBQVYsbUJBQW1CLENBQUUzSyxPQUFRaUwsSUFDNURqRyxFQUFVLElBQUksRUFBQXNHLHNCQUFzQjVDLEdBQ3BDNkMsUUFBbUJGLEVBQXlCbEssS0FBSzZELEdBQ25EdUcsRUFBV0MsY0FDWC9KLFFBQVFFLElBQUlrSixLQUFLQyxVQUFVUyxFQUFXQyxZQUFhLEtBQU0sSUFDekRmLEVBQWlCUCxPQUFTcUIsRUFBV0MsWUFBWXRCLE9BQ2pETyxFQUFpQmdCLHVCQUF5QkYsRUFBV0MsWUFBWUMsdUJBQ2pFaEIsRUFBaUJpQixnQkFBa0JILEVBQVdDLFlBQVlHLFFBQzFEbEIsRUFBaUJtQixZQUFjTCxFQUFXQyxZQUFZSSxhQUFhMUIsT0FFM0UsQ0FDSixDQUNKLENBQ0EsTUFBTzFJLEdBQ0hDLFFBQVFELE1BQU0sbUNBQW1DeEIsS0FBV3dCLEVBQ2hFLENBQ0EsUUFDSWtKLEVBQW1CaEosU0FDdkIsQ0FDQSxPQUFPK0ksQ0FDWCxDYjJFMEMsQ0FBZ0J6SyxHQUM1QzZMLFFjOUdkdk0sZUFBMEJ3TSxHQUN0QixJQUFJQyxFQUFhLENBQUVDLE9BQU8sR0FDMUIsSUFBSyxNQUFNaE0sS0FBVThMLEVBQVksQ0FDN0IsTUFBTUcsRUFBaUIsSUFBSSxFQUFBQyxlQUFlLENBQUVsTSxXQUM1QyxJQUNJLE1BQU1tTSxFQUFXLENBQ2JDLFdBQVlDLE9BQU8sUUFFakJySCxFQUFVLElBQUksRUFBQXNILHFCQUFxQkgsR0FDbkNJLFFBQTRCTixFQUFlOUssS0FBSzZELEdBQ3RELEdBQUl1SCxFQUFvQkMsV0FBYUQsRUFBb0JDLFVBQVV0SSxPQUFTLEVBQUcsQ0FDM0UsTUFBTXVJLEVBQWNGLEVBQW9CQyxVQUFVLEdBQ2xEVCxFQUFXQyxPQUFRLEVBQ25CRCxFQUFXL0wsT0FBU0EsRUFDcEIrTCxFQUFXL0QsSUFBTXlFLEVBQVlDLFlBQzdCWCxFQUFXakUsR0FBSzJFLEVBQVlFLGdCQUM1QixLQUNKLENBQ0osQ0FDQSxNQUFPbkwsR0FDSEMsUUFBUUUsSUFBSSwyREFBMkQzQixJQUMzRSxDQUNBLFFBQ0lpTSxFQUFldkssU0FDbkIsQ0FDSixDQUNBLE9BQU9xSyxDQUNYLENkbUZxQyxDQUFXbEwsR0FDeENZLFFBQVF1QixJQUFJNkksRUFBZ0IsQ0FBRTVJLE1BQU8sS0FBTUMsUUFBUSxJQUNuRCxNQUFNMEosUWVoSGR0TixpQkFDSSxJQUFJdU4sRUFBZSxHQUNuQixNQUFNbEYsRUFBWSxJQUFJLEVBQUE3RixvQkFBb0IsQ0FBRTlCLE9BQVEsY0FDcEQsSUFBSThNLEVBQWMsQ0FBQyxFQUNuQixJQUNJLE1BQU05SCxFQUFVLElBQUksRUFBQStILG1DQUFtQyxDQUFDLEdBQ2xEN0wsUUFBaUJ5RyxFQUFVeEcsS0FBSzZELEdBQ3RDLEdBQUk5RCxFQUFTOEwsd0JBQ1QsSUFBSyxNQUFNQyxLQUFNL0wsRUFBUzhMLHdCQUF5QixDQUMvQyxNQUFNdEUsRUFBUSxDQUFFd0UsVUFBV0QsRUFBR2xGLElBQ3hCL0MsRUFBVSxJQUFJLEVBQUFtSSx1Q0FBdUN6RSxHQUNyRDBFLFFBQXdCekYsRUFBVXhHLEtBQUs2RCxHQUN6Q29JLEVBQWdCQyxvQkFDaEJQLEVBQWMsQ0FDVlEsU0FBVUYsRUFBZ0JDLGtCQUMxQkUsWUFBYU4sRUFBR08sTUFFcEJYLEVBQWF2TCxLQUFLd0wsR0FFMUIsQ0FFUixDQUNBLE1BQU90TCxHQUNIQyxRQUFRRSxJQUFJLHdDQUNoQixDQUNBLFFBQ0lnRyxFQUFVakcsU0FDZCxDQUNBLE9BQU9tTCxDQUNYLENmbUZ5QyxHQUNqQ3BMLFFBQVF1QixJQUFJNEosRUFBb0IsQ0FBRTNKLE1BQU8sS0FBTUMsUUFBUSxJQUN2RCxNQUFNdUssUWdCbEhkbk8saUJBQ0ksSUFBSW9PLEVBQXVCLEdBQzNCLE1BQU1DLEVBQWEsSUFBSSxFQUFBN0wsb0JBQW9CLENBQUU5QixPQUFRLGNBQy9DMEksRUFBUSxDQUNWMEQsV0FBWUMsT0FBTyxTQUV2QixJQUNJLE1BQU1uTCxRQUFpQnlNLEVBQVd4TSxLQUFLLElBQUksRUFBQXlNLG9CQUFvQmxGLElBQy9ELEdBQUl4SCxFQUFTMk0sVUFBWTNNLEVBQVMyTSxTQUFTM0osT0FBUyxFQUNoRCxJQUFLLE1BQU00SixLQUFXNU0sRUFBUzJNLFNBQVUsQ0FDckMsSUFBSUUsRUFBbUIsQ0FDbkJSLFlBQWFPLEVBQVFOLEtBQ3JCUSxhQUFjRixFQUFRRyxPQUUxQlAsRUFBcUJwTSxLQUFLeU0sRUFDOUIsQ0FFUixDQUNBLE1BQU92TSxHQUNIQyxRQUFRRCxNQUFNLDhCQUErQkEsRUFDakQsQ0FDQSxRQUNJbU0sRUFBV2pNLFNBQ2YsQ0FDQSxPQUFPZ00sQ0FDWCxDaEJ5RjhDLEdBQ3RDak0sUUFBUXVCLElBQUl5SyxFQUF5QixDQUFFeEssTUFBTyxLQUFNQyxRQUFRLElBRTVELGlCQUFrQjNDLEVBQVksNkNBQzlCLElBQUkyTixFQUFnQixFQUNwQixNQUFNQyxFQUE0QixxQkFDbEMsR0FBSWhMLEdBQWlCQSxFQUFjZSxPQUFTLEVBQ3hDLElBQUssTUFBTVcsS0FBVzFCLEVBQWUsQ0FDakMsTUFBTWlMLFFBQWdCLEVBQXdCRixFQUFlQyxFQUEyQnRKLEVBQVFqQixVQUdoRyxHQUZBLGlCQUFrQnJELEVBQVksT0FBTzZOLEtBQ3JDRixJQUNJckosRUFBUVQsWUFBYSxDQUNyQixNQUFNZ0ssUUFBZ0IsRUFBOEJGLEVBQWVDLEVBQTJCdEosRUFBUWpCLFNBQVVpQixFQUFRVCxhQUN4SCxpQkFBa0I3RCxFQUFZLE9BQU82TixLQUNyQ0YsR0FDSixDQUNKLENBRUosR0FBSXBKLEdBQVlBLEVBQVNNLE1BQUtDLElBQTRCLElBQW5CQSxFQUFNRixXQUN6QyxJQUFLLE1BQU1HLEtBQU9SLEVBQ2QsR0FBSVEsRUFBSUgsVUFBWUcsRUFBSXRGLE9BQVEsQ0FDNUIsTUFBTW9PLFFBQWdCLEVBQWdCRixFQUFlQyxFQUEyQjdJLEVBQUl0RixRQUNwRixpQkFBa0JPLEVBQVksT0FBTzZOLEtBQ3JDRixHQUNKLENBR1IsR0FBSTNJLEdBQVlBLEVBQVNyQixPQUFTLEVBQzlCLElBQUssTUFBTTBCLEtBQVdMLEVBQ2xCLEdBQUlLLEVBQVFELFVBQVlDLEVBQVE1RixPQUFRLENBQ3BDLE1BQU1vTyxRQUFnQixFQUFnQkYsRUFBZUMsRUFBMkJ2SSxFQUFRNUYsUUFDeEYsaUJBQWtCTyxFQUFZLE9BQU82TixLQUNyQ0YsR0FDSixDQWFSLEdBVkEsaUJBQWtCM04sRUFBWSxpRUFDOUIsaUJBQWtCQSxFQUFZLG9DQUM5QixpQkFBa0JBLEVBQVksK0RBQzlCLGlCQUFrQkEsRUFBWSx1Q0FDOUIsaUJBQWtCQSxFQUFZLCtDQUErQ3NJLEVBQXVCRSxjQUNwRyxpQkFBa0J4SSxFQUFZLDZCQUE2QnNJLEVBQXVCRyxvQkFDbEYsaUJBQWtCekksRUFBWSxnQ0FBZ0NzSSxFQUF1QkksdUJBQ3JGLGlCQUFrQjFJLEVBQVkseUNBQzlCLGlCQUFrQkEsRUFBWSwyREFBMkR5SixFQUFhRSxVQUN0RyxpQkFBa0IzSixFQUFZLDBCQUMxQnNGLEdBQW1CQSxFQUFnQjNCLE9BQVMsRUFBRyxDQUMvQ3pDLFFBQVF1QixJQUFJNkMsRUFBaUIsQ0FBRTVDLE1BQU8sS0FBTUMsUUFBUSxJQUNwRCxJQUFLLE1BQU1tTCxLQUFVeEksRUFDYndJLEVBQU83SCxhQUNQLGlCQUFrQmpHLEVBQVksMkJBQTJCOE4sRUFBT3JPLFVBQ2hFLGlCQUFrQk8sRUFBWSxnQ0FBZ0M4TixFQUFPNUgsY0FDckUsaUJBQWtCbEcsRUFBWSx5QkFBeUI4TixFQUFPMUgsaUJBQzlELGlCQUFrQnBHLEVBQVksTUFHMUMsTUFFSSxpQkFBa0JBLEVBQVksNkNBRWxDLGlCQUFrQkEsRUFBWSwwREFDMUIrSSxFQUFtQmxFLE1BQUtDLEdBQTJCLDZCQUFsQkEsRUFBTXlFLFdBQ3ZDLGlCQUFrQnZKLEVBQVksc0JBRTlCK0ksRUFBbUJsRSxNQUFLQyxHQUEyQix5QkFBbEJBLEVBQU15RSxXQUN2QyxpQkFBa0J2SixFQUFZLGtCQUdsQyxpQkFBa0JBLEVBQVkscUNBQzlCLE1BQU0rTixFQUFjLGFBQ3BCLElBQUlDLEVBQWdCLEVBQ3BCLElBQUtqRixFQUFtQmxFLE1BQUtDLEdBQTJCLDZCQUFsQkEsRUFBTXlFLFVBQXlDLENBQ2pGLE1BQU1zRSxRQUFnQixFQUFtQ0csRUFBZUQsRUFBYSxrQkFDckYsaUJBQWtCL04sRUFBWSxPQUFPNk4sS0FDckNHLEdBQ0osQ0FDQSxJQUFLakYsRUFBbUJsRSxNQUFLQyxHQUEyQix5QkFBbEJBLEVBQU15RSxVQUFxQyxDQUM3RSxNQUFNc0UsUUFBZ0IsRUFBbUNHLEVBQWVELEVBQWEsY0FDckYsaUJBQWtCL04sRUFBWSxPQUFPNk4sS0FDckNHLEdBQ0osQ0FDQSxJQUFLMUYsRUFBdUJFLFdBQVksQ0FDcEMsTUFBTXFGLFFBQWdCLEVBQTJCRyxFQUFlRCxFQUFhLDBCQUM3RSxpQkFBa0IvTixFQUFZLE9BQU82TixLQUNyQ0csR0FDSixDQUNBLElBQUsxRixFQUF1QkcsaUJBQWtCLENBQzFDLE1BQU1vRixRQUFnQixFQUEyQkcsRUFBZUQsRUFBYSxjQUM3RSxpQkFBa0IvTixFQUFZLE9BQU82TixLQUNyQ0csR0FDSixDQUNBLElBQUsxRixFQUF1Qkksb0JBQXFCLENBQzdDLE1BQU1tRixRQUFnQixFQUEyQkcsRUFBZUQsRUFBYSxpQkFDN0UsaUJBQWtCL04sRUFBWSxPQUFPNk4sS0FDckNHLEdBQ0osQ0FDQSxpQkFBa0JoTyxFQUFZLGlFQUM5QixpQkFBa0JBLEVBQVksMENBQzlCLGlCQUFrQkEsRUFBWSwrREFDOUIsaUJBQWtCQSxFQUFZLGtCQUM5QixpQkFBa0JBLEVBQVksNEJBQTRCK0gsRUFBZUcsb0JBRXpFLGlCQUFrQmxJLEVBQVkscURBQzlCLElBQUlpTyxFQUFnQixFQUNwQixNQUFNQyxFQUFjLDZCQUNwQixJQUFLbkcsRUFBZUcsaUJBQWtCLENBQ2xDLE1BQU0yRixRRnpLWDlPLGVBQTRCRSxFQUFZQyxHQUUzQyxNQURhLEdBQUdBLFlBQW1CRCxtRkFFdkMsQ0VzS2tDLENBQW1CZ1AsRUFBZUMsR0FDeEQsaUJBQWtCbE8sRUFBWSxPQUFPNk4sSUFDekMsQ0FDQSxpQkFBa0I3TixFQUFZLGlFQUM5QixpQkFBa0JBLEVBQVksNENBQzlCLGlCQUFrQkEsRUFBWSwrREFDOUIsaUJBQWtCQSxFQUFZLGtDQUM5QixpQkFBa0JBLEVBQVksNEJBQTRCbUgsRUFBV0ksTUFDckUsaUJBQWtCdkgsRUFBWSw2QkFBNkJtSCxFQUFXTSxPQUN0RSxpQkFBa0J6SCxFQUFZLG9DQUFvQ21ILEVBQVdXLFlBQzdFLGlCQUFrQjlILEVBQVkseUNBQzlCLGlCQUFrQkEsRUFBWSwyREFBMkR5SixFQUFhRSxVQUN0RyxJQUFJd0UsRUFBbUJDLEVBQWdCQyxFQUFnQkMsR0FBZ0IsRUFDdkUsR0FBSW5ILEVBQVdXLFNBQVUsQ0FDckIsTUFBTXlHLFFpQjFPbEJ4UCxlQUFpQ1UsRUFBUXFJLEdBQ3JDLE1BQU1WLEVBQVksSUFBSSxFQUFBN0Ysb0JBQW9CLENBQUU5QixXQUM1QyxJQUFJK08sRUFBYyxHQUNsQixJQUNJLE1BQU1DLEVBQWlCLElBQUksRUFBQUMsd0NBQXdDLENBQy9EQyxTQUFVN0csSUFFUjhHLFFBQXdCeEgsRUFBVXhHLEtBQUs2TixHQUM3QyxHQUFJRyxFQUFnQkMsb0JBQ2hCLElBQUssTUFBTUMsS0FBTUYsRUFBZ0JDLG9CQUFxQixDQUNsRCxJQUFJRSxFQUFhLENBQ2J4SCxHQUFJdUgsRUFBR3RILEdBQ1B3SCxLQUFNRixFQUFHN0IsTUFFYixNQUFNSixRQUF3QnpGLEVBQVV4RyxLQUFLLElBQUksRUFBQXFPLDZCQUE2QixDQUFFTixTQUFVRyxFQUFHdEgsTUFDekZxRixFQUFnQlMsVUFBWVQsRUFBZ0JTLFNBQVMzSixPQUFTLElBQzlEb0wsRUFBV0csU0FBV3JDLEVBQWdCUyxVQUUxQ2tCLEVBQVl6TixLQUFLZ08sRUFDckIsQ0FFUixDQUNBLE1BQU85TixHQUVILE9BREFDLFFBQVFELE1BQU0saUNBQWtDQSxHQUN6QyxFQUNYLENBQ0EsUUFDSW1HLEVBQVVqRyxTQUNkLENBQ0EsT0FBT3FOLENBQ1gsQ2pCNE1pQyxDQUFrQixZQUFhckgsRUFBV1csVUFJL0QsR0FIQTVHLFFBQVF1QixJQUFJOEwsRUFBUSxDQUFFN0wsTUFBTyxLQUFNQyxRQUFRLElBQzNDLGlCQUFrQjNDLEVBQVksdURBQzlCLGlCQUFrQkEsRUFBWSw4REFDMUJ1TyxHQUFVQSxFQUFPNUssT0FBUyxFQUMxQixJQUFLLE1BQU1tTCxLQUFNUCxFQWViLEdBZCtCLGNBQTNCTyxFQUFHRSxNQUFNRyxnQkFDVGYsR0FBaUIsR0FFVSxpQkFBM0JVLEVBQUdFLE1BQU1HLGdCQUNUaEIsR0FBb0IsR0FFTyxjQUEzQlcsRUFBR0UsTUFBTUcsZ0JBQ1RkLEdBQWlCLEdBRVUsYUFBM0JTLEVBQUdFLE1BQU1HLGdCQUNUYixHQUFnQixHQUVwQixpQkFBa0J0TyxFQUFZLDhCQUE4QjhPLEVBQUdFLFFBQy9ELGlCQUFrQmhQLEVBQVksbUNBQW1DOE8sRUFBR3ZILE1BQ2hFdUgsRUFBR0ksVUFBWUosRUFBR0ksU0FBU3ZMLE9BQVMsRUFBRyxDQUN2QyxpQkFBa0IzRCxFQUFZLHlCQUM5QixJQUFLLE1BQU11TixLQUFXdUIsRUFBR0ksU0FDckIsaUJBQWtCbFAsRUFBWSxhQUFhdU4sRUFBUU4sUUFFdkQsaUJBQWtCak4sRUFBWSxLQUNsQyxNQUVJLGlCQUFrQkEsRUFBWSw4QkFDOUIsaUJBQWtCQSxFQUFZLFdBS3RDLGlCQUFrQkEsRUFBWSw4QkFFdEMsQ0FFQSxHQURBLGlCQUFrQkEsRUFBWSwwQ0FDMUJrTixHQUEyQkEsRUFBd0J2SixPQUFTLEVBQzVELElBQUssTUFBTXlMLEtBQWlCbEMsRUFDeEIsaUJBQWtCbE4sRUFBWSxnQkFBZ0JvUCxFQUFjcEMsZUFDNUQsaUJBQWtCaE4sRUFBWSxzQkFBc0JvUCxFQUFjM0IsdUJBSXRFLGlCQUFrQnpOLEVBQVksMEVBRWxDLGlCQUFrQkEsRUFBWSwyQ0FDOUIsaUJBQWtCQSxFQUFZLDRFQUM5QixJQUFLLE1BQU1xSixLQUFjTixFQUNyQixpQkFBa0IvSSxFQUFZLFNBQVNxSixFQUFXRSxXQUV0RCxJQUFJOEYsR0FBb0IsRUFDcEJDLEdBQXVCLEVBQ3ZCQyxHQUFxQixFQUNyQkMsR0FBa0IsRUFDbEJDLEdBQTZCLEVBQzdCQyxHQUF5QixFQUN6QkMsR0FBZ0IsRUFDaEJDLEdBQW1CLEVBQ25CQyxHQUFrQixFQUV0QixHQURBLGlCQUFrQjdQLEVBQVkseUVBQzFCcU0sR0FBc0JBLEVBQW1CMUksT0FBUyxFQUNsRCxJQUFLLE1BQU00SixLQUFXbEIsRUFBb0IsQ0FFdEMsR0FEQSxpQkFBa0JyTSxFQUFZLGdCQUFnQnVOLEVBQVFQLGVBQ2xETyxFQUFRUixVQUFZUSxFQUFRUixTQUFTcEosT0FBUyxFQUFHLENBQ2pELGlCQUFrQjNELEVBQVksMkJBQzlCLElBQUssTUFBTThQLEtBQU92QyxFQUFRUixTQUN0QixpQkFBa0IvTSxFQUFZLFNBQVM4UCxFQUFJdEcsb0JBQ2QsOEJBQXpCc0csRUFBSXRHLG1CQUNKOEYsR0FBdUIsR0FFRSw0QkFBekJRLEVBQUl0RyxtQkFDSitGLEdBQXFCLEdBRUksc0JBQXpCTyxFQUFJdEcsbUJBQ0o2RixHQUFvQixHQUVLLHlCQUF6QlMsRUFBSXRHLG1CQUNKZ0csR0FBa0IsR0FFTyxrQ0FBekJNLEVBQUl0RyxtQkFDSmlHLEdBQTZCLEdBRUosa0NBQXpCSyxFQUFJdEcsbUJBQ0prRyxHQUF5QixHQUVBLHVCQUF6QkksRUFBSXRHLG1CQUNKbUcsR0FBZ0IsR0FFUywwQkFBekJHLEVBQUl0RyxtQkFDSm9HLEdBQW1CLEdBRU0seUJBQXpCRSxFQUFJdEcsbUJBQ0pxRyxHQUFrQixFQUc5QixDQUNBLGlCQUFrQjdQLEVBQVksTUFDbEMsTUFHQSxpQkFBa0JBLEVBQVksdURBR2xDLGlCQUFrQkEsRUFBWSxpREFDOUIsSUFBSStQLEVBQWdCLEVBQ2hCQyxFQUFjLHlCQUNsQixNQUFNbkMsUUYvUlA5TyxlQUEyQ0UsRUFBWUMsR0FFMUQsTUFEYSxHQUFHQSxZQUFtQkQsd0lBRXZDLENFNFI4QixDQUFrQzhRLEVBQWVDLEdBR3ZFLEdBRkEsaUJBQWtCaFEsRUFBWSxPQUFPNk4sS0FDckNrQyxLQUNLekgsRUFBdUJFLFdBQVksQ0FDcEMsTUFBTXFGLFFBQWdCLEVBQTJCa0MsRUFBZUMsRUFBYSwwQkFDN0UsaUJBQWtCaFEsRUFBWSxPQUFPNk4sS0FDckNrQyxHQUNKLENBQ0EsSUFBSzVCLEVBQW1CLENBQ3BCLE1BQU1OLFFBQWdCLEVBQW1Ca0MsRUFBZUMsRUFBYSxnQkFDckUsaUJBQWtCaFEsRUFBWSxPQUFPNk4sS0FDckNrQyxHQUNKLENBQ0EsSUFBSzNCLEVBQWdCLENBQ2pCLE1BQU1QLFFBQWdCLEVBQW1Ca0MsRUFBZUMsRUFBYSxhQUNyRSxpQkFBa0JoUSxFQUFZLE9BQU82TixLQUNyQ2tDLEdBQ0osQ0FDQSxJQUFLMUIsRUFBZ0IsQ0FDakIsTUFBTVIsUUFBZ0IsRUFBbUJrQyxFQUFlQyxFQUFhLGFBQ3JFLGlCQUFrQmhRLEVBQVksT0FBTzZOLEtBQ3JDa0MsR0FDSixDQUNBLElBQUt6QixFQUFlLENBQ2hCLE1BQU1ULFFBQWdCLEVBQW1Ca0MsRUFBZUMsRUFBYSxZQUNyRSxpQkFBa0JoUSxFQUFZLE9BQU82TixLQUNyQ2tDLEdBQ0osQ0FDQSxpQkFBa0IvUCxFQUFZLGlFQUM5QixpQkFBa0JBLEVBQVksb0NBQzlCLGlCQUFrQkEsRUFBWSwrREFDOUIsaUJBQWtCQSxFQUFZLDJCQUMxQmlLLEVBQW9CWSxvQkFDcEIzSixRQUFRdUIsSUFBSXdILEVBQXFCLENBQUV2SCxNQUFPLEtBQU1DLFFBQVEsSUFDeEQsaUJBQWtCM0MsRUFBWSxrQ0FBa0NpSyxFQUFvQlksc0JBQ3BGLGlCQUFrQjdLLEVBQVksNkJBQTZCaUssRUFBb0JOLFVBQy9FLGlCQUFrQjNKLEVBQVksMkNBQTJDaUssRUFBb0JrQixtQkFDN0YsaUJBQWtCbkwsRUFBWSxpQ0FBaUNpSyxFQUFvQmlCLDBCQUNuRixpQkFBa0JsTCxFQUFZLHFCQUFxQmlLLEVBQW9Cb0IsZ0JBR3ZFLGlCQUFrQnJMLEVBQVksaUVBR2xDLGlCQUFrQkEsRUFBWSx1Q0FDOUIsSUFBSWlRLEVBQWUsRUFDbkIsTUFBTUMsRUFBYSxlQUNuQixRQUErQ0MsSUFBM0NsRyxFQUFvQlksbUJBQWtDLENBQ3RELE1BQU1nRCxRRjNYWDlPLGVBQXNDRSxFQUFZQyxHQUVyRCxNQURhLEdBQUdBLFlBQW1CRCx1REFFdkMsQ0V3WGtDLENBQTZCZ1IsRUFBY0MsR0FDakUsaUJBQWtCbFEsRUFBWSxPQUFPNk4sS0FDckNvQyxHQUNKLENBQ0EsR0FBd0MsWUFBcENoRyxFQUFvQm9CLFlBQTJCLENBQy9DLE1BQU13QyxRRnhYWDlPLGVBQTBCRSxFQUFZQyxHQUV6QyxNQURhLEdBQUdBLFlBQW1CRCx5Q0FFdkMsQ0VxWGtDLENBQWlCZ1IsRUFBY0MsR0FDckQsaUJBQWtCbFEsRUFBWSxPQUFPNk4sS0FDckNvQyxHQUNKLENBQ0EsR0FBSWhHLEVBQW9Ca0Isa0JBQW9CbEIsRUFBb0JpQix1QkFBd0IsQ0FDcEYsTUFBTWtGLEVBQWlCbkcsRUFBb0JrQixpQkFBbUIsR0FDeERrRixFQUFnQnBHLEVBQW9CaUIsd0JBQTBCLEdBQzlEMkMsUUZuWVg5TyxlQUF3Q0UsRUFBWUMsRUFBVWtSLEVBQWdCQyxHQUVqRixNQURhLEdBQUduUixZQUFtQkQsdURBQWdFbVIsUUFBcUJDLElBRTVILENFZ1lrQyxDQUErQkosRUFBY0MsRUFBWUUsRUFBZ0JDLEdBQy9GLGlCQUFrQnJRLEVBQVksT0FBTzZOLEtBQ3JDb0MsR0FDSixDQUNBLElBQUtsSCxFQUFtQmxFLE1BQUtDLEdBQTJCLHNEQUFsQkEsRUFBTXlFLFVBQWtFLENBQzFHLE1BQU1zRSxRQUFnQixFQUFtQ29DLEVBQWNDLEVBQVksc0JBQ25GLGlCQUFrQmxRLEVBQVksT0FBTzZOLEtBQ3JDb0MsR0FDSixDQUNBLGlCQUFrQmpRLEVBQVksaUVBQzlCLGlCQUFrQkEsRUFBWSxrQ0FDOUIsaUJBQWtCQSxFQUFZLCtEQUM5QixpQkFBa0JBLEVBQVksaUNBQzlCLGlCQUFrQkEsRUFBWSxtQkFBbUJzTCxFQUFlN0wsVUFDaEUsaUJBQWtCTyxFQUFZLGdCQUFnQnNMLEVBQWU3RCxPQUM3RCxpQkFBa0J6SCxFQUFZLHdCQUF3QnNMLEVBQWUvRCxNQUVyRSxpQkFBa0J2SCxFQUFZLG1DQUM5QixJQUFJc1EsR0FBZ0IsRUFDcEIsTUFBTUMsR0FBYyxXQUNwQixJQUFLeEgsRUFBbUJsRSxNQUFLQyxHQUEyQixzQkFBbEJBLEVBQU15RSxVQUFrQyxDQUMxRSxNQUFNc0UsUUFBZ0IsRUFBbUN5QyxHQUFlQyxHQUFhLDJCQUNyRixpQkFBa0J2USxFQUFZLE9BQU82TixLQUNyQ3lDLElBQ0osQ0FDQSxJQUFLakIsRUFBbUIsQ0FDcEIsTUFBTXhCLFFBQWdCLEVBQXVDeUMsR0FBZUMsR0FBYSwyQkFDekYsaUJBQWtCdlEsRUFBWSxPQUFPNk4sS0FDckN5QyxJQUNKLENBQ0EsSUFBS2hJLEVBQXVCRSxXQUFZLENBQ3BDLE1BQU1xRixRQUFnQixFQUEyQnlDLEdBQWVDLEdBQWEsMEJBQzdFLGlCQUFrQnZRLEVBQVksT0FBTzZOLEtBQ3JDeUMsSUFDSixDQUNBLGlCQUFrQnRRLEVBQVksaUVBQzlCLGlCQUFrQkEsRUFBWSxrQ0FDOUIsaUJBQWtCQSxFQUFZLCtEQUM5QixpQkFBa0JBLEVBQVksNERBQzFCK0ksRUFBbUJsRSxNQUFLQyxHQUEyQiw0QkFBbEJBLEVBQU15RSxXQUN2QyxpQkFBa0J2SixFQUFZLHFCQUU5QitJLEVBQW1CbEUsTUFBS0MsR0FBMkIsOEJBQWxCQSxFQUFNeUUsV0FDdkMsaUJBQWtCdkosRUFBWSx3QkFFOUIrSSxFQUFtQmxFLE1BQUtDLEdBQTJCLGtDQUFsQkEsRUFBTXlFLFdBQ3ZDLGlCQUFrQnZKLEVBQVksMkJBRTlCK0ksRUFBbUJsRSxNQUFLQyxHQUEyQix3QkFBbEJBLEVBQU15RSxXQUN2QyxpQkFBa0J2SixFQUFZLGFBRTlCK0ksRUFBbUJsRSxNQUFLQyxHQUEyQixrQ0FBbEJBLEVBQU15RSxXQUN2QyxpQkFBa0J2SixFQUFZLDhCQUU5QitJLEVBQW1CbEUsTUFBS0MsR0FBMkIsNkJBQWxCQSxFQUFNeUUsV0FDdkMsaUJBQWtCdkosRUFBWSx3QkFFOUIrSSxFQUFtQmxFLE1BQUtDLEdBQTJCLDZCQUFsQkEsRUFBTXlFLFdBQ3ZDLGlCQUFrQnZKLEVBQVksc0JBRTlCK0ksRUFBbUJsRSxNQUFLQyxHQUEyQix5QkFBbEJBLEVBQU15RSxXQUN2QyxpQkFBa0J2SixFQUFZLGtCQUdsQyxpQkFBa0JBLEVBQVksbUNBQzlCLElBQUl3USxHQUFnQixFQUNwQixNQUFNQyxHQUFjLFdBQ3BCLElBQUtuSSxFQUF1QkUsV0FBWSxDQUNwQyxNQUFNcUYsUUFBZ0IsRUFBMkIyQyxHQUFlQyxHQUFhLDBCQUM3RSxpQkFBa0J6USxFQUFZLE9BQU82TixLQUNyQzJDLElBQ0osQ0FDQSxJQUFLekgsRUFBbUJsRSxNQUFLQyxHQUEyQiw0QkFBbEJBLEVBQU15RSxVQUF3QyxDQUNoRixNQUFNc0UsUUFBZ0IsRUFBbUMyQyxHQUFlQyxHQUFhLGlCQUNyRixpQkFBa0J6USxFQUFZLE9BQU82TixLQUNyQzJDLElBQ0osQ0FDQSxJQUFLekgsRUFBbUJsRSxNQUFLQyxHQUEyQiw4QkFBbEJBLEVBQU15RSxVQUEwQyxDQUNsRixNQUFNc0UsUUFBZ0IsRUFBbUMyQyxHQUFlQyxHQUFhLG1CQUNyRixpQkFBa0J6USxFQUFZLE9BQU82TixLQUNyQzJDLElBQ0osQ0FDQSxJQUFLekgsRUFBbUJsRSxNQUFLQyxHQUEyQixrQ0FBbEJBLEVBQU15RSxVQUE4QyxDQUN0RixNQUFNc0UsUUFBZ0IsRUFBbUMyQyxHQUFlQyxHQUFhLDJCQUNyRixpQkFBa0J6USxFQUFZLE9BQU82TixLQUNyQzJDLElBQ0osQ0FDQSxJQUFLekgsRUFBbUJsRSxNQUFLQyxHQUEyQiw2QkFBbEJBLEVBQU15RSxVQUF5QyxDQUNqRixNQUFNc0UsUUFBZ0IsRUFBbUMyQyxHQUFlQyxHQUFhLGtCQUNyRixpQkFBa0J6USxFQUFZLE9BQU82TixLQUNyQzJDLElBQ0osQ0FDQSxJQUFLekgsRUFBbUJsRSxNQUFLQyxHQUEyQix5QkFBbEJBLEVBQU15RSxVQUFxQyxDQUM3RSxNQUFNc0UsUUFBZ0IsRUFBbUMyQyxHQUFlQyxHQUFhLGNBQ3JGLGlCQUFrQnpRLEVBQVksT0FBTzZOLEtBQ3JDMkMsSUFDSixDQUNBLElBQUtsQixFQUFzQixDQUN2QixNQUFNekIsUUFBZ0IsRUFBdUMyQyxHQUFlQyxHQUFhLGdCQUN6RixpQkFBa0J6USxFQUFZLE9BQU82TixLQUNyQzJDLElBQ0osQ0FDQSxJQUFLakIsRUFBb0IsQ0FDckIsTUFBTTFCLFFBQWdCLEVBQXVDMkMsR0FBZUMsR0FBYSxhQUN6RixpQkFBa0J6USxFQUFZLE9BQU82TixLQUNyQzJDLElBQ0osQ0FDQSxJQUFLaEIsRUFBaUIsQ0FDbEIsTUFBTTNCLFFBQWdCLEVBQXVDMkMsR0FBZUMsR0FBYSxjQUN6RixpQkFBa0J6USxFQUFZLE9BQU82TixLQUNyQzJDLElBQ0osQ0FDQSxJQUFLZixFQUE0QixDQUM3QixNQUFNNUIsUUFBZ0IsRUFBdUMyQyxHQUFlQyxHQUFhLDJCQUN6RixpQkFBa0J6USxFQUFZLE9BQU82TixLQUNyQzJDLElBQ0osQ0FDQSxJQUFLZCxFQUF3QixDQUN6QixNQUFNN0IsUUFBZ0IsRUFBdUMyQyxHQUFlQyxHQUFhLG1CQUN6RixpQkFBa0J6USxFQUFZLE9BQU82TixLQUNyQzJDLElBQ0osQ0FDQSxpQkFBa0J4USxFQUFZLGlFQUM5QixpQkFBa0JBLEVBQVksaUNBQzlCLGlCQUFrQkEsRUFBWSwrREFFOUIsaUJBQWtCQSxFQUFZLGtDQUM5QixJQUFJMFEsR0FBZ0IsRUFDcEIsTUFBTUMsR0FBa0IsVUFDeEIsSUFBSzVILEVBQW1CbEUsTUFBS0MsR0FBMkIsNEJBQWxCQSxFQUFNeUUsVUFBd0MsQ0FDaEYsTUFBTXFILFFBQWtDLEVBQW1DRixHQUFlQyxHQUFpQixpQkFDM0csaUJBQWtCM1EsRUFBWSxPQUFPNFEsS0FDckNGLElBQ0osQ0FDQSxJQUFLM0gsRUFBbUJsRSxNQUFLQyxHQUEyQix1QkFBbEJBLEVBQU15RSxVQUFtQyxDQUMzRSxNQUFNc0UsUUFBZ0IsRUFBbUM2QyxHQUFlQyxHQUFpQixZQUN6RixpQkFBa0IzUSxFQUFZLE9BQU82TixLQUNyQzZDLElBQ0osQ0FDQSxJQUFLM0gsRUFBbUJsRSxNQUFLQyxHQUEyQixzQkFBbEJBLEVBQU15RSxVQUFrQyxDQUMxRSxNQUFNc0UsUUFBZ0IsRUFBbUM2QyxHQUFlQyxHQUFpQiwrQkFDekYsaUJBQWtCM1EsRUFBWSxPQUFPNk4sS0FDckM2QyxJQUNKLENBQ0EsSUFBS2YsRUFBZSxDQUNoQixNQUFNOUIsUUFBZ0IsRUFBdUM2QyxHQUFlQyxHQUFpQixZQUM3RixpQkFBa0IzUSxFQUFZLE9BQU82TixLQUNyQzZDLElBQ0osQ0FDQSxJQUFLcEksRUFBdUJFLFdBQVksQ0FDcEMsTUFBTXFGLFFBQWdCLEVBQTJCNkMsR0FBZUMsR0FBaUIsMEJBQ2pGLGlCQUFrQjNRLEVBQVksT0FBTzZOLEtBQ3JDNkMsSUFDSixDQUNBLGlCQUFrQjFRLEVBQVksaUVBQzlCLGlCQUFrQkEsRUFBWSxxQ0FDOUIsaUJBQWtCQSxFQUFZLCtEQUU5QixpQkFBa0JBLEVBQVksd0NBQzlCLElBQUk2USxHQUFlLEVBQ25CLE1BQU1DLEdBQWEsZ0JBQ25CLElBQUsvSCxFQUFtQmxFLE1BQUtDLEdBQTJCLDBCQUFsQkEsRUFBTXlFLFVBQXNDLENBQzlFLE1BQU1zRSxRQUFnQixFQUFtQ2dELEdBQWNDLEdBQVksbUJBQ25GLGlCQUFrQjlRLEVBQVksT0FBTzZOLEtBQ3JDZ0QsSUFDSixDQUNBLElBQUtqQixFQUFrQixDQUNuQixNQUFNL0IsUUFBZ0IsRUFBdUNnRCxHQUFjQyxHQUFZLG1CQUN2RixpQkFBa0I5USxFQUFZLE9BQU82TixLQUNyQ2dELElBQ0osQ0FDQSxpQkFBa0I3USxFQUFZLGlFQUM5QixpQkFBa0JBLEVBQVksd0NBQzlCLGlCQUFrQkEsRUFBWSwrREFFOUIsaUJBQWtCQSxFQUFZLDhDQUM5QixJQUFJK1EsR0FBaUIsRUFDckIsTUFBTUMsR0FBaUIsc0JBRXZCLElBQUtqSSxFQUFtQmxFLE1BQUtDLEdBQTJCLHlCQUFsQkEsRUFBTXlFLFVBQXFDLENBQzdFLE1BQU1zRSxRQUFnQixFQUFtQ2tELEdBQWdCQyxHQUFnQixjQUN6RixpQkFBa0JoUixFQUFZLE9BQU82TixLQUNyQ2tELElBQ0osQ0FDQSxJQUFLbEIsRUFBaUIsQ0FDbEIsTUFBTWhDLFFBQWdCLEVBQXVDa0QsR0FBZ0JDLEdBQWdCLGNBQzdGLGlCQUFrQmhSLEVBQVksT0FBTzZOLEtBQ3JDa0QsSUFDSixDQUNBLElBQUt6SSxFQUF1Qkksb0JBQXFCLENBQzdDLE1BQU1tRixRQUFnQixFQUEyQmtELEdBQWdCQyxHQUFnQixpQkFDakYsaUJBQWtCaFIsRUFBWSxPQUFPNk4sS0FDckNrRCxJQUNKLENBQ0EsSUFBS3pJLEVBQXVCRSxXQUFZLENBQ3BDLE1BQU1xRixRQUFnQixFQUEyQmtELEdBQWdCQyxHQUFnQiwwQkFDakYsaUJBQWtCaFIsRUFBWSxPQUFPNk4sS0FDckNrRCxJQUNKLENBQ0osTUFDSyxHQUFJMVAsRUFBWUcsbUJBQXFCSCxFQUFZSSxvQkFBcUIsQ0FDdkUsTUFBTW9NLEVBQVUsNkpBQ2hCM00sUUFBUStQLEtBQUtwRCxHQUNiLGlCQUFrQjdOLEVBQVk2TixFQUNsQyxLQUNLLENBQ0QsTUFBTUEsRUFBVSxvSkFDaEIzTSxRQUFRK1AsS0FBS3BELEdBQ2IsaUJBQWtCN04sRUFBWTZOLEVBQ2xDLENBQ0EsaUJBQWtCN04sRUFBWSxxQkFBcUIsRUFFdkRrUixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2V4dGVybmFsIGNvbW1vbmpzIFwiQGF3cy1zZGsvY2xpZW50LXN0c1wiIiwid2VicGFjazovLy9leHRlcm5hbCBjb21tb25qcyBcIkBhd3Mtc2RrL2NsaWVudC1vcmdhbml6YXRpb25zXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIGNvbW1vbmpzIFwiQGF3cy1zZGsvY2xpZW50LWlhbVwiIiwid2VicGFjazovLy9leHRlcm5hbCBjb21tb25qcyBcIkBhd3Mtc2RrL2NsaWVudC1jbG91ZGZvcm1hdGlvblwiIiwid2VicGFjazovLy9leHRlcm5hbCBjb21tb25qcyBcIkBhd3Mtc2RrL2NsaWVudC1zc28tYWRtaW5cIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgY29tbW9uanMgXCJAYXdzLXNkay9jbGllbnQtZWMyXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIGNvbW1vbmpzIFwiQGF3cy1zZGsvY2xpZW50LWNsb3VkdHJhaWxcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgY29tbW9uanMgXCJAYXdzLXNkay9jbGllbnQtY29uZmlnLXNlcnZpY2VcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgY29tbW9uanMgXCJAYXdzLXNkay9jbGllbnQtY29udHJvbHRvd2VyXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIGNvbW1vbmpzIFwiQGF3cy1zZGsvY2xpZW50LWNvc3QtYW5kLXVzYWdlLXJlcG9ydC1zZXJ2aWNlXCIiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvdGFza3MuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJmc1wiIiwid2VicGFjazovLy8uL2J1aWxkL2FwcC5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9nZXQtcmVnaW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9kZWZpbmUtYWNjb3VudC10eXBlLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2NoZWNrLWlhbS11c2Vycy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9jaGVjay1lYzItZXhpc3RlbmNlLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2NoZWNrLXZwYy1leGlzdGVuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvY2hlY2stY2xvdWR0cmFpbC1leGlzdGVuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvY2hlY2stY29uZmlnLWV4aXN0ZW5jZS5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9nZXQtb3JnLWRldGFpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvY2hlY2stbGVnYWN5LWN1ci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9nZXQtZW5hYmxlZC1vcmctcG9saWN5LXR5cGVzLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2dldC1lbmFibGVkLW9yZy1zZXJ2aWNlcy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9jaGVjay1vcmctY2xvdWRmb3JtYXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvY2hlY2stY29udHJvbC10b3dlci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9nZXQtaWRjLWluZm8uanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvZ2V0LW9yZy1kYS1hY2NvdW50cy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9nZXQtb3JnLW1lbWJlci1hY2NvdW50cy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9nZXQtb3JnLW91cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIkBhd3Mtc2RrL2NsaWVudC1zdHNcIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJAYXdzLXNkay9jbGllbnQtb3JnYW5pemF0aW9uc1wiKTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIkBhd3Mtc2RrL2NsaWVudC1pYW1cIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJAYXdzLXNkay9jbGllbnQtY2xvdWRmb3JtYXRpb25cIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJAYXdzLXNkay9jbGllbnQtc3NvLWFkbWluXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiQGF3cy1zZGsvY2xpZW50LWVjMlwiKTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIkBhd3Mtc2RrL2NsaWVudC1jbG91ZHRyYWlsXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiQGF3cy1zZGsvY2xpZW50LWNvbmZpZy1zZXJ2aWNlXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiQGF3cy1zZGsvY2xpZW50LWNvbnRyb2x0b3dlclwiKTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIkBhd3Mtc2RrL2NsaWVudC1jb3N0LWFuZC11c2FnZS1yZXBvcnQtc2VydmljZVwiKTsiLCJleHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVwbG95Q29uZmlnUmVjb3JkZXJUYXNrKHRhc2tOdW1iZXIsIHdheXBvaW50LCByZWdpb24pIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gRGVwbG95IEFXUyBDb25maWcgUmVjb3JkZXIgdG8gdGhlICR7cmVnaW9ufSByZWdpb24uYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZXBsb3lDb25maWdEZWxpdmVyeUNoYW5uZWxUYXNrKHRhc2tOdW1iZXIsIHdheXBvaW50LCByZWdpb24pIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gQWRkIEFXUyBDb25maWcgRGVsaXZlcnkgQ2hhbm5lbCB0byB0aGUgJHtyZWdpb259IHJlZ2lvbi5gO1xuICAgIHJldHVybiB0YXNrO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlcGxveUNsb3VkVHJhaWxPcmdUcmFpbFRhc2sodGFza051bWJlciwgd2F5cG9pbnQpIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gQ3JlYXRlIGEgbXVsdGktcmVnaW9uIENsb3VkVHJhaWwgT3JnYW5pemF0aW9uIFRyYWlsIGluIHlvdXIgaG9tZSBBV1MgUmVnaW9uLmA7XG4gICAgcmV0dXJuIHRhc2s7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVwbG95Q29udHJvbFRvd2VyVGFzayh0YXNrTnVtYmVyLCB3YXlwb2ludCkge1xuICAgIGNvbnN0IHRhc2sgPSBgJHt3YXlwb2ludH0gLSBUYXNrICR7dGFza051bWJlcn0gLSBEZXBsb3kgQVdTIENvbnRyb2wgVG93ZXIgaW4geW91ciBob21lIEFXUyBSZWdpb24uYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVMekNvbnRyb2xUb3dlclRhc2sodGFza051bWJlciwgd2F5cG9pbnQsIGN1cnJlbnRWZXJzaW9uLCBsYXRlc3RWZXJzaW9uKSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIFVwZGF0ZSB5b3VyIEFXUyBDb250cm9sIFRvd2VyIExhbmRpbmcgWm9uZSBmcm9tICR7Y3VycmVudFZlcnNpb259IHRvICR7bGF0ZXN0VmVyc2lvbn0uYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaXhMekRyaWZ0KHRhc2tOdW1iZXIsIHdheXBvaW50KSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIEZpeCBkcmlmdCBpbiBkZXBsb3llZCBsYW5kaW5nIHpvbmUuYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZXBsb3lPdVRhc2sodGFza051bWJlciwgd2F5cG9pbnQsIE91TmFtZSkge1xuICAgIGNvbnN0IHRhc2sgPSBgJHt3YXlwb2ludH0gLSBUYXNrICR7dGFza051bWJlcn0gLSBEZXBsb3kgdG9wLWxldmVsIE9VICR7T3VOYW1lfS5gO1xuICAgIHJldHVybiB0YXNrO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZUlhbVVzZXJUYXNrKHRhc2tOdW1iZXIsIHdheXBvaW50LCBJYW1Vc2VyTmFtZSkge1xuICAgIGNvbnN0IHRhc2sgPSBgJHt3YXlwb2ludH0gLSBUYXNrICR7dGFza051bWJlcn0gLSBSZW1vdmUgSUFNIHVzZXIgJHtJYW1Vc2VyTmFtZX1gO1xuICAgIHJldHVybiB0YXNrO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZUlhbVVzZXJBcGlLZXlUYXNrKHRhc2tOdW1iZXIsIHdheXBvaW50LCBJYW1Vc2VyTmFtZSwgSWFtVXNlckFwaUtleUlkKSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIFJlbW92ZSBJQU0gdXNlciAke0lhbVVzZXJOYW1lfSBBUEkga2V5OiAke0lhbVVzZXJBcGlLZXlJZH1gO1xuICAgIHJldHVybiB0YXNrO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVZwYyh0YXNrTnVtYmVyLCB3YXlwb2ludCwgcmVnaW9uKSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIERlbGV0ZSBWUEMgaW4gdGhlICR7cmVnaW9ufSByZWdpb24uYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVFYzIodGFza051bWJlciwgd2F5cG9pbnQsIHJlZ2lvbikge1xuICAgIGNvbnN0IHRhc2sgPSBgJHt3YXlwb2ludH0gLSBUYXNrICR7dGFza051bWJlcn0gLSBEZWxldGUgVlBDIGluIHRoZSAke3JlZ2lvbn0gcmVnaW9uLmA7XG4gICAgcmV0dXJuIHRhc2s7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5hYmxlQXdzT3JnYW5pemF0aW9uU2VydmljZSh0YXNrTnVtYmVyLCB3YXlwb2ludCwgc2VydmljZU5hbWUpIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gRW5hYmxlIHRoZSBBV1Mgc2VydmljZSAke3NlcnZpY2VOYW1lfSB3aXRoaW4geW91ciBBV1MgT3JnYW5pemF0aW9uYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxlZ2F0ZUFkbWluaXN0cmF0aW9uQXdzU2VydmljZSh0YXNrTnVtYmVyLCB3YXlwb2ludCwgc2VydmljZU5hbWUpIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gRGVsZWdhdGUgdGhlIEFXUyBzZXJ2aWNlICR7c2VydmljZU5hbWV9IHdpdGhpbiB5b3VyIEFXUyBPcmdhbml6YXRpb24gdG8gYSBtZW1iZXIgYWNjb3VudGA7XG4gICAgcmV0dXJuIHRhc2s7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5hYmxlQXdzQ3VyKHRhc2tOdW1iZXIsIHdheXBvaW50KSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIEVuYWJsZSBhbmQgY3JlYXRlIGEgQ29zdCBhbmQgVXRpbGl6YXRpb24gUmVwb3J0IChDVVIpIGluIHRoZSBiaWxsaW5nIGNvbnNvbGUuYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXZpZXdBY2NvdW50RW1haWxBZGRyZXNzZXModGFza051bWJlciwgd2F5cG9pbnQpIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gUmV2aWV3IGFuZCB2YWxpZGF0ZSB5b3VyIGVtYWlsIGFkZHJlc3NlcyBhbmQgdGhlaXIgZG9tYWlucyBmb3IgdGhlIHJvb3QgdXNlciBhZG1pbmlzdHJhdG9yIGZvciBtYW5hZ2VtZW50IGFuZCBhbGwgbWVtYmVyIGFjY291bnRzLmA7XG4gICAgcmV0dXJuIHRhc2s7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5hYmxlUG9saWN5VHlwZVRhc2sodGFza051bWJlciwgd2F5cG9pbnQsIHBvbGljeVR5cGUpIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gRW5hYmxlIHRoZSBwb2xpY3kgdHlwZSAke3BvbGljeVR5cGV9IHdpdGhpbiB5b3VyIEFXUyBPcmdhbml6YXRpb24uYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbiIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiZnNcIik7IiwiaW1wb3J0IHsgZGVmaW5lQWNjb3VudFR5cGUgfSBmcm9tICcuL3NyYy9hY3Rpb25zL2RlZmluZS1hY2NvdW50LXR5cGUuanMnO1xuaW1wb3J0IGNoZWNrSWFtVXNlcnMgZnJvbSAnLi9zcmMvYWN0aW9ucy9jaGVjay1pYW0tdXNlcnMuanMnO1xuaW1wb3J0IGdldEVuYWJsZWRPcmdQb2xpY3lUeXBlcyBmcm9tICcuL3NyYy9hY3Rpb25zL2dldC1lbmFibGVkLW9yZy1wb2xpY3ktdHlwZXMuanMnO1xuaW1wb3J0IGdldEVuYWJsZWRPcmdTZXJ2aWNlcyBmcm9tICcuL3NyYy9hY3Rpb25zL2dldC1lbmFibGVkLW9yZy1zZXJ2aWNlcy5qcyc7XG5pbXBvcnQgZ2V0T3JnQ2xvdWRGb3JtYXRpb24gZnJvbSAnLi9zcmMvYWN0aW9ucy9jaGVjay1vcmctY2xvdWRmb3JtYXRpb24uanMnO1xuaW1wb3J0IGdldElkY0luZm8gZnJvbSAnLi9zcmMvYWN0aW9ucy9nZXQtaWRjLWluZm8uanMnO1xuaW1wb3J0IGdldE9yZ0RldGFpbHMgZnJvbSAnLi9zcmMvYWN0aW9ucy9nZXQtb3JnLWRldGFpbHMuanMnO1xuaW1wb3J0IGdldE9yZ1RvcExldmVsT3VzIGZyb20gJy4vc3JjL2FjdGlvbnMvZ2V0LW9yZy1vdXMuanMnO1xuaW1wb3J0IGdldEFsbFJlZ2lvbnMgZnJvbSAnLi9zcmMvYWN0aW9ucy9nZXQtcmVnaW9ucy5qcyc7XG5pbXBvcnQgY2hlY2tFYzJFeGlzdHMgZnJvbSAnLi9zcmMvYWN0aW9ucy9jaGVjay1lYzItZXhpc3RlbmNlLmpzJztcbmltcG9ydCBjaGVja1ZwY0V4aXN0cyBmcm9tICcuL3NyYy9hY3Rpb25zL2NoZWNrLXZwYy1leGlzdGVuY2UuanMnO1xuaW1wb3J0IGNoZWNrQ2xvdWRUcmFpbEV4aXN0cyBmcm9tICcuL3NyYy9hY3Rpb25zL2NoZWNrLWNsb3VkdHJhaWwtZXhpc3RlbmNlLmpzJztcbmltcG9ydCBnZXRPcmdEYUFjY291bnRzIGZyb20gJy4vc3JjL2FjdGlvbnMvZ2V0LW9yZy1kYS1hY2NvdW50cy5qcyc7XG5pbXBvcnQgY2hlY2tDb25maWdFeGlzdHMgZnJvbSAnLi9zcmMvYWN0aW9ucy9jaGVjay1jb25maWctZXhpc3RlbmNlLmpzJztcbmltcG9ydCBnZXRPcmdNZW1iZXJBY2NvdW50cyBmcm9tICcuL3NyYy9hY3Rpb25zL2dldC1vcmctbWVtYmVyLWFjY291bnRzLmpzJztcbmltcG9ydCBnZXRDb250cm9sVG93ZXIgZnJvbSAnLi9zcmMvYWN0aW9ucy9jaGVjay1jb250cm9sLXRvd2VyLmpzJztcbmltcG9ydCBjaGVja0xlZ2FjeUN1ciBmcm9tICcuL3NyYy9hY3Rpb25zL2NoZWNrLWxlZ2FjeS1jdXIuanMnO1xuaW1wb3J0ICogYXMgdGFza3MgZnJvbSAnLi9zcmMvYWN0aW9ucy90YXNrcy5qcyc7XG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG5jb25zdCBtYWluID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHJlcG9ydEZpbGUgPSBcIi4vUGF0aGZpbmRlci50eHRcIjtcbiAgICBsZXQgZGF0ZVRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IHJlZ2lvbiA9IHByb2Nlc3MuZW52LkFXU19SRUdJT04gfHwgJ3VzLWVhc3QtMSc7XG4gICAgY29uc3QgYWxsUmVnaW9ucyA9IGF3YWl0IGdldEFsbFJlZ2lvbnMoKTtcbiAgICBjb25zb2xlLmxvZyhcIkRpc2NvdmVyaW5nIHlvdXIgQVdTIGVudmlyb25tZW50Li4uLlwiKTtcbiAgICBjb25zdCBhY2NvdW50VHlwZSA9IGF3YWl0IGRlZmluZUFjY291bnRUeXBlKHJlZ2lvbik7XG4gICAgZnMud3JpdGVGaWxlU3luYyhyZXBvcnRGaWxlLCBcIkNsb3VkIEZvdW5kYXRpb25zIC0gUGF0aGZpbmRlclwiKTtcbiAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuR2VuZXJhdGVkIG9uOiAke2RhdGVUaW1lLnRvVVRDU3RyaW5nKCl9IFxcblxcbmApO1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgKTtcbiAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgICAgICAgICAgICAgICAgIE1BTkFHRU1FTlQgQUNDT1VOVGApO1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgKTtcbiAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuQVdTIEFDQ09VTlQgVFlQRVxcbmApO1xuICAgIGlmIChhY2NvdW50VHlwZSkge1xuICAgICAgICBjb25zb2xlLmRpcihhY2NvdW50VHlwZSwgeyBkZXB0aDogbnVsbCwgY29sb3JzOiB0cnVlIH0pO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBJcyBpbiBBV1MgT3JnYW5pemF0aW9uOiAke2FjY291bnRUeXBlLmlzSW5Pcmdhbml6YXRpb259YCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEFzc2Vzc2luZyBBV1MgTWFuYWdlbWVudCBBY2NvdW50OiAke2FjY291bnRUeXBlLmlzTWFuYWdlbWVudEFjY291bnR9YCk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFwiRGlzY292ZXJpbmcgSUFNIFVzZXJzLi4uLlwiKTtcbiAgICBjb25zdCBpYW1Vc2VyUmVzdWx0ID0gYXdhaXQgY2hlY2tJYW1Vc2VycygpO1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5JQU0gVVNFUlMgQ0hFQ0tcXG5gKTtcbiAgICBpZiAoaWFtVXNlclJlc3VsdCAmJiBpYW1Vc2VyUmVzdWx0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5kaXIoaWFtVXNlclJlc3VsdCwgeyBkZXB0aDogbnVsbCwgY29sb3JzOiB0cnVlIH0pO1xuICAgICAgICBmb3IgKGNvbnN0IGlhbVVzZXIgb2YgaWFtVXNlclJlc3VsdCkge1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgSUFNIFVzZXI6ICR7aWFtVXNlci51c2VyTmFtZX1gKTtcbiAgICAgICAgICAgIGlmIChpYW1Vc2VyLmFjY2Vzc0tleUlkKSB7XG4gICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICBVc2VyIEFQSSBLZXkgSUQ6ICR7aWFtVXNlci5hY2Nlc3NLZXlJZH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgTm8gSUFNIFVzZXJzIGZvdW5kLmApO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhcIkRpc2NvdmVyaW5nIEVDMiBpbnN0YW5jZXMgYWNyb3NzIGFsbCBBV1MgUmVnaW9ucy4uLi5cIik7XG4gICAgY29uc3QgZWMyQ2hlY2sgPSBhd2FpdCBjaGVja0VjMkV4aXN0cyhhbGxSZWdpb25zKTtcbiAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuRUMyIElOU1RBTkNFIENIRUNLXFxuYCk7XG4gICAgaWYgKGVjMkNoZWNrICYmIGVjMkNoZWNrLmZpbmQocGFyYW0gPT4gcGFyYW0uZWMyRm91bmQgPT09IHRydWUpKSB7XG4gICAgICAgIGNvbnNvbGUuZGlyKGVjMkNoZWNrLCB7IGRlcHRoOiBudWxsLCBjb2xvcnM6IHRydWUgfSk7XG4gICAgICAgIGZvciAoY29uc3QgZWMyIG9mIGVjMkNoZWNrKSB7XG4gICAgICAgICAgICBpZiAoZWMyLmVjMkZvdW5kKSB7XG4gICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHtlYzIucmVnaW9ufSAtIGZvdW5kIEVDMiBJbnN0YW5jZShzKS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgTm8gRUMyIGluc3RhbmNlcyBmb3VuZC5gKTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJEaXNjb3ZlcmluZyBWUENzIGFjcm9zcyBhbGwgQVdTIFJlZ2lvbnMuLi4uXCIpO1xuICAgIGNvbnN0IHZwY0NoZWNrID0gYXdhaXQgY2hlY2tWcGNFeGlzdHMoYWxsUmVnaW9ucyk7XG4gICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcblZQQyBDSEVDS1xcbmApO1xuICAgIGlmICh2cGNDaGVjayAmJiB2cGNDaGVjay5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnNvbGUuZGlyKHZwY0NoZWNrLCB7IGRlcHRoOiBudWxsLCBjb2xvcnM6IHRydWUgfSk7XG4gICAgICAgIGZvciAoY29uc3QgdnBjRmluZCBvZiB2cGNDaGVjaykge1xuICAgICAgICAgICAgaWYgKHZwY0ZpbmQudnBjRm91bmQpIHtcbiAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke3ZwY0ZpbmQucmVnaW9ufSAtIGZvdW5kIFZQQyhzKS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgTm8gVlBDcyBmb3VuZC5gKTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJEaXNjb3ZlcmluZyBBV1MgQ29uZmlnIGNvbmZpZ3VyYXRpb25zIGFjcm9zcyBhbGwgQVdTIFJlZ2lvbnMuLi4uXCIpO1xuICAgIGNvbnN0IGNsb3VkVHJhaWxDaGVjayA9IGF3YWl0IGNoZWNrQ2xvdWRUcmFpbEV4aXN0cyhhbGxSZWdpb25zKTtcbiAgICBjb25zdCBjb25maWdDaGVjayA9IGF3YWl0IGNoZWNrQ29uZmlnRXhpc3RzKGFsbFJlZ2lvbnMpO1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5BV1MgQ09ORklHIENIRUNLXFxuYCk7XG4gICAgaWYgKGNvbmZpZ0NoZWNrICYmIGNvbmZpZ0NoZWNrLmZpbmQocGFyYW0gPT4gcGFyYW0uY29uZmlnUmVjb3JkZXJGb3VuZCA9PT0gdHJ1ZSkpIHtcbiAgICAgICAgY29uc29sZS5kaXIoY29uZmlnQ2hlY2ssIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgZm9yIChjb25zdCBjb25maWdGaW5kIG9mIGNvbmZpZ0NoZWNrKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlnRmluZC5jb25maWdSZWNvcmRlckZvdW5kKSB7XG4gICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHtjb25maWdGaW5kLnJlZ2lvbn0gLSBDb25maWcgUmVjb3JkZXIgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb25maWdGaW5kLmNvbmZpZ0RlbGl2ZXJ5Q2hhbm5lbEZvdW5kKSB7XG4gICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHtjb25maWdGaW5kLnJlZ2lvbn0gLSBDb25maWcgRGVsaXZlcnkgQ2hhbm5lbCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBObyBBV1MgQ29uZmlnIHJlc291cmNlIGRpc2NvdmVyZWRgKTtcbiAgICB9XG4gICAgLy8gYWxsIGNhbGxzIHJlcXVpcmUgYW4gQVdTIE9yZ2FuaXphdGlvbiBleGlzdCBhbmQgdGhlIGFjY291bnQgYmUgYSBtYW5hZ2VtZW50IGFjY291bnRcbiAgICBpZiAoYWNjb3VudFR5cGUuaXNJbk9yZ2FuaXphdGlvbiAmJiBhY2NvdW50VHlwZS5pc01hbmFnZW1lbnRBY2NvdW50KSB7XG4gICAgICAgIGNvbnN0IG9yZ0RldGFpbHMgPSBhd2FpdCBnZXRPcmdEZXRhaWxzKCd1cy1lYXN0LTEnKTtcbiAgICAgICAgY29uc29sZS5kaXIob3JnRGV0YWlscywgeyBkZXB0aDogbnVsbCwgY29sb3JzOiB0cnVlIH0pO1xuICAgICAgICBjb25zdCBsZWdhY3lDdXJDaGVjayA9IGF3YWl0IGNoZWNrTGVnYWN5Q3VyKCd1cy1lYXN0LTEnKTtcbiAgICAgICAgY29uc3QgZW5hYmxlT3JnUG9saWNpZXNDaGVjayA9IGF3YWl0IGdldEVuYWJsZWRPcmdQb2xpY3lUeXBlcygndXMtZWFzdC0xJyk7XG4gICAgICAgIGNvbnNvbGUuZGlyKGVuYWJsZU9yZ1BvbGljaWVzQ2hlY2ssIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgY29uc3Qgb3JnRW5hYmxlZFNlcnZpY2VzID0gYXdhaXQgZ2V0RW5hYmxlZE9yZ1NlcnZpY2VzKCd1cy1lYXN0LTEnKTtcbiAgICAgICAgY29uc29sZS5kaXIob3JnRW5hYmxlZFNlcnZpY2VzLCB7IGRlcHRoOiBudWxsLCBjb2xvcnM6IHRydWUgfSk7XG4gICAgICAgIGNvbnN0IGNmbk9yZ1N0YXR1cyA9IGF3YWl0IGdldE9yZ0Nsb3VkRm9ybWF0aW9uKHJlZ2lvbik7XG4gICAgICAgIGNvbnNvbGUuZGlyKGNmbk9yZ1N0YXR1cywgeyBkZXB0aDogbnVsbCwgY29sb3JzOiB0cnVlIH0pO1xuICAgICAgICBjb25zdCBjb250cm9sVG93ZXJEZXRhaWxzID0gYXdhaXQgZ2V0Q29udHJvbFRvd2VyKHJlZ2lvbik7XG4gICAgICAgIGNvbnN0IGlkY0luZm9ybWF0aW9uID0gYXdhaXQgZ2V0SWRjSW5mbyhhbGxSZWdpb25zKTtcbiAgICAgICAgY29uc29sZS5kaXIoaWRjSW5mb3JtYXRpb24sIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgY29uc3Qgb3JnRGVsQWRtaW5EZXRhaWxzID0gYXdhaXQgZ2V0T3JnRGFBY2NvdW50cygpO1xuICAgICAgICBjb25zb2xlLmRpcihvcmdEZWxBZG1pbkRldGFpbHMsIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgY29uc3Qgb3JnTWVtYmVyQWNjb3VudERldGFpbHMgPSBhd2FpdCBnZXRPcmdNZW1iZXJBY2NvdW50cygpO1xuICAgICAgICBjb25zb2xlLmRpcihvcmdNZW1iZXJBY2NvdW50RGV0YWlscywgeyBkZXB0aDogbnVsbCwgY29sb3JzOiB0cnVlIH0pO1xuICAgICAgICAvLy8vLyBTRVQgVEhFIEJBQ0tMT0cgVEFTSyBGT1IgTUFOQUdFTUVOVCBBQ0NPVU5UIC8vLy9cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbk1BTkFHRU1FTlQgQUNDT1VOVCBSRUNPTU1FTkRFRCBUQVNLUzpgKTtcbiAgICAgICAgbGV0IG1ndFRhc2tOdW1iZXIgPSAxO1xuICAgICAgICBjb25zdCBtYW5hZ2VtZW50QWNjb3VudFdheXBvaW50ID0gXCJNYW5hZ2VtZW50IEFjY291bnRcIjtcbiAgICAgICAgaWYgKGlhbVVzZXJSZXN1bHQgJiYgaWFtVXNlclJlc3VsdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGlhbVVzZXIgb2YgaWFtVXNlclJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5yZW1vdmVJYW1Vc2VyVGFzayhtZ3RUYXNrTnVtYmVyLCBtYW5hZ2VtZW50QWNjb3VudFdheXBvaW50LCBpYW1Vc2VyLnVzZXJOYW1lKTtcbiAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgICAgbWd0VGFza051bWJlcisrO1xuICAgICAgICAgICAgICAgIGlmIChpYW1Vc2VyLmFjY2Vzc0tleUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5yZW1vdmVJYW1Vc2VyQXBpS2V5VGFzayhtZ3RUYXNrTnVtYmVyLCBtYW5hZ2VtZW50QWNjb3VudFdheXBvaW50LCBpYW1Vc2VyLnVzZXJOYW1lLCBpYW1Vc2VyLmFjY2Vzc0tleUlkKTtcbiAgICAgICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgICAgICAgICBtZ3RUYXNrTnVtYmVyKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlYzJDaGVjayAmJiBlYzJDaGVjay5maW5kKHBhcmFtID0+IHBhcmFtLmVjMkZvdW5kID09PSB0cnVlKSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlYzIgb2YgZWMyQ2hlY2spIHtcbiAgICAgICAgICAgICAgICBpZiAoZWMyLmVjMkZvdW5kICYmIGVjMi5yZWdpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlbGV0ZUVjMihtZ3RUYXNrTnVtYmVyLCBtYW5hZ2VtZW50QWNjb3VudFdheXBvaW50LCBlYzIucmVnaW9uKTtcbiAgICAgICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgICAgICAgICBtZ3RUYXNrTnVtYmVyKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh2cGNDaGVjayAmJiB2cGNDaGVjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHZwY0ZpbmQgb2YgdnBjQ2hlY2spIHtcbiAgICAgICAgICAgICAgICBpZiAodnBjRmluZC52cGNGb3VuZCAmJiB2cGNGaW5kLnJlZ2lvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVsZXRlVnBjKG1ndFRhc2tOdW1iZXIsIG1hbmFnZW1lbnRBY2NvdW50V2F5cG9pbnQsIHZwY0ZpbmQucmVnaW9uKTtcbiAgICAgICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgICAgICAgICBtZ3RUYXNrTnVtYmVyKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICAgICAgICAgICAgICAgICAgR09WRVJOQU5DRWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5BV1MgT1JHQU5JWkFUSU9OIFBPTElDWSBUWVBFU1xcbmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBTZXJ2aWNlIENvbnRyb2wgUG9saWNpZXMgKFNDUCkgZW5hYmxlZDogJHtlbmFibGVPcmdQb2xpY2llc0NoZWNrLnNjcEVuYWJsZWR9YCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIFRhZyBQb2xpY2llcyBlbmFibGVkOiAke2VuYWJsZU9yZ1BvbGljaWVzQ2hlY2sudGFnUG9saWN5RW5hYmxlZH1gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQmFja3VwIFBvbGljaWVzIGVuYWJsZWQ6ICR7ZW5hYmxlT3JnUG9saWNpZXNDaGVjay5iYWNrdXBQb2xpY3lFbmFibGVkfWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuQVdTIE9SR0FOSVpBVElPTiBDTE9VREZPUk1BVElPTlxcbmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBV1MgQ2xvdWRGb3JtYXRpb24gT3JnYW5pemF0aW9uIHN0YWNrIHNldHMgc3RhdHVzIDogJHtjZm5PcmdTdGF0dXMuc3RhdHVzfWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuQ0xPVURUUkFJTCBDSEVDS1xcbmApO1xuICAgICAgICBpZiAoY2xvdWRUcmFpbENoZWNrICYmIGNsb3VkVHJhaWxDaGVjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLmRpcihjbG91ZFRyYWlsQ2hlY2ssIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY3RGaW5kIG9mIGNsb3VkVHJhaWxDaGVjaykge1xuICAgICAgICAgICAgICAgIGlmIChjdEZpbmQudHJhaWxGb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBDbG91ZFRyYWlsIGZvdW5kIGluICR7Y3RGaW5kLnJlZ2lvbn1gKTtcbiAgICAgICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICBJcyBPcmdhbml6YXRpb24gVHJhaWw6ICR7Y3RGaW5kLmlzT3JnVHJhaWx9YCk7XG4gICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgSXMgTXVsdGlSZWdpb246ICR7Y3RGaW5kLmlzTXVsdGlSZWdpb259YCk7XG4gICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBObyBBV1MgQ2xvdWRUcmFpbCByZXNvdXJjZSBkaXNjb3ZlcmVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkdPVkVSTkFOQ0UgU0VSVklDRVMgRU5BQkxFRCBJTiBBV1MgT1JHQU5JWkFUSU9OOlxcbmApO1xuICAgICAgICBpZiAob3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2Nsb3VkdHJhaWwuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBV1MgQ2xvdWRUcmFpbGApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnY29uZmlnLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQVdTIENvbmZpZ2ApO1xuICAgICAgICB9XG4gICAgICAgIC8vLy8vIFNFVCBUSEUgQkFDS0xPRyBUQVNLIEZPUiBHT1ZFUk5BTkNFIC8vLy8vXG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5HT1ZFUk5BTkNFIFJFQ09NTUVOREVEIFRBU0tTOmApO1xuICAgICAgICBjb25zdCBnb3ZXYXlwb2ludCA9IFwiR292ZXJuYW5jZVwiO1xuICAgICAgICBsZXQgZ292VGFza051bWJlciA9IDE7XG4gICAgICAgIGlmICghb3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2Nsb3VkdHJhaWwuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlQXdzT3JnYW5pemF0aW9uU2VydmljZShnb3ZUYXNrTnVtYmVyLCBnb3ZXYXlwb2ludCwgXCJBV1MgQ2xvdWRUcmFpbFwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIGdvdlRhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdjb25maWcuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlQXdzT3JnYW5pemF0aW9uU2VydmljZShnb3ZUYXNrTnVtYmVyLCBnb3ZXYXlwb2ludCwgXCJBV1MgQ29uZmlnXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgZ292VGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZW5hYmxlT3JnUG9saWNpZXNDaGVjay5zY3BFbmFibGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlUG9saWN5VHlwZVRhc2soZ292VGFza051bWJlciwgZ292V2F5cG9pbnQsIFwiU2VydmljZSBDb250cm9sIFBvbGljeVwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIGdvdlRhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWVuYWJsZU9yZ1BvbGljaWVzQ2hlY2sudGFnUG9saWN5RW5hYmxlZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZVBvbGljeVR5cGVUYXNrKGdvdlRhc2tOdW1iZXIsIGdvdldheXBvaW50LCBcIlRhZyBQb2xpY3lcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBnb3ZUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlbmFibGVPcmdQb2xpY2llc0NoZWNrLmJhY2t1cFBvbGljeUVuYWJsZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVQb2xpY3lUeXBlVGFzayhnb3ZUYXNrTnVtYmVyLCBnb3ZXYXlwb2ludCwgXCJCYWNrdXAgUG9saWN5XCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgZ292VGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICAgICAgICAgICAgICBGSU5BTkNJQUwgTUFOQUdFTUVOVGApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5MZWdhY3kgQ1VSYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIElzIGxlZ2FjeSBDVVIgc2V0dXA6ICR7bGVnYWN5Q3VyQ2hlY2suaXNMZWdhY3lDdXJTZXR1cH1gKTtcbiAgICAgICAgLy8vLy8gU0VUIFRIRSBCQUNLTE9HIFRBU0sgRk9SIEZJTkFOQ0lBTCBNQU5BR0VNRU5UIC8vLy8vXG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5DTE9VRCBGSU5BTkNJQUwgTUFOQUdFTUVOVCBSRUNPTU1FTkRFRCBUQVNLUzpgKTtcbiAgICAgICAgbGV0IGZpblRhc2tOdW1iZXIgPSAxO1xuICAgICAgICBjb25zdCBmaW5XYXlwb2ludCA9IFwiQ2xvdWQgRmluYW5jaWFsIE1hbmFnZW1lbnRcIjtcbiAgICAgICAgaWYgKCFsZWdhY3lDdXJDaGVjay5pc0xlZ2FjeUN1clNldHVwKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlQXdzQ3VyKGZpblRhc2tOdW1iZXIsIGZpbldheXBvaW50KTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgICAgICAgICAgICAgTVVMVEktQUNDT1VOVCBTVFJBVEVHWWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5BV1MgT1JHQU5JWkFUSU9OIERFVEFJTFNcXG5gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQVdTIE9yZ2FuaXphdGlvbiBJZDogJHtvcmdEZXRhaWxzLmlkfWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBV1MgT3JnYW5pemF0aW9uIEFSTjogJHtvcmdEZXRhaWxzLmFybn1gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQVdTIE9yZ2FuaXphdGlvbiBSb290IE9VIElkOiAke29yZ0RldGFpbHMucm9vdE91SWR9YCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5BV1MgT1JHQU5JWkFUSU9OIENMT1VERk9STUFUSU9OXFxuYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEFXUyBDbG91ZEZvcm1hdGlvbiBPcmdhbml6YXRpb24gc3RhY2sgc2V0cyBzdGF0dXMgOiAke2Nmbk9yZ1N0YXR1cy5zdGF0dXN9YCk7XG4gICAgICAgIGxldCB0cmFuc2l0aW9uYWxGb3VuZCwgc3VzcGVuZGVkRm91bmQsIHdvcmtsb2Fkc0ZvdW5kLCBzZWN1cml0eUZvdW5kID0gZmFsc2U7XG4gICAgICAgIGlmIChvcmdEZXRhaWxzLnJvb3RPdUlkKSB7XG4gICAgICAgICAgICBjb25zdCBvcmdPdXMgPSBhd2FpdCBnZXRPcmdUb3BMZXZlbE91cygndXMtZWFzdC0xJywgb3JnRGV0YWlscy5yb290T3VJZCk7XG4gICAgICAgICAgICBjb25zb2xlLmRpcihvcmdPdXMsIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5BV1MgT1JHQU5JWkFUSU9OIFRPUC1MRVZFTCBPUkdBTklaQVRJT04gVU5JVFNcXG5gKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIExpc3Qgb2YgT3JnYW5pemF0aW9uJ3MgdG9wLWxldmVsIE9VcyBhbmQgQVdTIGFjY291bnRzOmApO1xuICAgICAgICAgICAgaWYgKG9yZ091cyAmJiBvcmdPdXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgb3Ugb2Ygb3JnT3VzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdS5uYW1lPy50b0xvd2VyQ2FzZSgpID09PSAnc3VzcGVuZGVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VzcGVuZGVkRm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdS5uYW1lPy50b0xvd2VyQ2FzZSgpID09PSAndHJhbnNpdGlvbmFsJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbmFsRm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdS5uYW1lPy50b0xvd2VyQ2FzZSgpID09PSAnd29ya2xvYWRzJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgd29ya2xvYWRzRm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdS5uYW1lPy50b0xvd2VyQ2FzZSgpID09PSAnc2VjdXJpdHknKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN1cml0eUZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgIE9yZ2FuaXphdGlvbmFsIFVuaXQ6ICR7b3UubmFtZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICAgIE9yZ2FuaXphdGlvbmFsIFVuaXQgSWQ6ICR7b3UuaWR9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdS5hY2NvdW50cyAmJiBvdS5hY2NvdW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgICAgQVdTIEFjY291bnRzOmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhY2NvdW50IG9mIG91LmFjY291bnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICAgICAgJHthY2NvdW50Lk5hbWV9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgICAgQVdTIEFjY291bnRzOiBOb25lYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBObyB0b3AgbGV2ZWwgT1VzIGZvdW5kLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5BV1MgT1JHQU5JWkFUSU9OIE1FTUJFUiBBQ0NPVU5UU1xcbmApO1xuICAgICAgICBpZiAob3JnTWVtYmVyQWNjb3VudERldGFpbHMgJiYgb3JnTWVtYmVyQWNjb3VudERldGFpbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBtZW1iZXJBY2NvdW50IG9mIG9yZ01lbWJlckFjY291bnREZXRhaWxzKSB7XG4gICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQWNjb3VudDogJHttZW1iZXJBY2NvdW50LmFjY291bnROYW1lfWApO1xuICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEFjY291bnQgRW1haWw6ICR7bWVtYmVyQWNjb3VudC5hY2NvdW50RW1haWx9XFxuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgTm8gbWVtYmVyIGFjY291bnRzIGZvdW5kIHdoaWNoIGlzIGFtYXppbmcgYXMgdGhpcyBpcyBydW5uaW5nIGZyb20gb25lLmApO1xuICAgICAgICB9XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5BV1MgT1JHQU5JWkFUSU9OIEVOQUJMRUQgU0VSVklDRVNcXG5gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgVGhlIGZvbGxvd2luZyBBV1MgU2VydmljZXMgYXJlIGVuYWJsZWQgd2l0aGluIHlvdXIgQVdTIE9yZ2FuaXphdGlvbjpgKTtcbiAgICAgICAgZm9yIChjb25zdCBvcmdTZXJ2aWNlIG9mIG9yZ0VuYWJsZWRTZXJ2aWNlcykge1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICAke29yZ1NlcnZpY2Uuc2VydmljZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgaWRlbnRpdHlEZWxlZ2F0ZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IHNlY3VyaXR5SHViRGVsZWdhdGVkID0gZmFsc2U7XG4gICAgICAgIGxldCBndWFyZER1dHlEZWxlZ2F0ZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IGNvbmZpZ0RlbGVnYXRlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgaWFtQWNjZXNzQW5hbHl6ZXJEZWxlZ2F0ZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IHMzU3RvcmFnZUxlbnNEZWxlZ2F0ZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IGlwYW1EZWxlZ2F0ZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IGFjY291bnREZWxlZ2F0ZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IGJhY2t1cERlbGVnYXRlZCA9IGZhbHNlO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuQVdTIE9SR0FOSVpBVElPTiBJTlRFR1JBVEVEIFNFUlZJQ0UgUkVHSVNURVJFRCBERUxFR0FURUQgQURNSU5TXFxuYCk7XG4gICAgICAgIGlmIChvcmdEZWxBZG1pbkRldGFpbHMgJiYgb3JnRGVsQWRtaW5EZXRhaWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYWNjb3VudCBvZiBvcmdEZWxBZG1pbkRldGFpbHMpIHtcbiAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBY2NvdW50OiAke2FjY291bnQuYWNjb3VudE5hbWV9YCk7XG4gICAgICAgICAgICAgICAgaWYgKGFjY291bnQuc2VydmljZXMgJiYgYWNjb3VudC5zZXJ2aWNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIERlbGVnYXRlZCBTZXJ2aWNlczpgKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzcnYgb2YgYWNjb3VudC5zZXJ2aWNlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICAke3Nydi5TZXJ2aWNlUHJpbmNpcGFsfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNydi5TZXJ2aWNlUHJpbmNpcGFsID09PSAnc2VjdXJpdHlodWIuYW1hem9uYXdzLmNvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN1cml0eUh1YkRlbGVnYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3J2LlNlcnZpY2VQcmluY2lwYWwgPT09ICdndWFyZGR1dHkuYW1hem9uYXdzLmNvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBndWFyZER1dHlEZWxlZ2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNydi5TZXJ2aWNlUHJpbmNpcGFsID09PSAnc3NvLmFtYXpvbmF3cy5jb20nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRlbnRpdHlEZWxlZ2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNydi5TZXJ2aWNlUHJpbmNpcGFsID09PSAnY29uZmlnLmFtYXpvbmF3cy5jb20nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnRGVsZWdhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcnYuU2VydmljZVByaW5jaXBhbCA9PT0gJ2FjY2Vzcy1hbmFseXplci5hbWF6b25hd3MuY29tJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlhbUFjY2Vzc0FuYWx5emVyRGVsZWdhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcnYuU2VydmljZVByaW5jaXBhbCA9PT0gJ3N0b3JhZ2UtbGVucy5zMy5hbWF6b25hd3MuY29tJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzU3RvcmFnZUxlbnNEZWxlZ2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNydi5TZXJ2aWNlUHJpbmNpcGFsID09PSAnaXBhbS5hbWF6b25hd3MuY29tJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlwYW1EZWxlZ2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNydi5TZXJ2aWNlUHJpbmNpcGFsID09PSAnYWNjb3VudC5hbWF6b25hd3MuY29tJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnREZWxlZ2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNydi5TZXJ2aWNlUHJpbmNpcGFsID09PSAnYmFja3VwLmFtYXpvbmF3cy5jb20nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja3VwRGVsZWdhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuIGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgTm8gZGVsZWdhdGVkIGFkbWluIGFjY291bnRzIGluIEFXUyBPcmdhbml6YXRpb25gKTtcbiAgICAgICAgfVxuICAgICAgICAvLy8vLyBTRVQgVEhFIEJBQ0tMT0cgVEFTSyBGT1IgTVVMVEktQUNDT1VOVCBTVFJBVEVHWSAvLy8vL1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuTVVMVEktQUNDT1VOVCBTVFJBVEVHWSBSRUNPTU1FTkRFRCBUQVNLUzpgKTtcbiAgICAgICAgbGV0IG1hc1Rhc2tOdW1iZXIgPSAxO1xuICAgICAgICBsZXQgbWFzV2F5cG9pbnQgPSAnTXVsdGktQWNjb3VudCBTdHJhdGVneSc7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5yZXZpZXdBY2NvdW50RW1haWxBZGRyZXNzZXMobWFzVGFza051bWJlciwgbWFzV2F5cG9pbnQpO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgIG1hc1Rhc2tOdW1iZXIrKztcbiAgICAgICAgaWYgKCFlbmFibGVPcmdQb2xpY2llc0NoZWNrLnNjcEVuYWJsZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVQb2xpY3lUeXBlVGFzayhtYXNUYXNrTnVtYmVyLCBtYXNXYXlwb2ludCwgXCJTZXJ2aWNlIENvbnRyb2wgUG9saWN5XCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgbWFzVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdHJhbnNpdGlvbmFsRm91bmQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5kZXBsb3lPdVRhc2sobWFzVGFza051bWJlciwgbWFzV2F5cG9pbnQsIFwiVHJhbnNpdGlvbmFsXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgbWFzVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc3VzcGVuZGVkRm91bmQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5kZXBsb3lPdVRhc2sobWFzVGFza051bWJlciwgbWFzV2F5cG9pbnQsIFwiU3VzcGVuZGVkXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgbWFzVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghd29ya2xvYWRzRm91bmQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5kZXBsb3lPdVRhc2sobWFzVGFza051bWJlciwgbWFzV2F5cG9pbnQsIFwiV29ya2xvYWRzXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgbWFzVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2VjdXJpdHlGb3VuZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlcGxveU91VGFzayhtYXNUYXNrTnVtYmVyLCBtYXNXYXlwb2ludCwgXCJTZWN1cml0eVwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIG1hc1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgICAgICAgICAgICAgICBMQU5ESU5HIFpPTkVgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuQVdTIENPTlRST0wgVE9XRVJcXG5gKTtcbiAgICAgICAgaWYgKGNvbnRyb2xUb3dlckRldGFpbHMuY29udHJvbFRvd2VyUmVnaW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmRpcihjb250cm9sVG93ZXJEZXRhaWxzLCB7IGRlcHRoOiBudWxsLCBjb2xvcnM6IHRydWUgfSk7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBDb250cm9sIFRvd2VyIGhvbWUgcmVnaW9uOiAke2NvbnRyb2xUb3dlckRldGFpbHMuY29udHJvbFRvd2VyUmVnaW9ufWApO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQ29udHJvbCBUb3dlciBzdGF0dXM6ICR7Y29udHJvbFRvd2VyRGV0YWlscy5zdGF0dXN9YCk7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBDb250cm9sIFRvd2VyIExhbmRpbmcgWm9uZSB2ZXJzaW9uOiAke2NvbnRyb2xUb3dlckRldGFpbHMuZGVwbG95ZWRWZXJzaW9ufWApO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgTGF0ZXN0IGF2YWlsYWJsZSB2ZXJzaW9uOiAke2NvbnRyb2xUb3dlckRldGFpbHMubGF0ZXN0QXZhaWxhYmxlVmVyc2lvbn1gKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIERyaWZ0IFN0YXR1czogJHtjb250cm9sVG93ZXJEZXRhaWxzLmRyaWZ0U3RhdHVzfWApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQVdTIENvbnRyb2wgVG93ZXIgaXMgbm90IGRlcGxveWVkIGluIHRoZSBBV1MgT3JnYW5pemF0aW9uYCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8vLy8gU0VUIFRIRSBCQUNLTE9HIFRBU0sgRk9SIExBTkRJTkcgWk9ORSAvLy8vL1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuTEFORElORyBaT05FIFJFQ09NTUVOREVEIFRBU0tTOmApO1xuICAgICAgICBsZXQgbHpUYXNrTnVtYmVyID0gMTtcbiAgICAgICAgY29uc3QgbHpXYXlwb2ludCA9IFwiTGFuZGluZyBab25lXCI7XG4gICAgICAgIGlmIChjb250cm9sVG93ZXJEZXRhaWxzLmNvbnRyb2xUb3dlclJlZ2lvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVwbG95Q29udHJvbFRvd2VyVGFzayhselRhc2tOdW1iZXIsIGx6V2F5cG9pbnQpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgbHpUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyb2xUb3dlckRldGFpbHMuZHJpZnRTdGF0dXMgPT09ICdEUklGVEVEJykge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmZpeEx6RHJpZnQobHpUYXNrTnVtYmVyLCBseldheXBvaW50KTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIGx6VGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cm9sVG93ZXJEZXRhaWxzLmRlcGxveWVkVmVyc2lvbiAhPT0gY29udHJvbFRvd2VyRGV0YWlscy5sYXRlc3RBdmFpbGFibGVWZXJzaW9uKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VmVyc2lvbiA9IGNvbnRyb2xUb3dlckRldGFpbHMuZGVwbG95ZWRWZXJzaW9uID8/IFwiXCI7XG4gICAgICAgICAgICBjb25zdCBsYXRlc3RWZXJzaW9uID0gY29udHJvbFRvd2VyRGV0YWlscy5sYXRlc3RBdmFpbGFibGVWZXJzaW9uID8/IFwiXCI7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MudXBkYXRlTHpDb250cm9sVG93ZXJUYXNrKGx6VGFza051bWJlciwgbHpXYXlwb2ludCwgY3VycmVudFZlcnNpb24sIGxhdGVzdFZlcnNpb24pO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgbHpUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnbWVtYmVyLm9yZy5zdGFja3NldHMuY2xvdWRmb3JtYXRpb24uYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlQXdzT3JnYW5pemF0aW9uU2VydmljZShselRhc2tOdW1iZXIsIGx6V2F5cG9pbnQsIFwiQVdTIENsb3VkRm9ybWF0aW9uXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgbHpUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgICAgICAgICAgICAgICAgICBJREVOVElUWWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5BV1MgSUFNIElERU5USVRZIENFTlRFUlxcbmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBJZEMgUmVnaW9uOiAke2lkY0luZm9ybWF0aW9uLnJlZ2lvbn1gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgSWRDIEFSTjogJHtpZGNJbmZvcm1hdGlvbi5hcm59YCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIElkQyBJbnN0YW5jZSBJZDogJHtpZGNJbmZvcm1hdGlvbi5pZH1gKTtcbiAgICAgICAgLy8vLy8gU0VUIFRIRSBCQUNLTE9HIFRBU0sgRk9SIElERU5USVRZIC8vLy8vXG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5JREVOVElUWSBSRUNPTU1FTkRFRCBUQVNLUzpgKTtcbiAgICAgICAgbGV0IHNzb1Rhc2tOdW1iZXIgPSAxO1xuICAgICAgICBjb25zdCBzc29XYXlwb2ludCA9ICdJZGVudGl0eSc7XG4gICAgICAgIGlmICghb3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ3Nzby5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVBd3NPcmdhbml6YXRpb25TZXJ2aWNlKHNzb1Rhc2tOdW1iZXIsIHNzb1dheXBvaW50LCBcIkFXUyBJQU0gSWRlbnRpdHkgQ2VudGVyXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgc3NvVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaWRlbnRpdHlEZWxlZ2F0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5kZWxlZ2F0ZUFkbWluaXN0cmF0aW9uQXdzU2VydmljZShzc29UYXNrTnVtYmVyLCBzc29XYXlwb2ludCwgXCJBV1MgSUFNIElkZW50aXR5IENlbnRlclwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIHNzb1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWVuYWJsZU9yZ1BvbGljaWVzQ2hlY2suc2NwRW5hYmxlZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZVBvbGljeVR5cGVUYXNrKHNzb1Rhc2tOdW1iZXIsIHNzb1dheXBvaW50LCBcIlNlcnZpY2UgQ29udHJvbCBQb2xpY3lcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBzc29UYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgICAgICAgICAgICAgICAgICBTRUNVUklUWWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5BV1MgU0VDVVJJVFkgU0VSVklDRVMgRU5BQkxFRCBJTiBBV1MgT1JHQU5JWkFUSU9OOlxcbmApO1xuICAgICAgICBpZiAob3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2d1YXJkZHV0eS5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEFXUyBHdWFyZER1dHlgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ3NlY3VyaXR5aHViLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQVdTIFNlY3VyaXR5IEh1YmApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnYWNjZXNzLWFuYWx5emVyLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgSUFNIEFjY2VzcyBBbmFseXplcmApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnbWFjaWUuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBNYWNpZWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnc3RvcmFnZS1sZW5zLnMzLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQW1hem9uIFMzIFN0b3JhZ2UgTGVuc2ApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnaW5zcGVjdG9yMi5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEFtYXpvbiBJbnNwZWN0b3JgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2Nsb3VkdHJhaWwuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBV1MgQ2xvdWRUcmFpbGApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnY29uZmlnLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQVdTIENvbmZpZ2ApO1xuICAgICAgICB9XG4gICAgICAgIC8vLy8vIFNFVCBUSEUgQkFDS0xPRyBUQVNLIEZPUiBTRUNVUklUWSAvLy8vL1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuU0VDVVJJVFkgUkVDT01NRU5ERUQgVEFTS1M6YCk7XG4gICAgICAgIGxldCBzZWNUYXNrTnVtYmVyID0gMTtcbiAgICAgICAgY29uc3Qgc2VjV2F5cG9pbnQgPSBcIlNlY3VyaXR5XCI7XG4gICAgICAgIGlmICghZW5hYmxlT3JnUG9saWNpZXNDaGVjay5zY3BFbmFibGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlUG9saWN5VHlwZVRhc2soc2VjVGFza051bWJlciwgc2VjV2F5cG9pbnQsIFwiU2VydmljZSBDb250cm9sIFBvbGljeVwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIHNlY1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdndWFyZGR1dHkuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlQXdzT3JnYW5pemF0aW9uU2VydmljZShzZWNUYXNrTnVtYmVyLCBzZWNXYXlwb2ludCwgXCJBV1MgR3VhcmREdXR5XCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgc2VjVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghb3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ3NlY3VyaXR5aHViLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2Uoc2VjVGFza051bWJlciwgc2VjV2F5cG9pbnQsIFwiQVdTIFNlY3VyaXR5SHViXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgc2VjVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghb3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2FjY2Vzcy1hbmFseXplci5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVBd3NPcmdhbml6YXRpb25TZXJ2aWNlKHNlY1Rhc2tOdW1iZXIsIHNlY1dheXBvaW50LCBcIkFXUyBJQU0gQWNjZXNzIEFuYWx5emVyXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgc2VjVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghb3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2Nsb3VkdHJhaWwuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlQXdzT3JnYW5pemF0aW9uU2VydmljZShzZWNUYXNrTnVtYmVyLCBzZWNXYXlwb2ludCwgXCJBV1MgQ2xvdWRUcmFpbFwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIHNlY1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdjb25maWcuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlQXdzT3JnYW5pemF0aW9uU2VydmljZShzZWNUYXNrTnVtYmVyLCBzZWNXYXlwb2ludCwgXCJBV1MgQ29uZmlnXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgc2VjVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2VjdXJpdHlIdWJEZWxlZ2F0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5kZWxlZ2F0ZUFkbWluaXN0cmF0aW9uQXdzU2VydmljZShzZWNUYXNrTnVtYmVyLCBzZWNXYXlwb2ludCwgXCJTZWN1cml0eSBIdWJcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBzZWNUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFndWFyZER1dHlEZWxlZ2F0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5kZWxlZ2F0ZUFkbWluaXN0cmF0aW9uQXdzU2VydmljZShzZWNUYXNrTnVtYmVyLCBzZWNXYXlwb2ludCwgXCJHdWFyZER1dHlcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBzZWNUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjb25maWdEZWxlZ2F0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5kZWxlZ2F0ZUFkbWluaXN0cmF0aW9uQXdzU2VydmljZShzZWNUYXNrTnVtYmVyLCBzZWNXYXlwb2ludCwgXCJBV1MgQ29uZmlnXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgc2VjVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaWFtQWNjZXNzQW5hbHl6ZXJEZWxlZ2F0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5kZWxlZ2F0ZUFkbWluaXN0cmF0aW9uQXdzU2VydmljZShzZWNUYXNrTnVtYmVyLCBzZWNXYXlwb2ludCwgXCJBV1MgSUFNIEFjY2VzcyBBbmFseXplclwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIHNlY1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXMzU3RvcmFnZUxlbnNEZWxlZ2F0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5kZWxlZ2F0ZUFkbWluaXN0cmF0aW9uQXdzU2VydmljZShzZWNUYXNrTnVtYmVyLCBzZWNXYXlwb2ludCwgXCJTMyBTdG9yYWdlIExlbnNcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBzZWNUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgICAgICAgICAgICAgICAgICBORVRXT1JLYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgKTtcbiAgICAgICAgLy8vLy8gU0VUIFRIRSBCQUNLTE9HIFRBU0sgRk9SIE5FVFdPUksgLy8vLy9cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbk5FVFdPUksgUkVDT01NRU5ERUQgVEFTS1M6YCk7XG4gICAgICAgIGxldCBuZXRUYXNrTnVtYmVyID0gMTtcbiAgICAgICAgY29uc3QgbmV0d29ya1dheXBvaW50ID0gJ05ldHdvcmsnO1xuICAgICAgICBpZiAoIW9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdndWFyZGR1dHkuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBjb25zdCBuZXRHdWFyZER1dHlFbmFibGVNZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlQXdzT3JnYW5pemF0aW9uU2VydmljZShuZXRUYXNrTnVtYmVyLCBuZXR3b3JrV2F5cG9pbnQsIFwiQVdTIEd1YXJkRHV0eVwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bmV0R3VhcmREdXR5RW5hYmxlTWVzc2FnZX1gKTtcbiAgICAgICAgICAgIG5ldFRhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdpcGFtLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2UobmV0VGFza051bWJlciwgbmV0d29ya1dheXBvaW50LCBcIkFXUyBJUEFNXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgbmV0VGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghb3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ3JhbS5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVBd3NPcmdhbml6YXRpb25TZXJ2aWNlKG5ldFRhc2tOdW1iZXIsIG5ldHdvcmtXYXlwb2ludCwgXCJBV1MgUmVzb3VyY2UgQWNjZXNzIE1hbmFnZXJcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBuZXRUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpcGFtRGVsZWdhdGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVsZWdhdGVBZG1pbmlzdHJhdGlvbkF3c1NlcnZpY2UobmV0VGFza051bWJlciwgbmV0d29ya1dheXBvaW50LCBcIkFXUyBJUEFNXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgbmV0VGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZW5hYmxlT3JnUG9saWNpZXNDaGVjay5zY3BFbmFibGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlUG9saWN5VHlwZVRhc2sobmV0VGFza051bWJlciwgbmV0d29ya1dheXBvaW50LCBcIlNlcnZpY2UgQ29udHJvbCBQb2xpY3lcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBuZXRUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgICAgICAgICAgICAgICAgT0JTRVJWQUJJTElUWWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYCk7XG4gICAgICAgIC8vLy8vIFNFVCBUSEUgQkFDS0xPRyBUQVNLIEZPUiBPQlNFUlZBQklMSVRZIC8vLy8vXG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5PQlNFUlZBQklMSVRZIFJFQ09NTUVOREVEIFRBU0tTOmApO1xuICAgICAgICBsZXQgb2JUYXNrTnVtYmVyID0gMTtcbiAgICAgICAgY29uc3Qgb2JXYXlwb2ludCA9ICdPYnNlcnZhYmlsaXR5JztcbiAgICAgICAgaWYgKCFvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnYWNjb3VudC5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVBd3NPcmdhbml6YXRpb25TZXJ2aWNlKG9iVGFza051bWJlciwgb2JXYXlwb2ludCwgXCJBY2NvdW50IE1hbmFnZXJcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBvYlRhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFjY291bnREZWxlZ2F0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5kZWxlZ2F0ZUFkbWluaXN0cmF0aW9uQXdzU2VydmljZShvYlRhc2tOdW1iZXIsIG9iV2F5cG9pbnQsIFwiQWNjb3VudCBNYW5hZ2VyXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgb2JUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgICAgICAgICAgICAgQkFDS1VQIEFORCBSRUNPVkVSWWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYCk7XG4gICAgICAgIC8vLy8vIFNFVCBUSEUgQkFDS0xPRyBUQVNLIEZPUiBCQUNLVVAgQU5EIFJFQ09WRVJZIC8vLy8vXG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5CQUNLVVAgQU5EIFJFQ09WRVJZIFJFQ09NTUVOREVEIFRBU0tTOmApO1xuICAgICAgICBsZXQgYmFja1Rhc2tOdW1iZXIgPSAxO1xuICAgICAgICBjb25zdCBiYWNrdXBXYXlwb2ludCA9ICdCYWNrdXAgYW5kIFJlY292ZXJ5JztcbiAgICAgICAgLy8gY2hlY2sgaWYgQVdTIEJhY2t1cCBpcyBlbmFibGVkXG4gICAgICAgIGlmICghb3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2JhY2t1cC5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVBd3NPcmdhbml6YXRpb25TZXJ2aWNlKGJhY2tUYXNrTnVtYmVyLCBiYWNrdXBXYXlwb2ludCwgXCJBV1MgQmFja3VwXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgYmFja1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWJhY2t1cERlbGVnYXRlZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlbGVnYXRlQWRtaW5pc3RyYXRpb25Bd3NTZXJ2aWNlKGJhY2tUYXNrTnVtYmVyLCBiYWNrdXBXYXlwb2ludCwgXCJBV1MgQmFja3VwXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgYmFja1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWVuYWJsZU9yZ1BvbGljaWVzQ2hlY2suYmFja3VwUG9saWN5RW5hYmxlZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZVBvbGljeVR5cGVUYXNrKGJhY2tUYXNrTnVtYmVyLCBiYWNrdXBXYXlwb2ludCwgXCJCYWNrdXAgUG9saWN5XCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgYmFja1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWVuYWJsZU9yZ1BvbGljaWVzQ2hlY2suc2NwRW5hYmxlZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZVBvbGljeVR5cGVUYXNrKGJhY2tUYXNrTnVtYmVyLCBiYWNrdXBXYXlwb2ludCwgXCJTZXJ2aWNlIENvbnRyb2wgUG9saWN5XCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgYmFja1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChhY2NvdW50VHlwZS5pc0luT3JnYW5pemF0aW9uICYmICFhY2NvdW50VHlwZS5pc01hbmFnZW1lbnRBY2NvdW50KSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSAnXFxuV0FSTklORzogWW91IGFyZSBydW5uaW5nIFBhdGhmaW5kZXIgZnJvbSBhbiBhY2NvdW50IHRoYXQgaXMgYSBtZW1iZXIgb2YgeW91ciBBV1MgT3JnYW5pemF0aW9uLiBQbGVhc2UgcnVuIHRoZSBzb2x1dGlvbiBmcm9tIHlvdXIgQVdTIE1hbmFnZW1lbnQgYWNjb3VudC4nO1xuICAgICAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIG1lc3NhZ2UpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9ICdcXG5XQVJOSU5HOiBZb3UgYXJlIHJ1bm5pbmcgUGF0aGZpbmRlciBmcm9tIGFuIGFjY291bnQgdGhhdCBub3QgcGFydCBvZiBhbiBBV1MgT3JnYW5pemF0aW9uLiBUaGlzIGFjY291bnQgd2lsbCBiZSB0cmVhdGVkIGFzIGEgc3RhbmRhbG9uZSBhY2NvdW50Lic7XG4gICAgICAgIGNvbnNvbGUud2FybihtZXNzYWdlKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgbWVzc2FnZSk7XG4gICAgfVxuICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5cXG4gIEVORCBSRVZJRVdgKTtcbn07XG5tYWluKCk7XG4iLCJpbXBvcnQgeyBFQzJDbGllbnQsIERlc2NyaWJlUmVnaW9uc0NvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LWVjMlwiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0QWxsUmVnaW9ucygpIHtcbiAgICAvLyBncmFiYmluZyBhbGwgcmVnaW9ucyBmcm9tIHVzLWVhc3QtMVxuICAgIGNvbnN0IGVjMkNsaWVudCA9IG5ldyBFQzJDbGllbnQoeyByZWdpb246IFwidXMtZWFzdC0xXCIgfSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGVzY3JpYmVSZWdpb25zQ29tbWFuZCA9IG5ldyBEZXNjcmliZVJlZ2lvbnNDb21tYW5kKHt9KTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBlYzJDbGllbnQuc2VuZChkZXNjcmliZVJlZ2lvbnNDb21tYW5kKTtcbiAgICAgICAgY29uc3QgcmVnaW9ucyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHJlZ2lvbiBvZiByZXNwb25zZS5SZWdpb25zIHx8IFtdKSB7XG4gICAgICAgICAgICByZWdpb25zLnB1c2gocmVnaW9uLlJlZ2lvbk5hbWUgfHwgXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlZ2lvbnM7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcmV0cmlldmluZyByZWdpb25zOlwiLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIGVjMkNsaWVudC5kZXN0cm95KCk7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgZ2V0QWxsUmVnaW9ucztcbiIsImltcG9ydCB7IFNUU0NsaWVudCwgR2V0Q2FsbGVySWRlbnRpdHlDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1zdHNcIjtcbmltcG9ydCB7IE9yZ2FuaXphdGlvbnNDbGllbnQsIERlc2NyaWJlT3JnYW5pemF0aW9uQ29tbWFuZCwgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LW9yZ2FuaXphdGlvbnNcIjtcbmFzeW5jIGZ1bmN0aW9uIGdldEFjY291bnRJZChyZWdpb24pIHtcbiAgICBjb25zdCBzdHNDbGllbnQgPSBuZXcgU1RTQ2xpZW50KHsgcmVnaW9uIH0pO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGdldENhbGxlcklkZW50aXR5Q29tbWFuZCA9IG5ldyBHZXRDYWxsZXJJZGVudGl0eUNvbW1hbmQoe30pO1xuICAgICAgICBjb25zdCBBY2NvdW50ID0gYXdhaXQgc3RzQ2xpZW50LnNlbmQoZ2V0Q2FsbGVySWRlbnRpdHlDb21tYW5kKTtcbiAgICAgICAgcmV0dXJuIEFjY291bnQuQWNjb3VudDtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIGFjY291bnQgSUQ6XCIsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufVxuO1xuLy8gZnVuY3Rpb24gY2hlY2tpbmcgaWYgbWFuYWdlbWVudCBhY2NvdW50LCBtZW1iZXIgYWNjb3VudCwgb3Igc3RhbmRhbG9uZSBhY2NvdW50XG5leHBvcnQgY29uc3QgZGVmaW5lQWNjb3VudFR5cGUgPSBhc3luYyAocmVnaW9uKSA9PiB7XG4gICAgY29uc3Qgb3JnYW5pemF0aW9uc0NsaWVudCA9IG5ldyBPcmdhbml6YXRpb25zQ2xpZW50KHsgcmVnaW9uIH0pO1xuICAgIGxldCBpc0luT3JnYW5pemF0aW9uID0gZmFsc2U7XG4gICAgbGV0IGlzTWFuYWdlbWVudEFjY291bnQgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjdXJyZW50QWNjb3VudElkID0gYXdhaXQgZ2V0QWNjb3VudElkKHJlZ2lvbik7XG4gICAgICAgIGlmIChjdXJyZW50QWNjb3VudElkKSB7XG4gICAgICAgICAgICBjb25zdCBkZXNjcmliZU9yZ2FuaXphdGlvbkNvbW1hbmQgPSBuZXcgRGVzY3JpYmVPcmdhbml6YXRpb25Db21tYW5kKHt9KTtcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaWJlT3JnYW5pemF0aW9uUmVzcG9uc2UgPSBhd2FpdCBvcmdhbml6YXRpb25zQ2xpZW50LnNlbmQoZGVzY3JpYmVPcmdhbml6YXRpb25Db21tYW5kKTtcbiAgICAgICAgICAgIC8vIHRoZSBhY2NvdW50IGlzIG5vdCBzdGFuZGFsb25lIGFuZCBwYXJ0IG9mIEFXUyBPcmdhbml6YXRpb25cbiAgICAgICAgICAgIGlmIChkZXNjcmliZU9yZ2FuaXphdGlvblJlc3BvbnNlLk9yZ2FuaXphdGlvbj8uTWFzdGVyQWNjb3VudElkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWFuYWdlbWVudEFjY291bnRJZCA9IGRlc2NyaWJlT3JnYW5pemF0aW9uUmVzcG9uc2UuT3JnYW5pemF0aW9uPy5NYXN0ZXJBY2NvdW50SWQ7XG4gICAgICAgICAgICAgICAgaWYgKG1hbmFnZW1lbnRBY2NvdW50SWQgPT0gY3VycmVudEFjY291bnRJZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGlzIGFuIG9yZ2FuaXphdGlvbiBhbmQgdGhpcyBpcyB0aGUgbWFuYWdlbWVudCBhY2NvdW50XG4gICAgICAgICAgICAgICAgICAgIGlzTWFuYWdlbWVudEFjY291bnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpc0luT3JnYW5pemF0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZXJlIGlzIGFuIG9yZ2FuaXphdGlvbiwgYnV0IHRoaXMgaXNuJ3QgdGhlIG1hbmFnZW1lbnQgYWNjb3VudFxuICAgICAgICAgICAgICAgICAgICBpc0luT3JnYW5pemF0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB0aGVyZSBpc24ndCBhbiBvcmdhbml6YXRpb24gYW5kIHRoaXMgYWNjb3VudCBpcyBzdGFuZGFsb25lXG4gICAgICAgICAgICAgICAgaXNJbk9yZ2FuaXphdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGVycm9yKTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIG9yZ2FuaXphdGlvbnNDbGllbnQuZGVzdHJveSgpO1xuICAgIH1cbiAgICByZXR1cm4geyBpc0luT3JnYW5pemF0aW9uLCBpc01hbmFnZW1lbnRBY2NvdW50IH07XG59O1xuIiwiaW1wb3J0IHsgSUFNQ2xpZW50LCBMaXN0VXNlcnNDb21tYW5kLCBMaXN0QWNjZXNzS2V5c0NvbW1hbmQsIEdldEFjY2Vzc0tleUxhc3RVc2VkQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtaWFtXCI7XG4vLyBmdW5jdGlvbiBsaXN0IGFsbCBJQU0gdXNlcnMgYW5kIGlmIHRoZXkgaGF2ZSBrZXlzIGluIHRoZSBtYW5hZ2VtZW50IGFjY291bnRcbmNvbnN0IGNoZWNrSWFtVXNlcnMgPSBhc3luYyAoKSA9PiB7XG4gICAgLy8gU2V0IHRvIHVzLWVhc3QtMSBhcyBJQU0gaXMgZ2xvYmFsIGFuZCByZWdpb24gaXNuJ3QgYSBjb25jZXJuXG4gICAgY29uc3QgaWFtQ2xpZW50ID0gbmV3IElBTUNsaWVudCh7IHJlZ2lvbjogJ3VzLWVhc3QtMScgfSk7XG4gICAgY29uc3QgaWFtVXNlckluZm8gPSBbXTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBsaXN0VXNlcnNDb21tYW5kID0gbmV3IExpc3RVc2Vyc0NvbW1hbmQoe30pO1xuICAgICAgICBjb25zdCBsaXN0VXNlcnNSZXNwb25zZSA9IGF3YWl0IGlhbUNsaWVudC5zZW5kKGxpc3RVc2Vyc0NvbW1hbmQpO1xuICAgICAgICBmb3IgKGNvbnN0IHVzZXIgb2YgbGlzdFVzZXJzUmVzcG9uc2UuVXNlcnMgfHwgW10pIHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJOYW1lID0gdXNlci5Vc2VyTmFtZSB8fCBcIlwiO1xuICAgICAgICAgICAgY29uc3QgbGlzdEFjY2Vzc0tleXNDb21tYW5kID0gbmV3IExpc3RBY2Nlc3NLZXlzQ29tbWFuZCh7XG4gICAgICAgICAgICAgICAgVXNlck5hbWU6IHVzZXJOYW1lLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBsaXN0QWNjZXNzS2V5c1Jlc3BvbnNlID0gYXdhaXQgaWFtQ2xpZW50LnNlbmQobGlzdEFjY2Vzc0tleXNDb21tYW5kKTtcbiAgICAgICAgICAgIGNvbnN0IGFjY2Vzc0tleXMgPSBsaXN0QWNjZXNzS2V5c1Jlc3BvbnNlLkFjY2Vzc0tleU1ldGFkYXRhIHx8IFtdO1xuICAgICAgICAgICAgaWYgKGFjY2Vzc0tleXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYWNjZXNzS2V5IG9mIGFjY2Vzc0tleXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzS2V5SWQgPSBhY2Nlc3NLZXkuQWNjZXNzS2V5SWQgfHwgXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2V0TGFzdFVzZWRDb21tYW5kID0gbmV3IEdldEFjY2Vzc0tleUxhc3RVc2VkQ29tbWFuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBBY2Nlc3NLZXlJZDogYWNjZXNzS2V5SWQsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0VXNlZFJlc3BvbnNlID0gYXdhaXQgaWFtQ2xpZW50LnNlbmQoZ2V0TGFzdFVzZWRDb21tYW5kKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm91bmRVc2VySW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzS2V5SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0VXNlZDogbGFzdFVzZWRSZXNwb25zZSAmJiBsYXN0VXNlZFJlc3BvbnNlLkFjY2Vzc0tleUxhc3RVc2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBgJHtsYXN0VXNlZFJlc3BvbnNlLkFjY2Vzc0tleUxhc3RVc2VkLkxhc3RVc2VkRGF0ZX1gIHx8IFwiTm90IGF2YWlsYWJsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIk5vdCBhdmFpbGFibGVcIixcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaWFtVXNlckluZm8ucHVzaChmb3VuZFVzZXJJbmZvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmb3VuZFVzZXJJbmZvID0ge1xuICAgICAgICAgICAgICAgICAgICB1c2VyTmFtZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWFtVXNlckluZm8ucHVzaChmb3VuZFVzZXJJbmZvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcik7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBpYW1DbGllbnQuZGVzdHJveSgpO1xuICAgIH1cbiAgICByZXR1cm4gaWFtVXNlckluZm87XG59O1xuZXhwb3J0IGRlZmF1bHQgY2hlY2tJYW1Vc2VycztcbiIsImltcG9ydCB7IEVDMkNsaWVudCwgRGVzY3JpYmVJbnN0YW5jZXNDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1lYzJcIjtcbmFzeW5jIGZ1bmN0aW9uIGNoZWNrRWMyRXhpc3RzKHJlZ2lvbnMpIHtcbiAgICBsZXQgZWMyVmFsaWRhdGlvbiA9IFtdO1xuICAgIGZvciAoY29uc3QgcmVnaW9uIG9mIHJlZ2lvbnMpIHtcbiAgICAgICAgY29uc3QgZWMyQ2xpZW50ID0gbmV3IEVDMkNsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBEZXNjcmliZUluc3RhbmNlc0NvbW1hbmQoe30pO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBlYzJDbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5SZXNlcnZhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuUmVzZXJ2YXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhgV0FSTklORzogSW5zdGFuY2UocykgZXhpc3RzIGluIHJlZ2lvbjogJHtyZWdpb259YCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVjMkZvdW5kID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiByZWdpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBlYzJGb3VuZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBlYzJWYWxpZGF0aW9uLnB1c2goZWMyRm91bmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWMyRm91bmQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpb246IHJlZ2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVjMkZvdW5kOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBlYzJWYWxpZGF0aW9uLnB1c2goZWMyRm91bmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVjMkZvdW5kID0ge1xuICAgICAgICAgICAgICAgICAgICByZWdpb246IHJlZ2lvbixcbiAgICAgICAgICAgICAgICAgICAgZWMyRm91bmQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBlYzJWYWxpZGF0aW9uLnB1c2goZWMyRm91bmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEVycm9yIGNoZWNraW5nIGluc3RhbmNlOiAke2Vycm9yfWApO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgZWMyQ2xpZW50LmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgIH0gLy8gZW5kIGZvclxuICAgIHJldHVybiBlYzJWYWxpZGF0aW9uO1xufVxuO1xuZXhwb3J0IGRlZmF1bHQgY2hlY2tFYzJFeGlzdHM7XG4iLCJpbXBvcnQgeyBFQzJDbGllbnQsIERlc2NyaWJlVnBjc0NvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LWVjMlwiO1xuYXN5bmMgZnVuY3Rpb24gY2hlY2tWcGNFeGlzdHMocmVnaW9ucykge1xuICAgIGxldCB2cGNWYWxpZGF0aW9uID0gW107XG4gICAgZm9yIChjb25zdCByZWdpb24gb2YgcmVnaW9ucykge1xuICAgICAgICBjb25zdCBlYzJDbGllbnQgPSBuZXcgRUMyQ2xpZW50KHsgcmVnaW9uIH0pO1xuICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IERlc2NyaWJlVnBjc0NvbW1hbmQoe30pO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBlYzJDbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5WcGNzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLlZwY3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGBXQVJOSU5HOiBWUEMocykgZXhpc3RzIGluIHJlZ2lvbjogJHtyZWdpb259YCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZwY0ZvdW5kID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiByZWdpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICB2cGNGb3VuZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2cGNWYWxpZGF0aW9uLnB1c2godnBjRm91bmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdnBjRm91bmQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpb246IHJlZ2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHZwY0ZvdW5kOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2cGNWYWxpZGF0aW9uLnB1c2godnBjRm91bmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZwY0ZvdW5kID0ge1xuICAgICAgICAgICAgICAgICAgICByZWdpb246IHJlZ2lvbixcbiAgICAgICAgICAgICAgICAgICAgdnBjRm91bmQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2cGNWYWxpZGF0aW9uLnB1c2godnBjRm91bmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEVycm9yIGNoZWNraW5nIGluc3RhbmNlOiAke2Vycm9yfWApO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgZWMyQ2xpZW50LmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgIH0gLy8gZW5kIGZvclxuICAgIHJldHVybiB2cGNWYWxpZGF0aW9uO1xufVxuO1xuZXhwb3J0IGRlZmF1bHQgY2hlY2tWcGNFeGlzdHM7XG4iLCJpbXBvcnQgeyBDbG91ZFRyYWlsQ2xpZW50LCBEZXNjcmliZVRyYWlsc0NvbW1hbmQgfSBmcm9tICdAYXdzLXNkay9jbGllbnQtY2xvdWR0cmFpbCc7XG5hc3luYyBmdW5jdGlvbiBjaGVja0Nsb3VkVHJhaWxFeGlzdHMocmVnaW9ucykge1xuICAgIGxldCBjbG91ZFRyYWlsVmFsaWRhdGlvbiA9IFtdO1xuICAgIGZvciAoY29uc3QgcmVnaW9uIG9mIHJlZ2lvbnMpIHtcbiAgICAgICAgY29uc3QgY2xvdWRUcmFpbENsaWVudCA9IG5ldyBDbG91ZFRyYWlsQ2xpZW50KHsgcmVnaW9uIH0pO1xuICAgICAgICBjb25zdCBjbG91ZFRyYWlsRGVzY3JpYmVDb21tYW5kID0gbmV3IERlc2NyaWJlVHJhaWxzQ29tbWFuZCh7fSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjbG91ZFRyYWlsUmVzcG9uc2UgPSBhd2FpdCBjbG91ZFRyYWlsQ2xpZW50LnNlbmQoY2xvdWRUcmFpbERlc2NyaWJlQ29tbWFuZCk7XG4gICAgICAgICAgICBpZiAoY2xvdWRUcmFpbFJlc3BvbnNlLnRyYWlsTGlzdCkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdHJhaWwgb2YgY2xvdWRUcmFpbFJlc3BvbnNlLnRyYWlsTGlzdCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdHJhaWxJbmZvID0ge307XG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmFpbC5Ib21lUmVnaW9uID09IHJlZ2lvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhgdHJhaWwgZm91bmQgaW4gJHtyZWdpb259YClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWlsSW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpb246IHJlZ2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFpbEZvdW5kOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT3JnVHJhaWw6IHRyYWlsLklzTXVsdGlSZWdpb25UcmFpbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc011bHRpUmVnaW9uOiB0cmFpbC5Jc011bHRpUmVnaW9uVHJhaWxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFpbEluZm8gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiByZWdpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhaWxGb3VuZDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2xvdWRUcmFpbFZhbGlkYXRpb24ucHVzaCh0cmFpbEluZm8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBjaGVja2luZyBpbnN0YW5jZTogJHtlcnJvcn1gKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGNsb3VkVHJhaWxDbGllbnQuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfSAvLyBlbmQgZm9yIHJlZ2lvbnNcbiAgICByZXR1cm4gY2xvdWRUcmFpbFZhbGlkYXRpb247XG59XG47XG5leHBvcnQgZGVmYXVsdCBjaGVja0Nsb3VkVHJhaWxFeGlzdHM7XG4iLCJpbXBvcnQgeyBDb25maWdTZXJ2aWNlQ2xpZW50LCBEZXNjcmliZUNvbmZpZ3VyYXRpb25SZWNvcmRlclN0YXR1c0NvbW1hbmQsIERlc2NyaWJlRGVsaXZlcnlDaGFubmVsc0NvbW1hbmQgfSBmcm9tICdAYXdzLXNkay9jbGllbnQtY29uZmlnLXNlcnZpY2UnO1xuYXN5bmMgZnVuY3Rpb24gY2hlY2tDb25maWdFeGlzdHMocmVnaW9ucykge1xuICAgIGxldCBjb25maWdEZXRhaWxzID0gW107XG4gICAgZm9yIChjb25zdCByZWdpb24gb2YgcmVnaW9ucykge1xuICAgICAgICBjb25zdCBjb25maWdTZXJ2aWNlQ2xpZW50ID0gbmV3IENvbmZpZ1NlcnZpY2VDbGllbnQoeyByZWdpb24gfSk7XG4gICAgICAgIGxldCBjb25maWdEZXRhaWwgPSB7XG4gICAgICAgICAgICByZWdpb246IHJlZ2lvbixcbiAgICAgICAgICAgIGNvbmZpZ1JlY29yZGVyRm91bmQ6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlnRGVsaXZlcnlDaGFubmVsRm91bmQ6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBDb25maWcgcmVjb3JkZXIgZXhpc3RzXG4gICAgICAgICAgICBjb25zdCByZWNvcmRlclJlc3BvbnNlID0gYXdhaXQgY29uZmlnU2VydmljZUNsaWVudC5zZW5kKG5ldyBEZXNjcmliZUNvbmZpZ3VyYXRpb25SZWNvcmRlclN0YXR1c0NvbW1hbmQoe30pKTtcbiAgICAgICAgICAgIGNvbnN0IHJlY29yZGVyRXhpc3RzID0gcmVjb3JkZXJSZXNwb25zZS5Db25maWd1cmF0aW9uUmVjb3JkZXJzU3RhdHVzPy5sZW5ndGggIT09IDA7XG4gICAgICAgICAgICBpZiAocmVjb3JkZXJFeGlzdHMpIHtcbiAgICAgICAgICAgICAgICBjb25maWdEZXRhaWwuY29uZmlnUmVjb3JkZXJGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBDb25maWcgZGVsaXZlcnkgY2hhbm5lbCBleGlzdHNcbiAgICAgICAgICAgIGNvbnN0IGNoYW5uZWxSZXNwb25zZSA9IGF3YWl0IGNvbmZpZ1NlcnZpY2VDbGllbnQuc2VuZChuZXcgRGVzY3JpYmVEZWxpdmVyeUNoYW5uZWxzQ29tbWFuZCh7fSkpO1xuICAgICAgICAgICAgY29uc3QgY2hhbm5lbEV4aXN0cyA9IGNoYW5uZWxSZXNwb25zZS5EZWxpdmVyeUNoYW5uZWxzPy5sZW5ndGggIT09IDA7XG4gICAgICAgICAgICBpZiAoY2hhbm5lbEV4aXN0cykge1xuICAgICAgICAgICAgICAgIGNvbmZpZ0RldGFpbC5jb25maWdEZWxpdmVyeUNoYW5uZWxGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25maWdEZXRhaWxzLnB1c2goY29uZmlnRGV0YWlsKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGNoZWNraW5nIEFXUyBDb25maWcgaW4gJHtyZWdpb259OmAsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGNvbmZpZ1NlcnZpY2VDbGllbnQuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb25maWdEZXRhaWxzO1xufVxuZXhwb3J0IGRlZmF1bHQgY2hlY2tDb25maWdFeGlzdHM7XG4iLCJpbXBvcnQgeyBPcmdhbml6YXRpb25zQ2xpZW50LCBEZXNjcmliZU9yZ2FuaXphdGlvbkNvbW1hbmQsIExpc3RSb290c0NvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LW9yZ2FuaXphdGlvbnNcIjtcbmFzeW5jIGZ1bmN0aW9uIGdldE9yZ0RldGFpbHMocmVnaW9uKSB7XG4gICAgY29uc3Qgb3JnQ2xpZW50ID0gbmV3IE9yZ2FuaXphdGlvbnNDbGllbnQoeyByZWdpb24gfSk7XG4gICAgbGV0IG9yZ0RldGFpbHMgPSB7fTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBvcmdEZXNjcmliZUNvbW1hbmQgPSBuZXcgRGVzY3JpYmVPcmdhbml6YXRpb25Db21tYW5kKHt9KTtcbiAgICAgICAgY29uc3Qgb3JnRGF0YSA9IGF3YWl0IG9yZ0NsaWVudC5zZW5kKG9yZ0Rlc2NyaWJlQ29tbWFuZCk7XG4gICAgICAgIGlmIChvcmdEYXRhLk9yZ2FuaXphdGlvbikge1xuICAgICAgICAgICAgb3JnRGV0YWlscy5pZCA9IG9yZ0RhdGEuT3JnYW5pemF0aW9uLklkID8/IFwiXCI7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgT3JnYW5pemF0aW9uIElEOiAke29yZ0RldGFpbHMuaWR9YCApO1xuICAgICAgICAgICAgb3JnRGV0YWlscy5hcm4gPSBvcmdEYXRhLk9yZ2FuaXphdGlvbi5Bcm4gPz8gXCJcIjtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBPcmdhbml6YXRpb24gQVJOOiAke29yZ0RldGFpbHMuYXJufWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgTGlzdFJvb3RzQ29tbWFuZCh7fSk7XG4gICAgICAgIGNvbnN0IHJvb3RzID0gYXdhaXQgb3JnQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgIGlmIChyb290cy5Sb290cykge1xuICAgICAgICAgICAgb3JnRGV0YWlscy5yb290T3VJZCA9IHJvb3RzLlJvb3RzWzBdLklkO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYEFXUyBPcmcgcm9vdCBvdSBpZDogJHtvcmdEZXRhaWxzLnJvb3RPdUlkfWApXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gaW5mbyBmb3VuZCBmb3IgeW91ciBBV1MgT3JnYW5pemF0aW9uLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBBbiBlcnJvciBvY2N1cnJlZDogJHtlcnJvcn1gKTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIG9yZ0NsaWVudC5kZXN0cm95KCk7XG4gICAgICAgIHJldHVybiBvcmdEZXRhaWxzO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IGdldE9yZ0RldGFpbHM7XG4iLCJpbXBvcnQgeyBDb3N0QW5kVXNhZ2VSZXBvcnRTZXJ2aWNlQ2xpZW50LCBEZXNjcmliZVJlcG9ydERlZmluaXRpb25zQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtY29zdC1hbmQtdXNhZ2UtcmVwb3J0LXNlcnZpY2VcIjtcbmNvbnN0IGNoZWNrTGVnYWN5Q3VyID0gYXN5bmMgKHJlZ2lvbikgPT4ge1xuICAgIC8vIFNldCB1cCBBV1MgU0RLIGNsaWVudCBmb3IgQ29zdCBFeHBsb3JlclxuICAgIGNvbnN0IGN1ckNsaWVudCA9IG5ldyBDb3N0QW5kVXNhZ2VSZXBvcnRTZXJ2aWNlQ2xpZW50KHsgcmVnaW9uIH0pO1xuICAgIGxldCBpc0xlZ2FjeUN1clNldHVwID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgQ29zdCBFeHBsb3JlciBpcyBzZXQgdXBcbiAgICAgICAgY29uc3QgaW5wdXQgPSB7fTtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBEZXNjcmliZVJlcG9ydERlZmluaXRpb25zQ29tbWFuZChpbnB1dCk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY3VyQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgIGlmIChyZXNwb25zZS5SZXBvcnREZWZpbml0aW9ucyAmJiByZXNwb25zZS5SZXBvcnREZWZpbml0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpc0xlZ2FjeUN1clNldHVwID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBpc0xlZ2FjeUN1clNldHVwIH07XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgZXJyb3IgaXMgcmVsYXRlZCB0byBDb3N0IEV4cGxvcmVyIHNldHVwXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yOiAke2Vycm9yfWApO1xuICAgICAgICBpc0xlZ2FjeUN1clNldHVwID0gZmFsc2U7XG4gICAgICAgIHJldHVybiB7IGlzTGVnYWN5Q3VyU2V0dXAgfTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIC8vIENsb3NlIHRoZSBBV1MgU0RLIGNsaWVudFxuICAgICAgICBjdXJDbGllbnQuZGVzdHJveSgpO1xuICAgIH1cbn07XG5leHBvcnQgZGVmYXVsdCBjaGVja0xlZ2FjeUN1cjtcbiIsImltcG9ydCB7IE9yZ2FuaXphdGlvbnNDbGllbnQsIExpc3RSb290c0NvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LW9yZ2FuaXphdGlvbnNcIjtcbmFzeW5jIGZ1bmN0aW9uIGdldEVuYWJsZWRPcmdQb2xpY3lUeXBlcyhyZWdpb24pIHtcbiAgICBjb25zdCBvcmdDbGllbnQgPSBuZXcgT3JnYW5pemF0aW9uc0NsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICBsZXQgcG9saWN5VHlwZXNFbmFibGVkID0ge1xuICAgICAgICBzY3BFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgdGFnUG9saWN5RW5hYmxlZDogZmFsc2UsXG4gICAgICAgIGJhY2t1cFBvbGljeUVuYWJsZWQ6IGZhbHNlXG4gICAgfTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHt9O1xuICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IExpc3RSb290c0NvbW1hbmQoaW5wdXQpO1xuICAgICAgICBjb25zdCByb290cyA9IGF3YWl0IG9yZ0NsaWVudC5zZW5kKGNvbW1hbmQpO1xuICAgICAgICBpZiAocm9vdHMuUm9vdHMpIHtcbiAgICAgICAgICAgIGlmIChyb290cy5Sb290c1swXS5Qb2xpY3lUeXBlcykge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZW5hYmxlZFBvbGljeSBvZiByb290cy5Sb290c1swXS5Qb2xpY3lUeXBlcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW5hYmxlZFBvbGljeS5UeXBlID09ICdTRVJWSUNFX0NPTlRST0xfUE9MSUNZJyAmJiBlbmFibGVkUG9saWN5LlN0YXR1cyA9PSAnRU5BQkxFRCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVR5cGVzRW5hYmxlZC5zY3BFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZW5hYmxlZFBvbGljeS5UeXBlID09ICdUQUdfUE9MSUNZJyAmJiBlbmFibGVkUG9saWN5LlN0YXR1cyA9PSAnRU5BQkxFRCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVR5cGVzRW5hYmxlZC50YWdQb2xpY3lFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZW5hYmxlZFBvbGljeS5UeXBlID09ICdCQUNLVVBfUE9MSUNZJyAmJiBlbmFibGVkUG9saWN5LlN0YXR1cyA9PSAnRU5BQkxFRCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVR5cGVzRW5hYmxlZC5iYWNrdXBQb2xpY3lFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gLy8gZW5kIGZvclxuICAgICAgICAgICAgfSAvLyBlbmQgaWZcbiAgICAgICAgfSAvLyBlbmQgaWZcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEFuIGVycm9yIG9jY3VycmVkOiAke2Vycm9yfWApO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgb3JnQ2xpZW50LmRlc3Ryb3koKTtcbiAgICAgICAgcmV0dXJuIHBvbGljeVR5cGVzRW5hYmxlZDtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBnZXRFbmFibGVkT3JnUG9saWN5VHlwZXM7XG4iLCJpbXBvcnQgeyBPcmdhbml6YXRpb25zQ2xpZW50LCBMaXN0QVdTU2VydmljZUFjY2Vzc0Zvck9yZ2FuaXphdGlvbkNvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LW9yZ2FuaXphdGlvbnNcIjtcbmFzeW5jIGZ1bmN0aW9uIGdldEVuYWJsZWRPcmdTZXJ2aWNlcyhyZWdpb24pIHtcbiAgICBjb25zdCBkaXNjb3ZlcmVkT3JnU2VydmljZXMgPSBbXTtcbiAgICBjb25zdCBvcmdDbGllbnQgPSBuZXcgT3JnYW5pemF0aW9uc0NsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBvcmdTZXJ2aWNlQWNjZXNzQ29tbWFuZCA9IG5ldyBMaXN0QVdTU2VydmljZUFjY2Vzc0Zvck9yZ2FuaXphdGlvbkNvbW1hbmQoe30pO1xuICAgICAgICBjb25zdCBvcmdTZXJ2aWNlQWNjZXNzUmVzcG9uc2UgPSBhd2FpdCBvcmdDbGllbnQuc2VuZChvcmdTZXJ2aWNlQWNjZXNzQ29tbWFuZCk7XG4gICAgICAgIGlmIChvcmdTZXJ2aWNlQWNjZXNzUmVzcG9uc2UuRW5hYmxlZFNlcnZpY2VQcmluY2lwYWxzICYmIG9yZ1NlcnZpY2VBY2Nlc3NSZXNwb25zZS5FbmFibGVkU2VydmljZVByaW5jaXBhbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgb3JnU2VydmljZUFjY2Vzc1Jlc3BvbnNlLkVuYWJsZWRTZXJ2aWNlUHJpbmNpcGFscztcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3JnU2VydmljZSBvZiBvcmdTZXJ2aWNlQWNjZXNzUmVzcG9uc2UuRW5hYmxlZFNlcnZpY2VQcmluY2lwYWxzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZm91bmRPcmdTZXJ2aWNlID0geyBzZXJ2aWNlOiBvcmdTZXJ2aWNlLlNlcnZpY2VQcmluY2lwYWwgPz8gXCJcIiB9O1xuICAgICAgICAgICAgICAgIGRpc2NvdmVyZWRPcmdTZXJ2aWNlcy5wdXNoKGZvdW5kT3JnU2VydmljZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIHNlcnZpY2UgYWNjZXNzOicsIGVycm9yKTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIG9yZ0NsaWVudC5kZXN0cm95KCk7XG4gICAgICAgIHJldHVybiBkaXNjb3ZlcmVkT3JnU2VydmljZXM7XG4gICAgfVxufVxuO1xuZXhwb3J0IGRlZmF1bHQgZ2V0RW5hYmxlZE9yZ1NlcnZpY2VzO1xuIiwiaW1wb3J0IHsgQ2xvdWRGb3JtYXRpb25DbGllbnQsIERlc2NyaWJlT3JnYW5pemF0aW9uc0FjY2Vzc0NvbW1hbmQsIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1jbG91ZGZvcm1hdGlvblwiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0T3JnQ2xvdWRGb3JtYXRpb24ocmVnaW9uKSB7XG4gICAgbGV0IG9yZ0NmblN0YXR1cyA9IHtcbiAgICAgICAgc3RhdHVzOiBcImRpc2FibGVkXCJcbiAgICB9O1xuICAgIGNvbnN0IGNsb3VkRm9ybWF0aW9uQ2xpZW50ID0gbmV3IENsb3VkRm9ybWF0aW9uQ2xpZW50KHsgcmVnaW9uIH0pO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGRlc2NyaWJlT3JnQWNjZXNzSW5wdXQgPSB7fTtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBEZXNjcmliZU9yZ2FuaXphdGlvbnNBY2Nlc3NDb21tYW5kKGRlc2NyaWJlT3JnQWNjZXNzSW5wdXQpO1xuICAgICAgICBjb25zdCBjbG91ZEZvcm1hdGlvbk9yZ0FjY2VzcyA9IGF3YWl0IGNsb3VkRm9ybWF0aW9uQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJDbG91ZEZvcm1hdGlvbiBhY3RpdmF0aW9uIHN0YXR1czogXCIsIGNsb3VkRm9ybWF0aW9uT3JnQWNjZXNzLlN0YXR1cylcbiAgICAgICAgb3JnQ2ZuU3RhdHVzLnN0YXR1cyA9IGNsb3VkRm9ybWF0aW9uT3JnQWNjZXNzLlN0YXR1cyA/PyBcImRpc2FibGVkXCI7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgICAgIC8vdGhyb3cgbmV3IEVycm9yKGBFcnJvcjogJHtlcnJvcn1gKTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIGNsb3VkRm9ybWF0aW9uQ2xpZW50LmRlc3Ryb3koKTtcbiAgICAgICAgcmV0dXJuIG9yZ0NmblN0YXR1cztcbiAgICB9XG59XG47XG5leHBvcnQgZGVmYXVsdCBnZXRPcmdDbG91ZEZvcm1hdGlvbjtcbiIsImltcG9ydCB7IENvbnRyb2xUb3dlckNsaWVudCwgTGlzdExhbmRpbmdab25lc0NvbW1hbmQsIEdldExhbmRpbmdab25lQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtY29udHJvbHRvd2VyXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRDb250cm9sVG93ZXIocmVnaW9uKSB7XG4gICAgbGV0IGNvbnRyb2xUb3dlckluZm8gPSB7fTtcbiAgICBjb25zdCBjb250cm9sVG93ZXJDbGllbnQgPSBuZXcgQ29udHJvbFRvd2VyQ2xpZW50KHsgcmVnaW9uIH0pO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgTGlzdExhbmRpbmdab25lc0NvbW1hbmQoe30pO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNvbnRyb2xUb3dlckNsaWVudC5zZW5kKGNvbW1hbmQpO1xuICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShyZXNwb25zZS5sYW5kaW5nWm9uZXMsIG51bGwsIDIpKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmxhbmRpbmdab25lcyAmJiByZXNwb25zZS5sYW5kaW5nWm9uZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSB7XG4gICAgICAgICAgICAgICAgbGFuZGluZ1pvbmVJZGVudGlmaWVyOiByZXNwb25zZS5sYW5kaW5nWm9uZXNbMF0uYXJuLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGx6UmVnaW9uID0gcmVzcG9uc2UubGFuZGluZ1pvbmVzWzBdLmFybj8udG9TdHJpbmcoKS5zcGxpdCgnOicpWzNdID8/IFwiXCI7XG4gICAgICAgICAgICBpZiAobHpSZWdpb24pIHtcbiAgICAgICAgICAgICAgICBjb250cm9sVG93ZXJJbmZvLmNvbnRyb2xUb3dlclJlZ2lvbiA9IGx6UmVnaW9uO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xUb3dlckNsaWVudFJlZ2lvbiA9IG5ldyBDb250cm9sVG93ZXJDbGllbnQoeyByZWdpb246IGx6UmVnaW9uIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgR2V0TGFuZGluZ1pvbmVDb21tYW5kKGlucHV0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBselJlc3BvbnNlID0gYXdhaXQgY29udHJvbFRvd2VyQ2xpZW50UmVnaW9uLnNlbmQoY29tbWFuZCk7XG4gICAgICAgICAgICAgICAgaWYgKGx6UmVzcG9uc2UubGFuZGluZ1pvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkobHpSZXNwb25zZS5sYW5kaW5nWm9uZSwgbnVsbCwgMikpO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sVG93ZXJJbmZvLnN0YXR1cyA9IGx6UmVzcG9uc2UubGFuZGluZ1pvbmUuc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sVG93ZXJJbmZvLmxhdGVzdEF2YWlsYWJsZVZlcnNpb24gPSBselJlc3BvbnNlLmxhbmRpbmdab25lLmxhdGVzdEF2YWlsYWJsZVZlcnNpb247XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xUb3dlckluZm8uZGVwbG95ZWRWZXJzaW9uID0gbHpSZXNwb25zZS5sYW5kaW5nWm9uZS52ZXJzaW9uO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sVG93ZXJJbmZvLmRyaWZ0U3RhdHVzID0gbHpSZXNwb25zZS5sYW5kaW5nWm9uZS5kcmlmdFN0YXR1cz8uc3RhdHVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgY2hlY2tpbmcgQ29udHJvbCBUb3dlciBpbiAke3JlZ2lvbn06YCwgZXJyb3IpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgY29udHJvbFRvd2VyQ2xpZW50LmRlc3Ryb3koKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRyb2xUb3dlckluZm87XG59XG5leHBvcnQgZGVmYXVsdCBnZXRDb250cm9sVG93ZXI7XG4iLCJpbXBvcnQgeyBTU09BZG1pbkNsaWVudCwgTGlzdEluc3RhbmNlc0NvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LXNzby1hZG1pblwiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0SWRjSW5mbyhyZWdpb25MaXN0KSB7XG4gICAgbGV0IGlkY0RldGFpbHMgPSB7IGZvdW5kOiBmYWxzZSB9O1xuICAgIGZvciAoY29uc3QgcmVnaW9uIG9mIHJlZ2lvbkxpc3QpIHtcbiAgICAgICAgY29uc3Qgc3NvQWRtaW5DbGllbnQgPSBuZXcgU1NPQWRtaW5DbGllbnQoeyByZWdpb24gfSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzc29JbnB1dCA9IHtcbiAgICAgICAgICAgICAgICBNYXhSZXN1bHRzOiBOdW1iZXIoXCIxMDBcIilcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IExpc3RJbnN0YW5jZXNDb21tYW5kKHNzb0lucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IHNzb0luc3RhbmNlUmVzcG9uc2UgPSBhd2FpdCBzc29BZG1pbkNsaWVudC5zZW5kKGNvbW1hbmQpO1xuICAgICAgICAgICAgaWYgKHNzb0luc3RhbmNlUmVzcG9uc2UuSW5zdGFuY2VzICYmIHNzb0luc3RhbmNlUmVzcG9uc2UuSW5zdGFuY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzc29JbnN0YW5jZSA9IHNzb0luc3RhbmNlUmVzcG9uc2UuSW5zdGFuY2VzWzBdO1xuICAgICAgICAgICAgICAgIGlkY0RldGFpbHMuZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlkY0RldGFpbHMucmVnaW9uID0gcmVnaW9uO1xuICAgICAgICAgICAgICAgIGlkY0RldGFpbHMuYXJuID0gc3NvSW5zdGFuY2UuSW5zdGFuY2VBcm47XG4gICAgICAgICAgICAgICAgaWRjRGV0YWlscy5pZCA9IHNzb0luc3RhbmNlLklkZW50aXR5U3RvcmVJZDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBsb29raW5nIGZvciBBV1MgSWRlbnRpdHkgQ2VudGVyIGRldGFpbHMgaW4gcmVnaW9uICR7cmVnaW9ufWApO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgc3NvQWRtaW5DbGllbnQuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpZGNEZXRhaWxzO1xufVxuO1xuZXhwb3J0IGRlZmF1bHQgZ2V0SWRjSW5mbztcbiIsImltcG9ydCB7IE9yZ2FuaXphdGlvbnNDbGllbnQsIExpc3REZWxlZ2F0ZWRBZG1pbmlzdHJhdG9yc0NvbW1hbmQsIExpc3REZWxlZ2F0ZWRTZXJ2aWNlc0ZvckFjY291bnRDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1vcmdhbml6YXRpb25zXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRPcmdEYUFjY291bnRzKCkge1xuICAgIGxldCBvcmdEYURldGFpbHMgPSBbXTtcbiAgICBjb25zdCBvcmdDbGllbnQgPSBuZXcgT3JnYW5pemF0aW9uc0NsaWVudCh7IHJlZ2lvbjogJ3VzLWVhc3QtMScgfSk7XG4gICAgbGV0IG9yZ0RhRGV0YWlsID0ge307XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBMaXN0RGVsZWdhdGVkQWRtaW5pc3RyYXRvcnNDb21tYW5kKHt9KTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcmdDbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLkRlbGVnYXRlZEFkbWluaXN0cmF0b3JzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGRhIG9mIHJlc3BvbnNlLkRlbGVnYXRlZEFkbWluaXN0cmF0b3JzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXQgPSB7IEFjY291bnRJZDogZGEuSWQgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IExpc3REZWxlZ2F0ZWRTZXJ2aWNlc0ZvckFjY291bnRDb21tYW5kKGlucHV0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBhY2NvdW50UmVzcG9uc2UgPSBhd2FpdCBvcmdDbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICAgICAgICAgICAgICBpZiAoYWNjb3VudFJlc3BvbnNlLkRlbGVnYXRlZFNlcnZpY2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIG9yZ0RhRGV0YWlsID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZXM6IGFjY291bnRSZXNwb25zZS5EZWxlZ2F0ZWRTZXJ2aWNlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lOiBkYS5OYW1lXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIG9yZ0RhRGV0YWlscy5wdXNoKG9yZ0RhRGV0YWlsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBsb29raW5nIGZvciBkZWxlZ2F0ZWQgc2VydmljZXMuYCk7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBvcmdDbGllbnQuZGVzdHJveSgpO1xuICAgIH1cbiAgICByZXR1cm4gb3JnRGFEZXRhaWxzO1xufVxuO1xuZXhwb3J0IGRlZmF1bHQgZ2V0T3JnRGFBY2NvdW50cztcbiIsImltcG9ydCB7IE9yZ2FuaXphdGlvbnNDbGllbnQsIExpc3RBY2NvdW50c0NvbW1hbmQgfSBmcm9tICdAYXdzLXNkay9jbGllbnQtb3JnYW5pemF0aW9ucyc7XG5hc3luYyBmdW5jdGlvbiBnZXRPcmdNZW1iZXJBY2NvdW50cygpIHtcbiAgICBsZXQgb3JnTWVtYmVyQWNjb3VudEluZm8gPSBbXTtcbiAgICBjb25zdCBvcmdzQ2xpZW50ID0gbmV3IE9yZ2FuaXphdGlvbnNDbGllbnQoeyByZWdpb246ICd1cy1lYXN0LTEnIH0pO1xuICAgIGNvbnN0IGlucHV0ID0ge1xuICAgICAgICBNYXhSZXN1bHRzOiBOdW1iZXIoXCIyMDAwXCIpLFxuICAgIH07XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcmdzQ2xpZW50LnNlbmQobmV3IExpc3RBY2NvdW50c0NvbW1hbmQoaW5wdXQpKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLkFjY291bnRzICYmIHJlc3BvbnNlLkFjY291bnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYWNjb3VudCBvZiByZXNwb25zZS5BY2NvdW50cykge1xuICAgICAgICAgICAgICAgIGxldCBvcmdNZW1iZXJBY2NvdW50ID0ge1xuICAgICAgICAgICAgICAgICAgICBhY2NvdW50TmFtZTogYWNjb3VudC5OYW1lLFxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50RW1haWw6IGFjY291bnQuRW1haWwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBvcmdNZW1iZXJBY2NvdW50SW5mby5wdXNoKG9yZ01lbWJlckFjY291bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsaXN0aW5nIEFXUyBhY2NvdW50czonLCBlcnJvcik7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBvcmdzQ2xpZW50LmRlc3Ryb3koKTtcbiAgICB9XG4gICAgcmV0dXJuIG9yZ01lbWJlckFjY291bnRJbmZvO1xufVxuZXhwb3J0IGRlZmF1bHQgZ2V0T3JnTWVtYmVyQWNjb3VudHM7XG4iLCJpbXBvcnQgeyBPcmdhbml6YXRpb25zQ2xpZW50LCBMaXN0T3JnYW5pemF0aW9uYWxVbml0c0ZvclBhcmVudENvbW1hbmQsIExpc3RBY2NvdW50c0ZvclBhcmVudENvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LW9yZ2FuaXphdGlvbnNcIjtcbmFzeW5jIGZ1bmN0aW9uIGdldE9yZ1RvcExldmVsT3VzKHJlZ2lvbiwgcm9vdE91SWQpIHtcbiAgICBjb25zdCBvcmdDbGllbnQgPSBuZXcgT3JnYW5pemF0aW9uc0NsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICBsZXQgdG9wTGV2ZWxPdXMgPSBbXTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBsaXN0T1VzQ29tbWFuZCA9IG5ldyBMaXN0T3JnYW5pemF0aW9uYWxVbml0c0ZvclBhcmVudENvbW1hbmQoe1xuICAgICAgICAgICAgUGFyZW50SWQ6IHJvb3RPdUlkLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbGlzdE9Vc1Jlc3BvbnNlID0gYXdhaXQgb3JnQ2xpZW50LnNlbmQobGlzdE9Vc0NvbW1hbmQpO1xuICAgICAgICBpZiAobGlzdE9Vc1Jlc3BvbnNlLk9yZ2FuaXphdGlvbmFsVW5pdHMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3Ugb2YgbGlzdE9Vc1Jlc3BvbnNlLk9yZ2FuaXphdGlvbmFsVW5pdHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgdG9wTGV2ZWxPdSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IG91LklkLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBvdS5OYW1lXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBhY2NvdW50UmVzcG9uc2UgPSBhd2FpdCBvcmdDbGllbnQuc2VuZChuZXcgTGlzdEFjY291bnRzRm9yUGFyZW50Q29tbWFuZCh7IFBhcmVudElkOiBvdS5JZCB9KSk7XG4gICAgICAgICAgICAgICAgaWYgKGFjY291bnRSZXNwb25zZS5BY2NvdW50cyAmJiBhY2NvdW50UmVzcG9uc2UuQWNjb3VudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0b3BMZXZlbE91LmFjY291bnRzID0gYWNjb3VudFJlc3BvbnNlLkFjY291bnRzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0b3BMZXZlbE91cy5wdXNoKHRvcExldmVsT3UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBzZXJ2aWNlIGFjY2VzczonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIG9yZ0NsaWVudC5kZXN0cm95KCk7XG4gICAgfVxuICAgIHJldHVybiB0b3BMZXZlbE91cztcbn1cbjtcbmV4cG9ydCBkZWZhdWx0IGdldE9yZ1RvcExldmVsT3VzO1xuIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJhc3luYyIsImRlcGxveU91VGFzayIsInRhc2tOdW1iZXIiLCJ3YXlwb2ludCIsIk91TmFtZSIsInJlbW92ZUlhbVVzZXJUYXNrIiwiSWFtVXNlck5hbWUiLCJyZW1vdmVJYW1Vc2VyQXBpS2V5VGFzayIsIklhbVVzZXJBcGlLZXlJZCIsImRlbGV0ZVZwYyIsInJlZ2lvbiIsImRlbGV0ZUVjMiIsImVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2UiLCJzZXJ2aWNlTmFtZSIsImRlbGVnYXRlQWRtaW5pc3RyYXRpb25Bd3NTZXJ2aWNlIiwiZW5hYmxlUG9saWN5VHlwZVRhc2siLCJwb2xpY3lUeXBlIiwicmVwb3J0RmlsZSIsImRhdGVUaW1lIiwiRGF0ZSIsInByb2Nlc3MiLCJlbnYiLCJBV1NfUkVHSU9OIiwiYWxsUmVnaW9ucyIsImVjMkNsaWVudCIsIkVDMkNsaWVudCIsImRlc2NyaWJlUmVnaW9uc0NvbW1hbmQiLCJEZXNjcmliZVJlZ2lvbnNDb21tYW5kIiwicmVzcG9uc2UiLCJzZW5kIiwicmVnaW9ucyIsIlJlZ2lvbnMiLCJwdXNoIiwiUmVnaW9uTmFtZSIsImVycm9yIiwiY29uc29sZSIsImRlc3Ryb3kiLCJsb2ciLCJhY2NvdW50VHlwZSIsIm9yZ2FuaXphdGlvbnNDbGllbnQiLCJPcmdhbml6YXRpb25zQ2xpZW50IiwiaXNJbk9yZ2FuaXphdGlvbiIsImlzTWFuYWdlbWVudEFjY291bnQiLCJjdXJyZW50QWNjb3VudElkIiwic3RzQ2xpZW50IiwiU1RTQ2xpZW50IiwiZ2V0Q2FsbGVySWRlbnRpdHlDb21tYW5kIiwiR2V0Q2FsbGVySWRlbnRpdHlDb21tYW5kIiwiQWNjb3VudCIsImdldEFjY291bnRJZCIsImRlc2NyaWJlT3JnYW5pemF0aW9uQ29tbWFuZCIsIkRlc2NyaWJlT3JnYW5pemF0aW9uQ29tbWFuZCIsImRlc2NyaWJlT3JnYW5pemF0aW9uUmVzcG9uc2UiLCJPcmdhbml6YXRpb24iLCJNYXN0ZXJBY2NvdW50SWQiLCJtYW5hZ2VtZW50QWNjb3VudElkIiwiZGVmaW5lQWNjb3VudFR5cGUiLCJ0b1VUQ1N0cmluZyIsImRpciIsImRlcHRoIiwiY29sb3JzIiwiaWFtVXNlclJlc3VsdCIsImlhbUNsaWVudCIsIklBTUNsaWVudCIsImlhbVVzZXJJbmZvIiwibGlzdFVzZXJzQ29tbWFuZCIsIkxpc3RVc2Vyc0NvbW1hbmQiLCJsaXN0VXNlcnNSZXNwb25zZSIsInVzZXIiLCJVc2VycyIsInVzZXJOYW1lIiwiVXNlck5hbWUiLCJsaXN0QWNjZXNzS2V5c0NvbW1hbmQiLCJMaXN0QWNjZXNzS2V5c0NvbW1hbmQiLCJhY2Nlc3NLZXlzIiwiQWNjZXNzS2V5TWV0YWRhdGEiLCJsZW5ndGgiLCJhY2Nlc3NLZXkiLCJhY2Nlc3NLZXlJZCIsIkFjY2Vzc0tleUlkIiwiZ2V0TGFzdFVzZWRDb21tYW5kIiwiR2V0QWNjZXNzS2V5TGFzdFVzZWRDb21tYW5kIiwibGFzdFVzZWRSZXNwb25zZSIsImZvdW5kVXNlckluZm8iLCJsYXN0VXNlZCIsIkFjY2Vzc0tleUxhc3RVc2VkIiwiTGFzdFVzZWREYXRlIiwiaWFtVXNlciIsImVjMkNoZWNrIiwiZWMyVmFsaWRhdGlvbiIsImNvbW1hbmQiLCJEZXNjcmliZUluc3RhbmNlc0NvbW1hbmQiLCJSZXNlcnZhdGlvbnMiLCJlYzJGb3VuZCIsImZpbmQiLCJwYXJhbSIsImVjMiIsInZwY0NoZWNrIiwidnBjVmFsaWRhdGlvbiIsIkRlc2NyaWJlVnBjc0NvbW1hbmQiLCJWcGNzIiwidnBjRm91bmQiLCJ2cGNGaW5kIiwiY2xvdWRUcmFpbENoZWNrIiwiY2xvdWRUcmFpbFZhbGlkYXRpb24iLCJjbG91ZFRyYWlsQ2xpZW50IiwiQ2xvdWRUcmFpbENsaWVudCIsImNsb3VkVHJhaWxEZXNjcmliZUNvbW1hbmQiLCJEZXNjcmliZVRyYWlsc0NvbW1hbmQiLCJjbG91ZFRyYWlsUmVzcG9uc2UiLCJ0cmFpbExpc3QiLCJ0cmFpbCIsInRyYWlsSW5mbyIsIkhvbWVSZWdpb24iLCJ0cmFpbEZvdW5kIiwiaXNPcmdUcmFpbCIsIklzTXVsdGlSZWdpb25UcmFpbCIsImlzTXVsdGlSZWdpb24iLCJjb25maWdDaGVjayIsImNvbmZpZ0RldGFpbHMiLCJjb25maWdTZXJ2aWNlQ2xpZW50IiwiQ29uZmlnU2VydmljZUNsaWVudCIsImNvbmZpZ0RldGFpbCIsImNvbmZpZ1JlY29yZGVyRm91bmQiLCJjb25maWdEZWxpdmVyeUNoYW5uZWxGb3VuZCIsInJlY29yZGVyUmVzcG9uc2UiLCJEZXNjcmliZUNvbmZpZ3VyYXRpb25SZWNvcmRlclN0YXR1c0NvbW1hbmQiLCJDb25maWd1cmF0aW9uUmVjb3JkZXJzU3RhdHVzIiwiY2hhbm5lbFJlc3BvbnNlIiwiRGVzY3JpYmVEZWxpdmVyeUNoYW5uZWxzQ29tbWFuZCIsIkRlbGl2ZXJ5Q2hhbm5lbHMiLCJjb25maWdGaW5kIiwib3JnRGV0YWlscyIsIm9yZ0NsaWVudCIsIm9yZ0Rlc2NyaWJlQ29tbWFuZCIsIm9yZ0RhdGEiLCJpZCIsIklkIiwiYXJuIiwiQXJuIiwiTGlzdFJvb3RzQ29tbWFuZCIsInJvb3RzIiwiUm9vdHMiLCJyb290T3VJZCIsImxlZ2FjeUN1ckNoZWNrIiwiY3VyQ2xpZW50IiwiQ29zdEFuZFVzYWdlUmVwb3J0U2VydmljZUNsaWVudCIsImlzTGVnYWN5Q3VyU2V0dXAiLCJpbnB1dCIsIkRlc2NyaWJlUmVwb3J0RGVmaW5pdGlvbnNDb21tYW5kIiwiUmVwb3J0RGVmaW5pdGlvbnMiLCJlbmFibGVPcmdQb2xpY2llc0NoZWNrIiwicG9saWN5VHlwZXNFbmFibGVkIiwic2NwRW5hYmxlZCIsInRhZ1BvbGljeUVuYWJsZWQiLCJiYWNrdXBQb2xpY3lFbmFibGVkIiwiUG9saWN5VHlwZXMiLCJlbmFibGVkUG9saWN5IiwiVHlwZSIsIlN0YXR1cyIsIm9yZ0VuYWJsZWRTZXJ2aWNlcyIsImRpc2NvdmVyZWRPcmdTZXJ2aWNlcyIsIm9yZ1NlcnZpY2VBY2Nlc3NDb21tYW5kIiwiTGlzdEFXU1NlcnZpY2VBY2Nlc3NGb3JPcmdhbml6YXRpb25Db21tYW5kIiwib3JnU2VydmljZUFjY2Vzc1Jlc3BvbnNlIiwiRW5hYmxlZFNlcnZpY2VQcmluY2lwYWxzIiwib3JnU2VydmljZSIsImZvdW5kT3JnU2VydmljZSIsInNlcnZpY2UiLCJTZXJ2aWNlUHJpbmNpcGFsIiwiY2ZuT3JnU3RhdHVzIiwib3JnQ2ZuU3RhdHVzIiwic3RhdHVzIiwiY2xvdWRGb3JtYXRpb25DbGllbnQiLCJDbG91ZEZvcm1hdGlvbkNsaWVudCIsImRlc2NyaWJlT3JnQWNjZXNzSW5wdXQiLCJEZXNjcmliZU9yZ2FuaXphdGlvbnNBY2Nlc3NDb21tYW5kIiwiY2xvdWRGb3JtYXRpb25PcmdBY2Nlc3MiLCJjb250cm9sVG93ZXJEZXRhaWxzIiwiY29udHJvbFRvd2VySW5mbyIsImNvbnRyb2xUb3dlckNsaWVudCIsIkNvbnRyb2xUb3dlckNsaWVudCIsIkxpc3RMYW5kaW5nWm9uZXNDb21tYW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsImxhbmRpbmdab25lcyIsImxhbmRpbmdab25lSWRlbnRpZmllciIsImx6UmVnaW9uIiwidG9TdHJpbmciLCJzcGxpdCIsImNvbnRyb2xUb3dlclJlZ2lvbiIsImNvbnRyb2xUb3dlckNsaWVudFJlZ2lvbiIsIkdldExhbmRpbmdab25lQ29tbWFuZCIsImx6UmVzcG9uc2UiLCJsYW5kaW5nWm9uZSIsImxhdGVzdEF2YWlsYWJsZVZlcnNpb24iLCJkZXBsb3llZFZlcnNpb24iLCJ2ZXJzaW9uIiwiZHJpZnRTdGF0dXMiLCJpZGNJbmZvcm1hdGlvbiIsInJlZ2lvbkxpc3QiLCJpZGNEZXRhaWxzIiwiZm91bmQiLCJzc29BZG1pbkNsaWVudCIsIlNTT0FkbWluQ2xpZW50Iiwic3NvSW5wdXQiLCJNYXhSZXN1bHRzIiwiTnVtYmVyIiwiTGlzdEluc3RhbmNlc0NvbW1hbmQiLCJzc29JbnN0YW5jZVJlc3BvbnNlIiwiSW5zdGFuY2VzIiwic3NvSW5zdGFuY2UiLCJJbnN0YW5jZUFybiIsIklkZW50aXR5U3RvcmVJZCIsIm9yZ0RlbEFkbWluRGV0YWlscyIsIm9yZ0RhRGV0YWlscyIsIm9yZ0RhRGV0YWlsIiwiTGlzdERlbGVnYXRlZEFkbWluaXN0cmF0b3JzQ29tbWFuZCIsIkRlbGVnYXRlZEFkbWluaXN0cmF0b3JzIiwiZGEiLCJBY2NvdW50SWQiLCJMaXN0RGVsZWdhdGVkU2VydmljZXNGb3JBY2NvdW50Q29tbWFuZCIsImFjY291bnRSZXNwb25zZSIsIkRlbGVnYXRlZFNlcnZpY2VzIiwic2VydmljZXMiLCJhY2NvdW50TmFtZSIsIk5hbWUiLCJvcmdNZW1iZXJBY2NvdW50RGV0YWlscyIsIm9yZ01lbWJlckFjY291bnRJbmZvIiwib3Jnc0NsaWVudCIsIkxpc3RBY2NvdW50c0NvbW1hbmQiLCJBY2NvdW50cyIsImFjY291bnQiLCJvcmdNZW1iZXJBY2NvdW50IiwiYWNjb3VudEVtYWlsIiwiRW1haWwiLCJtZ3RUYXNrTnVtYmVyIiwibWFuYWdlbWVudEFjY291bnRXYXlwb2ludCIsIm1lc3NhZ2UiLCJjdEZpbmQiLCJnb3ZXYXlwb2ludCIsImdvdlRhc2tOdW1iZXIiLCJmaW5UYXNrTnVtYmVyIiwiZmluV2F5cG9pbnQiLCJ0cmFuc2l0aW9uYWxGb3VuZCIsInN1c3BlbmRlZEZvdW5kIiwid29ya2xvYWRzRm91bmQiLCJzZWN1cml0eUZvdW5kIiwib3JnT3VzIiwidG9wTGV2ZWxPdXMiLCJsaXN0T1VzQ29tbWFuZCIsIkxpc3RPcmdhbml6YXRpb25hbFVuaXRzRm9yUGFyZW50Q29tbWFuZCIsIlBhcmVudElkIiwibGlzdE9Vc1Jlc3BvbnNlIiwiT3JnYW5pemF0aW9uYWxVbml0cyIsIm91IiwidG9wTGV2ZWxPdSIsIm5hbWUiLCJMaXN0QWNjb3VudHNGb3JQYXJlbnRDb21tYW5kIiwiYWNjb3VudHMiLCJ0b0xvd2VyQ2FzZSIsIm1lbWJlckFjY291bnQiLCJpZGVudGl0eURlbGVnYXRlZCIsInNlY3VyaXR5SHViRGVsZWdhdGVkIiwiZ3VhcmREdXR5RGVsZWdhdGVkIiwiY29uZmlnRGVsZWdhdGVkIiwiaWFtQWNjZXNzQW5hbHl6ZXJEZWxlZ2F0ZWQiLCJzM1N0b3JhZ2VMZW5zRGVsZWdhdGVkIiwiaXBhbURlbGVnYXRlZCIsImFjY291bnREZWxlZ2F0ZWQiLCJiYWNrdXBEZWxlZ2F0ZWQiLCJzcnYiLCJtYXNUYXNrTnVtYmVyIiwibWFzV2F5cG9pbnQiLCJselRhc2tOdW1iZXIiLCJseldheXBvaW50IiwidW5kZWZpbmVkIiwiY3VycmVudFZlcnNpb24iLCJsYXRlc3RWZXJzaW9uIiwic3NvVGFza051bWJlciIsInNzb1dheXBvaW50Iiwic2VjVGFza051bWJlciIsInNlY1dheXBvaW50IiwibmV0VGFza051bWJlciIsIm5ldHdvcmtXYXlwb2ludCIsIm5ldEd1YXJkRHV0eUVuYWJsZU1lc3NhZ2UiLCJvYlRhc2tOdW1iZXIiLCJvYldheXBvaW50IiwiYmFja1Rhc2tOdW1iZXIiLCJiYWNrdXBXYXlwb2ludCIsIndhcm4iLCJtYWluIl0sInNvdXJjZVJvb3QiOiIifQ==