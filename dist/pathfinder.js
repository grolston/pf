(()=>{"use strict";const n=require("@aws-sdk/client-sts"),e=require("@aws-sdk/client-organizations"),a=require("@aws-sdk/client-iam"),i=require("@aws-sdk/client-cloudformation"),o=require("@aws-sdk/client-sso-admin"),c=require("@aws-sdk/client-ec2"),t=require("@aws-sdk/client-cloudtrail"),s=require("@aws-sdk/client-config-service"),r=require("@aws-sdk/client-controltower"),l=require("@aws-sdk/client-cost-and-usage-report-service");async function d(n,e,a){return`${e} - Task ${n} - Deploy top-level OU ${a}.`}async function p(n,e,a){return`${e} - Task ${n} - Remove IAM user ${a}`}async function y(n,e,a,i){return`${e} - Task ${n} - Remove IAM user ${a} API key: ${i}`}async function S(n,e,a){return`${e} - Task ${n} - Delete VPC in the ${a} region.`}async function u(n,e,a){return`${e} - Task ${n} - Delete VPC in the ${a} region.`}async function f(n,e,a){return`${e} - Task ${n} - Enable the AWS service ${a} within your AWS Organization`}async function g(n,e,a){return`${e} - Task ${n} - Delegate the AWS service ${a} within your AWS Organization to a member account`}async function A(n,e,a){return`${e} - Task ${n} - Enable the policy type ${a} within your AWS Organization.`}const F=require("fs");(async()=>{const w="./Pathfinder.txt";let m=new Date;const C=process.env.AWS_REGION||"us-east-1",E=await async function(){const n=new c.EC2Client({region:"us-east-1"});try{const e=new c.DescribeRegionsCommand({}),a=await n.send(e),i=[];for(const n of a.Regions||[])i.push(n.RegionName||"");return i}catch(n){return console.error("Error retrieving regions:",n),[]}finally{n.destroy()}}();console.log("Discovering your AWS environment....");const I=await(async a=>{const i=new e.OrganizationsClient({region:a});let o=!1,c=!1;try{const t=await async function(e){const a=new n.STSClient({region:e});try{const e=new n.GetCallerIdentityCommand({});return(await a.send(e)).Account}catch(n){throw console.error("Error getting account ID:",n),n}}(a);if(t){const n=new e.DescribeOrganizationCommand({}),a=await i.send(n);if(a.Organization?.MasterAccountId){const n=a.Organization?.MasterAccountId;n==t?(c=!0,o=!0):o=!0}else o=!1}}catch(n){console.error("Error:",n)}finally{i.destroy()}return{isInOrganization:o,isManagementAccount:c}})(C);F.writeFileSync(w,"Cloud Foundations - Pathfinder"),F.appendFileSync(w,`\nGenerated on: ${m.toUTCString()} \n\n`),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n                   MANAGEMENT ACCOUNT"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nAWS ACCOUNT TYPE\n"),I&&(console.dir(I,{depth:null,colors:!0}),F.appendFileSync(w,`\n  Is in AWS Organization: ${I.isInOrganization}`),F.appendFileSync(w,`\n  Assessing AWS Management Account: ${I.isManagementAccount}`)),console.log("Discovering IAM Users....");const $=await(async()=>{const n=new a.IAMClient({region:"us-east-1"}),e=[];try{const i=new a.ListUsersCommand({}),o=await n.send(i);for(const i of o.Users||[]){const o=i.UserName||"",c=new a.ListAccessKeysCommand({UserName:o}),t=(await n.send(c)).AccessKeyMetadata||[];if(t.length>0)for(const i of t){const c=i.AccessKeyId||"",t=new a.GetAccessKeyLastUsedCommand({AccessKeyId:c}),s=await n.send(t),r={userName:o,accessKeyId:c,lastUsed:s&&s.AccessKeyLastUsed&&`${s.AccessKeyLastUsed.LastUsedDate}`||"Not available"};e.push(r)}else{const n={userName:o};e.push(n)}}}catch(n){console.error("Error:",n)}finally{n.destroy()}return e})();if(F.appendFileSync(w,"\n\nIAM USERS CHECK\n"),$&&$.length>0){console.dir($,{depth:null,colors:!0});for(const n of $)F.appendFileSync(w,`\n  IAM User: ${n.userName}`),n.accessKeyId&&F.appendFileSync(w,`\n    User API Key ID: ${n.accessKeyId}`),F.appendFileSync(w,"\n")}else F.appendFileSync(w,"\n  No IAM Users found.");console.log("Discovering EC2 instances across all AWS Regions....");const N=await async function(n){let e=[];for(const a of n){const n=new c.EC2Client({region:a}),i=new c.DescribeInstancesCommand({});try{const o=await n.send(i);if(o.Reservations)if(o.Reservations.length>0){const n={region:a,ec2Found:!0};e.push(n)}else{const n={region:a,ec2Found:!1};e.push(n)}else{const n={region:a,ec2Found:!1};e.push(n)}}catch(n){console.log(`Error checking instance: ${n}`)}finally{n.destroy()}}return e}(E);if(F.appendFileSync(w,"\n\nEC2 INSTANCE CHECK\n"),N&&N.find((n=>!0===n.ec2Found))){console.dir(N,{depth:null,colors:!0});for(const n of N)n.ec2Found&&F.appendFileSync(w,`\n  ${n.region} - found EC2 Instance(s).`)}else F.appendFileSync(w,"\n  No EC2 instances found.");console.log("Discovering VPCs across all AWS Regions....");const O=await async function(n){let e=[];for(const a of n){const n=new c.EC2Client({region:a}),i=new c.DescribeVpcsCommand({});try{const o=await n.send(i);if(o.Vpcs)if(o.Vpcs.length>0){const n={region:a,vpcFound:!0};e.push(n)}else{const n={region:a,vpcFound:!1};e.push(n)}else{const n={region:a,vpcFound:!1};e.push(n)}}catch(n){console.log(`Error checking instance: ${n}`)}finally{n.destroy()}}return e}(E);if(F.appendFileSync(w,"\n\nVPC CHECK\n"),O&&O.length>0){console.dir(O,{depth:null,colors:!0});for(const n of O)n.vpcFound&&F.appendFileSync(w,`\n  ${n.region} - found VPC(s).`)}else F.appendFileSync(w,"\n  No VPCs found.");console.log("Discovering AWS Config configurations across all AWS Regions....");const T=await async function(n){let e=[];for(const a of n){const n=new t.CloudTrailClient({region:a}),i=new t.DescribeTrailsCommand({});try{const o=await n.send(i);if(o.trailList)for(const n of o.trailList){let i={};i=n.HomeRegion==a?{region:a,trailFound:!0,isOrgTrail:n.IsMultiRegionTrail,isMultiRegion:n.IsMultiRegionTrail}:{region:a,trailFound:!1},e.push(i)}}catch(n){console.log(`Error checking instance: ${n}`)}finally{n.destroy()}}return e}(E),h=await async function(n){let e=[];for(const a of n){const n=new s.ConfigServiceClient({region:a});let i={region:a,configRecorderFound:!1,configDeliveryChannelFound:!1};try{const a=await n.send(new s.DescribeConfigurationRecorderStatusCommand({}));0!==a.ConfigurationRecordersStatus?.length&&(i.configRecorderFound=!0);const o=await n.send(new s.DescribeDeliveryChannelsCommand({}));0!==o.DeliveryChannels?.length&&(i.configDeliveryChannelFound=!0),e.push(i)}catch(n){console.error(`Error checking AWS Config in ${a}:`,n)}finally{n.destroy()}}return e}(E);if(F.appendFileSync(w,"\n\nAWS CONFIG CHECK\n"),h&&h.find((n=>!0===n.configRecorderFound))){console.dir(h,{depth:null,colors:!0});for(const n of h)n.configRecorderFound&&F.appendFileSync(w,`\n  ${n.region} - Config Recorder found`),n.configDeliveryChannelFound&&F.appendFileSync(w,`\n  ${n.region} - Config Delivery Channel found`)}else F.appendFileSync(w,"\n  No AWS Config resource discovered");if(I.isInOrganization&&I.isManagementAccount){const n=await async function(n){const a=new e.OrganizationsClient({region:n});let i={};try{const n=new e.DescribeOrganizationCommand({}),o=await a.send(n);o.Organization&&(i.id=o.Organization.Id??"",i.arn=o.Organization.Arn??"");const c=new e.ListRootsCommand({}),t=await a.send(c);t.Roots?i.rootOuId=t.Roots[0].Id:console.log("No info found for your AWS Organization.")}catch(n){console.error(`An error occurred: ${n}`)}finally{return a.destroy(),i}}("us-east-1");console.dir(n,{depth:null,colors:!0});const a=await(async n=>{const e=new l.CostAndUsageReportServiceClient({region:n});let a=!1;try{const n={},i=new l.DescribeReportDefinitionsCommand(n),o=await e.send(i);return o.ReportDefinitions&&o.ReportDefinitions.length>0&&(a=!0),{isLegacyCurSetup:a}}catch(n){return console.error(`Error: ${n}`),a=!1,{isLegacyCurSetup:a}}finally{e.destroy()}})("us-east-1"),c=await async function(n){const a=new e.OrganizationsClient({region:n});let i={scpEnabled:!1,tagPolicyEnabled:!1,backupPolicyEnabled:!1};try{const n={},o=new e.ListRootsCommand(n),c=await a.send(o);if(c.Roots&&c.Roots[0].PolicyTypes)for(const n of c.Roots[0].PolicyTypes)"SERVICE_CONTROL_POLICY"==n.Type&&"ENABLED"==n.Status&&(i.scpEnabled=!0),"TAG_POLICY"==n.Type&&"ENABLED"==n.Status&&(i.tagPolicyEnabled=!0),"BACKUP_POLICY"==n.Type&&"ENABLED"==n.Status&&(i.backupPolicyEnabled=!0)}catch(n){console.error(`An error occurred: ${n}`)}finally{return a.destroy(),i}}("us-east-1");console.dir(c,{depth:null,colors:!0});const t=await async function(n){const a=[],i=new e.OrganizationsClient({region:n});try{const n=new e.ListAWSServiceAccessForOrganizationCommand({}),o=await i.send(n);if(o.EnabledServicePrincipals&&o.EnabledServicePrincipals.length>0){o.EnabledServicePrincipals;for(const n of o.EnabledServicePrincipals){const e={service:n.ServicePrincipal??""};a.push(e)}}}catch(n){console.error("Error checking service access:",n)}finally{return i.destroy(),a}}("us-east-1");console.dir(t,{depth:null,colors:!0});const s=await async function(n){let e={status:"disabled"};const a=new i.CloudFormationClient({region:n});try{const n={},o=new i.DescribeOrganizationsAccessCommand(n),c=await a.send(o);e.status=c.Status??"disabled"}catch(n){console.log(`Error: ${n}`)}finally{return a.destroy(),e}}(C);console.dir(s,{depth:null,colors:!0});const m=await async function(n){let e={};const a=new r.ControlTowerClient({region:n});try{const n=new r.ListLandingZonesCommand({}),i=await a.send(n);if(console.log(JSON.stringify(i.landingZones,null,2)),i.landingZones&&i.landingZones.length>0){const n={landingZoneIdentifier:i.landingZones[0].arn},a=i.landingZones[0].arn?.toString().split(":")[3]??"";if(a){e.controlTowerRegion=a;const i=new r.ControlTowerClient({region:a}),o=new r.GetLandingZoneCommand(n),c=await i.send(o);c.landingZone&&(console.log(JSON.stringify(c.landingZone,null,2)),e.status=c.landingZone.status,e.latestAvailableVersion=c.landingZone.latestAvailableVersion,e.deployedVersion=c.landingZone.version,e.driftStatus=c.landingZone.driftStatus?.status)}}}catch(e){console.error(`Error checking Control Tower in ${n}:`,e)}finally{a.destroy()}return e}(C),I=await async function(n){let e={found:!1};for(const a of n){const n=new o.SSOAdminClient({region:a});try{const i={MaxResults:Number("100")},c=new o.ListInstancesCommand(i),t=await n.send(c);if(t.Instances&&t.Instances.length>0){const n=t.Instances[0];e.found=!0,e.region=a,e.arn=n.InstanceArn,e.id=n.IdentityStoreId;break}}catch(n){console.log(`Error looking for AWS Identity Center details in region ${a}`)}finally{n.destroy()}}return e}(E);console.dir(I,{depth:null,colors:!0});const h=await async function(){let n=[];const a=new e.OrganizationsClient({region:"us-east-1"});let i={};try{const o=new e.ListDelegatedAdministratorsCommand({}),c=await a.send(o);if(c.DelegatedAdministrators)for(const o of c.DelegatedAdministrators){const c={AccountId:o.Id},t=new e.ListDelegatedServicesForAccountCommand(c),s=await a.send(t);s.DelegatedServices&&(i={services:s.DelegatedServices,accountName:o.Name},n.push(i))}}catch(n){console.log("Error looking for delegated services.")}finally{a.destroy()}return n}();console.dir(h,{depth:null,colors:!0});const v=await async function(){let n=[];const a=new e.OrganizationsClient({region:"us-east-1"});try{const i=await a.send(new e.ListAccountsCommand({}));if(i.Accounts&&i.Accounts.length>0)for(const e of i.Accounts){let a={accountName:e.Name,accountEmail:e.Email};n.push(a)}}catch(n){console.error("Error listing AWS accounts:",n)}finally{a.destroy()}return n}();console.dir(v,{depth:null,colors:!0}),F.appendFileSync(w,"\n\nMANAGEMENT ACCOUNT RECOMMENDED TASKS:");let R=1;const D="Management Account";if($&&$.length>0)for(const n of $){const e=await p(R,D,n.userName);if(F.appendFileSync(w,`\n  ${e}`),R++,n.accessKeyId){const e=await y(R,D,n.userName,n.accessKeyId);F.appendFileSync(w,`\n  ${e}`),R++}}if(N&&N.find((n=>!0===n.ec2Found)))for(const n of N)if(n.ec2Found&&n.region){const e=await u(R,D,n.region);F.appendFileSync(w,`\n  ${e}`),R++}if(O&&O.length>0)for(const n of O)if(n.vpcFound&&n.region){const e=await S(R,D,n.region);F.appendFileSync(w,`\n  ${e}`),R++}if(F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                    GOVERNANCE"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nAWS ORGANIZATION POLICY TYPES\n"),F.appendFileSync(w,`\n  Service Control Policies (SCP) enabled: ${c.scpEnabled}`),F.appendFileSync(w,`\n  Tag Policies enabled: ${c.tagPolicyEnabled}`),F.appendFileSync(w,`\n  Backup Policies enabled: ${c.backupPolicyEnabled}`),F.appendFileSync(w,"\n\nAWS ORGANIZATION CLOUDFORMATION\n"),F.appendFileSync(w,`\n  AWS CloudFormation Organization stack sets status : ${s.status}`),F.appendFileSync(w,"\n\nCLOUDTRAIL CHECK\n"),T&&T.length>0){console.dir(T,{depth:null,colors:!0});for(const n of T)n.trailFound&&(F.appendFileSync(w,`\n  CloudTrail found in ${n.region}`),F.appendFileSync(w,`\n    Is Organization Trail: ${n.isOrgTrail}`),F.appendFileSync(w,`\n    Is MultiRegion: ${n.isMultiRegion}`),F.appendFileSync(w,"\n"))}else F.appendFileSync(w,"\n  No AWS CloudTrail resource discovered");F.appendFileSync(w,"\n\nGOVERNANCE SERVICES ENABLED IN AWS ORGANIZATION:\n"),t.find((n=>"cloudtrail.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  AWS CloudTrail"),t.find((n=>"config.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  AWS Config"),F.appendFileSync(w,"\n\nGOVERNANCE RECOMMENDED TASKS:");const z="Governance";let W=1;if(!t.find((n=>"cloudtrail.amazonaws.com"===n.service))){const n=await f(W,z,"AWS CloudTrail");F.appendFileSync(w,`\n  ${n}`),W++}if(!t.find((n=>"config.amazonaws.com"===n.service))){const n=await f(W,z,"AWS Config");F.appendFileSync(w,`\n  ${n}`),W++}if(!c.scpEnabled){const n=await A(W,z,"Service Control Policy");F.appendFileSync(w,`\n  ${n}`),W++}if(!c.tagPolicyEnabled){const n=await A(W,z,"Tag Policy");F.appendFileSync(w,`\n  ${n}`),W++}if(!c.backupPolicyEnabled){const n=await A(W,z,"Backup Policy");F.appendFileSync(w,`\n  ${n}`),W++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                FINANCIAL MANAGEMENT"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nLegacy CUR"),F.appendFileSync(w,`\n  Is legacy CUR setup: ${a.isLegacyCurSetup}`),F.appendFileSync(w,"\n\nCLOUD FINANCIAL MANAGEMENT RECOMMENDED TASKS:");let b=1;const M="Cloud Financial Management";if(!a.isLegacyCurSetup){const n=await async function(n,e){return`${e} - Task ${n} - Enable and create a Cost and Utilization Report (CUR) in the billing console.`}(b,M);F.appendFileSync(w,`\n  ${n}`)}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                MULTI-ACCOUNT STRATEGY"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nAWS ORGANIZATION DETAILS\n"),F.appendFileSync(w,`\n  AWS Organization Id: ${n.id}`),F.appendFileSync(w,`\n  AWS Organization ARN: ${n.arn}`),F.appendFileSync(w,`\n  AWS Organization Root OU Id: ${n.rootOuId}`),F.appendFileSync(w,"\n\nAWS ORGANIZATION CLOUDFORMATION\n"),F.appendFileSync(w,`\n  AWS CloudFormation Organization stack sets status : ${s.status}`);let P,L,k,U=!1;if(n.rootOuId){const a=await async function(n,a){const i=new e.OrganizationsClient({region:n});let o=[];try{const n=new e.ListOrganizationalUnitsForParentCommand({ParentId:a}),c=await i.send(n);if(c.OrganizationalUnits)for(const n of c.OrganizationalUnits){let a={id:n.Id,name:n.Name};const c=await i.send(new e.ListAccountsForParentCommand({ParentId:n.Id}));c.Accounts&&c.Accounts.length>0&&(a.accounts=c.Accounts),o.push(a)}}catch(n){return console.error("Error checking service access:",n),[]}finally{i.destroy()}return o}("us-east-1",n.rootOuId);if(console.dir(a,{depth:null,colors:!0}),F.appendFileSync(w,"\n\nAWS ORGANIZATION TOP-LEVEL ORGANIZATION UNITS\n"),F.appendFileSync(w,"\n  List of Organization's top-level OUs and AWS accounts:"),a&&a.length>0)for(const n of a)if("suspended"===n.name?.toLowerCase()&&(L=!0),"transitional"===n.name?.toLowerCase()&&(P=!0),"workloads"===n.name?.toLowerCase()&&(k=!0),"security"===n.name?.toLowerCase()&&(U=!0),F.appendFileSync(w,`\n    Organizational Unit: ${n.name}`),F.appendFileSync(w,`\n      Organizational Unit Id: ${n.id}`),n.accounts&&n.accounts.length>0){F.appendFileSync(w,"\n      AWS Accounts:");for(const e of n.accounts)F.appendFileSync(w,`\n        ${e.Name}`);F.appendFileSync(w,"\n")}else F.appendFileSync(w,"\n      AWS Accounts: None"),F.appendFileSync(w,"\n");else F.appendFileSync(w,"\n  No top level OUs found.")}if(F.appendFileSync(w,"\n\nAWS ORGANIZATION MEMBER ACCOUNTS\n"),v&&v.length>0)for(const n of v)F.appendFileSync(w,`\n  Account: ${n.accountName}`),F.appendFileSync(w,`\n  Account Email: ${n.accountEmail}\n`);else F.appendFileSync(w,"No member accounts found which is amazing as this is running from one.");F.appendFileSync(w,"\n\nAWS ORGANIZATION ENABLED SERVICES\n"),F.appendFileSync(w,"\n  The following AWS Services are enabled within your AWS Organization:");for(const n of t)F.appendFileSync(w,`\n    ${n.service}`);let G=!1,K=!1,V=!1,Z=!1,B=!1,Y=!1,q=!1,H=!1,_=!1;if(F.appendFileSync(w,"\n\nAWS ORGANIZATION INTEGRATED SERVICE REGISTERED DELEGATED ADMINS\n"),h&&h.length>0)for(const n of h){if(F.appendFileSync(w,`\n  Account: ${n.accountName}`),n.services&&n.services.length>0){F.appendFileSync(w,"\n  Delegated Services:");for(const e of n.services)F.appendFileSync(w,`\n    ${e.ServicePrincipal}`),"securityhub.amazonaws.com"===e.ServicePrincipal&&(K=!0),"guardduty.amazonaws.com"===e.ServicePrincipal&&(V=!0),"sso.amazonaws.com"===e.ServicePrincipal&&(G=!0),"config.amazonaws.com"===e.ServicePrincipal&&(Z=!0),"access-analyzer.amazonaws.com"===e.ServicePrincipal&&(B=!0),"storage-lens.s3.amazonaws.com"===e.ServicePrincipal&&(Y=!0),"ipam.amazonaws.com"===e.ServicePrincipal&&(q=!0),"account.amazonaws.com"===e.ServicePrincipal&&(H=!0),"backup.amazonaws.com"===e.ServicePrincipal&&(_=!0)}F.appendFileSync(w,"\n ")}else F.appendFileSync(w,"\n  No delegated admin accounts in AWS Organization");F.appendFileSync(w,"\n\nMULTI-ACCOUNT STRATEGY RECOMMENDED TASKS:");let x=1,J="Multi-Account Strategy";const j=await async function(n,e){return`${e} - Task ${n} - Review and validate your email addresses and their domains for the root user administrator for management and all member accounts.`}(x,J);if(F.appendFileSync(w,`\n  ${j}`),x++,!c.scpEnabled){const n=await A(x,J,"Service Control Policy");F.appendFileSync(w,`\n  ${n}`),x++}if(!P){const n=await d(x,J,"Transitional");F.appendFileSync(w,`\n  ${n}`),x++}if(!L){const n=await d(x,J,"Suspended");F.appendFileSync(w,`\n  ${n}`),x++}if(!k){const n=await d(x,J,"Workloads");F.appendFileSync(w,`\n  ${n}`),x++}if(!U){const n=await d(x,J,"Security");F.appendFileSync(w,`\n  ${n}`),x++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                  LANDING ZONE"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nAWS CONTROL TOWER\n"),m.controlTowerRegion?(console.dir(m,{depth:null,colors:!0}),F.appendFileSync(w,`\n  Control Tower home region: ${m.controlTowerRegion}`),F.appendFileSync(w,`\n  Control Tower status: ${m.status}`),F.appendFileSync(w,`\n  Control Tower Landing Zone version: ${m.deployedVersion}`),F.appendFileSync(w,`\n  Latest available version: ${m.latestAvailableVersion}`),F.appendFileSync(w,`\n  Drift Status: ${m.driftStatus}`)):F.appendFileSync(w,"\n  AWS Control Tower is not deployed in the AWS Organization"),F.appendFileSync(w,"\n\nLANDING ZONE RECOMMENDED TASKS:");let Q=1;const X="Landing Zone";if(void 0===m.controlTowerRegion){const n=await async function(n,e){return`${e} - Task ${n} - Deploy AWS Control Tower in your home AWS Region.`}(Q,X);F.appendFileSync(w,`\n  ${n}`),Q++}if("DRIFTED"===m.driftStatus){const n=await async function(n,e){return`${e} - Task ${n} - Fix drift in deployed landing zone.`}(Q,X);F.appendFileSync(w,`\n  ${n}`),Q++}if(m.deployedVersion!==m.latestAvailableVersion){const n=m.deployedVersion??"",e=m.latestAvailableVersion??"",a=await async function(n,e,a,i){return`${e} - Task ${n} - Update your AWS Control Tower Landing Zone from ${a} to ${i}.`}(Q,X,n,e);F.appendFileSync(w,`\n  ${a}`),Q++}if(!t.find((n=>"member.org.stacksets.cloudformation.amazonaws.com"===n.service))){const n=await f(Q,X,"AWS CloudFormation");F.appendFileSync(w,`\n  ${n}`),Q++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                    IDENTITY"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nAWS IAM IDENTITY CENTER\n"),F.appendFileSync(w,`\n  IdC Region: ${I.region}`),F.appendFileSync(w,`\n  IdC ARN: ${I.arn}`),F.appendFileSync(w,`\n  IdC Instance Id: ${I.id}`),F.appendFileSync(w,"\n\nIDENTITY RECOMMENDED TASKS:");let nn=1;const en="Identity";if(!t.find((n=>"sso.amazonaws.com"===n.service))){const n=await f(nn,en,"AWS IAM Identity Center");F.appendFileSync(w,`\n  ${n}`),nn++}if(!G){const n=await g(nn,en,"AWS IAM Identity Center");F.appendFileSync(w,`\n  ${n}`),nn++}if(!c.scpEnabled){const n=await A(nn,en,"Service Control Policy");F.appendFileSync(w,`\n  ${n}`),nn++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                    SECURITY"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nAWS SECURITY SERVICES ENABLED IN AWS ORGANIZATION:\n"),t.find((n=>"guardduty.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  AWS GuardDuty"),t.find((n=>"securityhub.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  AWS Security Hub"),t.find((n=>"access-analyzer.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  IAM Access Analyzer"),t.find((n=>"macie.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  Macie"),t.find((n=>"storage-lens.s3.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  Amazon S3 Storage Lens"),t.find((n=>"inspector2.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  Amazon Inspector"),t.find((n=>"cloudtrail.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  AWS CloudTrail"),t.find((n=>"config.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  AWS Config"),F.appendFileSync(w,"\n\nSECURITY RECOMMENDED TASKS:");let an=1;const on="Security";if(!c.scpEnabled){const n=await A(an,on,"Service Control Policy");F.appendFileSync(w,`\n  ${n}`),an++}if(!t.find((n=>"guardduty.amazonaws.com"===n.service))){const n=await f(an,on,"AWS GuardDuty");F.appendFileSync(w,`\n  ${n}`),an++}if(!t.find((n=>"securityhub.amazonaws.com"===n.service))){const n=await f(an,on,"AWS SecurityHub");F.appendFileSync(w,`\n  ${n}`),an++}if(!t.find((n=>"access-analyzer.amazonaws.com"===n.service))){const n=await f(an,on,"AWS IAM Access Analyzer");F.appendFileSync(w,`\n  ${n}`),an++}if(!t.find((n=>"cloudtrail.amazonaws.com"===n.service))){const n=await f(an,on,"AWS CloudTrail");F.appendFileSync(w,`\n  ${n}`),an++}if(!t.find((n=>"config.amazonaws.com"===n.service))){const n=await f(an,on,"AWS Config");F.appendFileSync(w,`\n  ${n}`),an++}if(!K){const n=await g(an,on,"Security Hub");F.appendFileSync(w,`\n  ${n}`),an++}if(!V){const n=await g(an,on,"GuardDuty");F.appendFileSync(w,`\n  ${n}`),an++}if(!Z){const n=await g(an,on,"AWS Config");F.appendFileSync(w,`\n  ${n}`),an++}if(!B){const n=await g(an,on,"AWS IAM Access Analyzer");F.appendFileSync(w,`\n  ${n}`),an++}if(!Y){const n=await g(an,on,"S3 Storage Lens");F.appendFileSync(w,`\n  ${n}`),an++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                    NETWORK"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nNETWORK RECOMMENDED TASKS:");let cn=1;const tn="Network";if(!t.find((n=>"guardduty.amazonaws.com"===n.service))){const n=await f(cn,tn,"AWS GuardDuty");F.appendFileSync(w,`\n  ${n}`),cn++}if(!t.find((n=>"ipam.amazonaws.com"===n.service))){const n=await f(cn,tn,"AWS IPAM");F.appendFileSync(w,`\n  ${n}`),cn++}if(!t.find((n=>"ram.amazonaws.com"===n.service))){const n=await f(cn,tn,"AWS Resource Access Manager");F.appendFileSync(w,`\n  ${n}`),cn++}if(!q){const n=await g(cn,tn,"AWS IPAM");F.appendFileSync(w,`\n  ${n}`),cn++}if(!c.scpEnabled){const n=await A(cn,tn,"Service Control Policy");F.appendFileSync(w,`\n  ${n}`),cn++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                  OBSERVABILITY"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nOBSERVABILITY RECOMMENDED TASKS:");let sn=1;const rn="Observability";if(!t.find((n=>"account.amazonaws.com"===n.service))){const n=await f(sn,rn,"Account Manager");F.appendFileSync(w,`\n  ${n}`),sn++}if(!H){const n=await g(sn,rn,"Account Manager");F.appendFileSync(w,`\n  ${n}`),sn++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n               BACKUP AND RECOVERY"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nBACKUP AND RECOVERY RECOMMENDED TASKS:");let ln=1;const dn="Backup and Recovery";if(!t.find((n=>"backup.amazonaws.com"===n.service))){const n=await f(ln,dn,"AWS Backup");F.appendFileSync(w,`\n  ${n}`),ln++}if(!_){const n=await g(ln,dn,"AWS Backup");F.appendFileSync(w,`\n  ${n}`),ln++}if(!c.backupPolicyEnabled){const n=await A(ln,dn,"Backup Policy");F.appendFileSync(w,`\n  ${n}`),ln++}if(!c.scpEnabled){const n=await A(ln,dn,"Service Control Policy");F.appendFileSync(w,`\n  ${n}`),ln++}}else if(I.isInOrganization&&!I.isManagementAccount){const n="\nWARNING: You are running Pathfinder from an account that is a member of your AWS Organization. Please run the solution from your AWS Management account.";console.warn(n),F.appendFileSync(w,n)}else{const n="\nWARNING: You are running Pathfinder from an account that not part of an AWS Organization. This account will be treated as a standalone account.";console.warn(n),F.appendFileSync(w,n)}F.appendFileSync(w,"\n\n\n  END REVIEW")})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBcUIsQ0FDN0MsTUFBTW1GLFFBQWdCLEVBQTJCa0QsR0FBZ0JDLEdBQWdCLGlCQUNqRixpQkFBa0JoUixFQUFZLE9BQU82TixLQUNyQ2tELElBQ0osQ0FDQSxJQUFLekksRUFBdUJFLFdBQVksQ0FDcEMsTUFBTXFGLFFBQWdCLEVBQTJCa0QsR0FBZ0JDLEdBQWdCLDBCQUNqRixpQkFBa0JoUixFQUFZLE9BQU82TixLQUNyQ2tELElBQ0osQ0FDSixNQUNLLEdBQUkxUCxFQUFZRyxtQkFBcUJILEVBQVlJLG9CQUFxQixDQUN2RSxNQUFNb00sRUFBVSw2SkFDaEIzTSxRQUFRK1AsS0FBS3BELEdBQ2IsaUJBQWtCN04sRUFBWTZOLEVBQ2xDLEtBQ0ssQ0FDRCxNQUFNQSxFQUFVLG9KQUNoQjNNLFFBQVErUCxLQUFLcEQsR0FDYixpQkFBa0I3TixFQUFZNk4sRUFDbEMsQ0FDQSxpQkFBa0I3TixFQUFZLHFCQUFxQixFQUV2RGtSLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgY29tbW9uanMgXCJAYXdzLXNkay9jbGllbnQtc3RzXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIGNvbW1vbmpzIFwiQGF3cy1zZGsvY2xpZW50LW9yZ2FuaXphdGlvbnNcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgY29tbW9uanMgXCJAYXdzLXNkay9jbGllbnQtaWFtXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIGNvbW1vbmpzIFwiQGF3cy1zZGsvY2xpZW50LWNsb3VkZm9ybWF0aW9uXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIGNvbW1vbmpzIFwiQGF3cy1zZGsvY2xpZW50LXNzby1hZG1pblwiIiwid2VicGFjazovLy9leHRlcm5hbCBjb21tb25qcyBcIkBhd3Mtc2RrL2NsaWVudC1lYzJcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgY29tbW9uanMgXCJAYXdzLXNkay9jbGllbnQtY2xvdWR0cmFpbFwiIiwid2VicGFjazovLy9leHRlcm5hbCBjb21tb25qcyBcIkBhd3Mtc2RrL2NsaWVudC1jb25maWctc2VydmljZVwiIiwid2VicGFjazovLy9leHRlcm5hbCBjb21tb25qcyBcIkBhd3Mtc2RrL2NsaWVudC1jb250cm9sdG93ZXJcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgY29tbW9uanMgXCJAYXdzLXNkay9jbGllbnQtY29zdC1hbmQtdXNhZ2UtcmVwb3J0LXNlcnZpY2VcIiIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy90YXNrcy5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcImZzXCIiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvYXBwLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2dldC1yZWdpb25zLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2RlZmluZS1hY2NvdW50LXR5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvY2hlY2staWFtLXVzZXJzLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2NoZWNrLWVjMi1leGlzdGVuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvY2hlY2stdnBjLWV4aXN0ZW5jZS5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9jaGVjay1jbG91ZHRyYWlsLWV4aXN0ZW5jZS5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9jaGVjay1jb25maWctZXhpc3RlbmNlLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2dldC1vcmctZGV0YWlscy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9jaGVjay1sZWdhY3ktY3VyLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2dldC1lbmFibGVkLW9yZy1wb2xpY3ktdHlwZXMuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvZ2V0LWVuYWJsZWQtb3JnLXNlcnZpY2VzLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2NoZWNrLW9yZy1jbG91ZGZvcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9jaGVjay1jb250cm9sLXRvd2VyLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2dldC1pZGMtaW5mby5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9nZXQtb3JnLWRhLWFjY291bnRzLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2dldC1vcmctbWVtYmVyLWFjY291bnRzLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2dldC1vcmctb3VzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiQGF3cy1zZGsvY2xpZW50LXN0c1wiKTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIkBhd3Mtc2RrL2NsaWVudC1vcmdhbml6YXRpb25zXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiQGF3cy1zZGsvY2xpZW50LWlhbVwiKTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIkBhd3Mtc2RrL2NsaWVudC1jbG91ZGZvcm1hdGlvblwiKTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIkBhd3Mtc2RrL2NsaWVudC1zc28tYWRtaW5cIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJAYXdzLXNkay9jbGllbnQtZWMyXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiQGF3cy1zZGsvY2xpZW50LWNsb3VkdHJhaWxcIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJAYXdzLXNkay9jbGllbnQtY29uZmlnLXNlcnZpY2VcIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJAYXdzLXNkay9jbGllbnQtY29udHJvbHRvd2VyXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiQGF3cy1zZGsvY2xpZW50LWNvc3QtYW5kLXVzYWdlLXJlcG9ydC1zZXJ2aWNlXCIpOyIsImV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZXBsb3lDb25maWdSZWNvcmRlclRhc2sodGFza051bWJlciwgd2F5cG9pbnQsIHJlZ2lvbikge1xuICAgIGNvbnN0IHRhc2sgPSBgJHt3YXlwb2ludH0gLSBUYXNrICR7dGFza051bWJlcn0gLSBEZXBsb3kgQVdTIENvbmZpZyBSZWNvcmRlciB0byB0aGUgJHtyZWdpb259IHJlZ2lvbi5gO1xuICAgIHJldHVybiB0YXNrO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlcGxveUNvbmZpZ0RlbGl2ZXJ5Q2hhbm5lbFRhc2sodGFza051bWJlciwgd2F5cG9pbnQsIHJlZ2lvbikge1xuICAgIGNvbnN0IHRhc2sgPSBgJHt3YXlwb2ludH0gLSBUYXNrICR7dGFza051bWJlcn0gLSBBZGQgQVdTIENvbmZpZyBEZWxpdmVyeSBDaGFubmVsIHRvIHRoZSAke3JlZ2lvbn0gcmVnaW9uLmA7XG4gICAgcmV0dXJuIHRhc2s7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVwbG95Q2xvdWRUcmFpbE9yZ1RyYWlsVGFzayh0YXNrTnVtYmVyLCB3YXlwb2ludCkge1xuICAgIGNvbnN0IHRhc2sgPSBgJHt3YXlwb2ludH0gLSBUYXNrICR7dGFza051bWJlcn0gLSBDcmVhdGUgYSBtdWx0aS1yZWdpb24gQ2xvdWRUcmFpbCBPcmdhbml6YXRpb24gVHJhaWwgaW4geW91ciBob21lIEFXUyBSZWdpb24uYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZXBsb3lDb250cm9sVG93ZXJUYXNrKHRhc2tOdW1iZXIsIHdheXBvaW50KSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIERlcGxveSBBV1MgQ29udHJvbCBUb3dlciBpbiB5b3VyIGhvbWUgQVdTIFJlZ2lvbi5gO1xuICAgIHJldHVybiB0YXNrO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUx6Q29udHJvbFRvd2VyVGFzayh0YXNrTnVtYmVyLCB3YXlwb2ludCwgY3VycmVudFZlcnNpb24sIGxhdGVzdFZlcnNpb24pIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gVXBkYXRlIHlvdXIgQVdTIENvbnRyb2wgVG93ZXIgTGFuZGluZyBab25lIGZyb20gJHtjdXJyZW50VmVyc2lvbn0gdG8gJHtsYXRlc3RWZXJzaW9ufS5gO1xuICAgIHJldHVybiB0YXNrO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpeEx6RHJpZnQodGFza051bWJlciwgd2F5cG9pbnQpIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gRml4IGRyaWZ0IGluIGRlcGxveWVkIGxhbmRpbmcgem9uZS5gO1xuICAgIHJldHVybiB0YXNrO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlcGxveU91VGFzayh0YXNrTnVtYmVyLCB3YXlwb2ludCwgT3VOYW1lKSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIERlcGxveSB0b3AtbGV2ZWwgT1UgJHtPdU5hbWV9LmA7XG4gICAgcmV0dXJuIHRhc2s7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVtb3ZlSWFtVXNlclRhc2sodGFza051bWJlciwgd2F5cG9pbnQsIElhbVVzZXJOYW1lKSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIFJlbW92ZSBJQU0gdXNlciAke0lhbVVzZXJOYW1lfWA7XG4gICAgcmV0dXJuIHRhc2s7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVtb3ZlSWFtVXNlckFwaUtleVRhc2sodGFza051bWJlciwgd2F5cG9pbnQsIElhbVVzZXJOYW1lLCBJYW1Vc2VyQXBpS2V5SWQpIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gUmVtb3ZlIElBTSB1c2VyICR7SWFtVXNlck5hbWV9IEFQSSBrZXk6ICR7SWFtVXNlckFwaUtleUlkfWA7XG4gICAgcmV0dXJuIHRhc2s7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVnBjKHRhc2tOdW1iZXIsIHdheXBvaW50LCByZWdpb24pIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gRGVsZXRlIFZQQyBpbiB0aGUgJHtyZWdpb259IHJlZ2lvbi5gO1xuICAgIHJldHVybiB0YXNrO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUVjMih0YXNrTnVtYmVyLCB3YXlwb2ludCwgcmVnaW9uKSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIERlbGV0ZSBWUEMgaW4gdGhlICR7cmVnaW9ufSByZWdpb24uYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmFibGVBd3NPcmdhbml6YXRpb25TZXJ2aWNlKHRhc2tOdW1iZXIsIHdheXBvaW50LCBzZXJ2aWNlTmFtZSkge1xuICAgIGNvbnN0IHRhc2sgPSBgJHt3YXlwb2ludH0gLSBUYXNrICR7dGFza051bWJlcn0gLSBFbmFibGUgdGhlIEFXUyBzZXJ2aWNlICR7c2VydmljZU5hbWV9IHdpdGhpbiB5b3VyIEFXUyBPcmdhbml6YXRpb25gO1xuICAgIHJldHVybiB0YXNrO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGVnYXRlQWRtaW5pc3RyYXRpb25Bd3NTZXJ2aWNlKHRhc2tOdW1iZXIsIHdheXBvaW50LCBzZXJ2aWNlTmFtZSkge1xuICAgIGNvbnN0IHRhc2sgPSBgJHt3YXlwb2ludH0gLSBUYXNrICR7dGFza051bWJlcn0gLSBEZWxlZ2F0ZSB0aGUgQVdTIHNlcnZpY2UgJHtzZXJ2aWNlTmFtZX0gd2l0aGluIHlvdXIgQVdTIE9yZ2FuaXphdGlvbiB0byBhIG1lbWJlciBhY2NvdW50YDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmFibGVBd3NDdXIodGFza051bWJlciwgd2F5cG9pbnQpIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gRW5hYmxlIGFuZCBjcmVhdGUgYSBDb3N0IGFuZCBVdGlsaXphdGlvbiBSZXBvcnQgKENVUikgaW4gdGhlIGJpbGxpbmcgY29uc29sZS5gO1xuICAgIHJldHVybiB0YXNrO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJldmlld0FjY291bnRFbWFpbEFkZHJlc3Nlcyh0YXNrTnVtYmVyLCB3YXlwb2ludCkge1xuICAgIGNvbnN0IHRhc2sgPSBgJHt3YXlwb2ludH0gLSBUYXNrICR7dGFza051bWJlcn0gLSBSZXZpZXcgYW5kIHZhbGlkYXRlIHlvdXIgZW1haWwgYWRkcmVzc2VzIGFuZCB0aGVpciBkb21haW5zIGZvciB0aGUgcm9vdCB1c2VyIGFkbWluaXN0cmF0b3IgZm9yIG1hbmFnZW1lbnQgYW5kIGFsbCBtZW1iZXIgYWNjb3VudHMuYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmFibGVQb2xpY3lUeXBlVGFzayh0YXNrTnVtYmVyLCB3YXlwb2ludCwgcG9saWN5VHlwZSkge1xuICAgIGNvbnN0IHRhc2sgPSBgJHt3YXlwb2ludH0gLSBUYXNrICR7dGFza051bWJlcn0gLSBFbmFibGUgdGhlIHBvbGljeSB0eXBlICR7cG9saWN5VHlwZX0gd2l0aGluIHlvdXIgQVdTIE9yZ2FuaXphdGlvbi5gO1xuICAgIHJldHVybiB0YXNrO1xufVxuIiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJmc1wiKTsiLCJpbXBvcnQgeyBkZWZpbmVBY2NvdW50VHlwZSB9IGZyb20gJy4vc3JjL2FjdGlvbnMvZGVmaW5lLWFjY291bnQtdHlwZS5qcyc7XG5pbXBvcnQgY2hlY2tJYW1Vc2VycyBmcm9tICcuL3NyYy9hY3Rpb25zL2NoZWNrLWlhbS11c2Vycy5qcyc7XG5pbXBvcnQgZ2V0RW5hYmxlZE9yZ1BvbGljeVR5cGVzIGZyb20gJy4vc3JjL2FjdGlvbnMvZ2V0LWVuYWJsZWQtb3JnLXBvbGljeS10eXBlcy5qcyc7XG5pbXBvcnQgZ2V0RW5hYmxlZE9yZ1NlcnZpY2VzIGZyb20gJy4vc3JjL2FjdGlvbnMvZ2V0LWVuYWJsZWQtb3JnLXNlcnZpY2VzLmpzJztcbmltcG9ydCBnZXRPcmdDbG91ZEZvcm1hdGlvbiBmcm9tICcuL3NyYy9hY3Rpb25zL2NoZWNrLW9yZy1jbG91ZGZvcm1hdGlvbi5qcyc7XG5pbXBvcnQgZ2V0SWRjSW5mbyBmcm9tICcuL3NyYy9hY3Rpb25zL2dldC1pZGMtaW5mby5qcyc7XG5pbXBvcnQgZ2V0T3JnRGV0YWlscyBmcm9tICcuL3NyYy9hY3Rpb25zL2dldC1vcmctZGV0YWlscy5qcyc7XG5pbXBvcnQgZ2V0T3JnVG9wTGV2ZWxPdXMgZnJvbSAnLi9zcmMvYWN0aW9ucy9nZXQtb3JnLW91cy5qcyc7XG5pbXBvcnQgZ2V0QWxsUmVnaW9ucyBmcm9tICcuL3NyYy9hY3Rpb25zL2dldC1yZWdpb25zLmpzJztcbmltcG9ydCBjaGVja0VjMkV4aXN0cyBmcm9tICcuL3NyYy9hY3Rpb25zL2NoZWNrLWVjMi1leGlzdGVuY2UuanMnO1xuaW1wb3J0IGNoZWNrVnBjRXhpc3RzIGZyb20gJy4vc3JjL2FjdGlvbnMvY2hlY2stdnBjLWV4aXN0ZW5jZS5qcyc7XG5pbXBvcnQgY2hlY2tDbG91ZFRyYWlsRXhpc3RzIGZyb20gJy4vc3JjL2FjdGlvbnMvY2hlY2stY2xvdWR0cmFpbC1leGlzdGVuY2UuanMnO1xuaW1wb3J0IGdldE9yZ0RhQWNjb3VudHMgZnJvbSAnLi9zcmMvYWN0aW9ucy9nZXQtb3JnLWRhLWFjY291bnRzLmpzJztcbmltcG9ydCBjaGVja0NvbmZpZ0V4aXN0cyBmcm9tICcuL3NyYy9hY3Rpb25zL2NoZWNrLWNvbmZpZy1leGlzdGVuY2UuanMnO1xuaW1wb3J0IGdldE9yZ01lbWJlckFjY291bnRzIGZyb20gJy4vc3JjL2FjdGlvbnMvZ2V0LW9yZy1tZW1iZXItYWNjb3VudHMuanMnO1xuaW1wb3J0IGdldENvbnRyb2xUb3dlciBmcm9tICcuL3NyYy9hY3Rpb25zL2NoZWNrLWNvbnRyb2wtdG93ZXIuanMnO1xuaW1wb3J0IGNoZWNrTGVnYWN5Q3VyIGZyb20gJy4vc3JjL2FjdGlvbnMvY2hlY2stbGVnYWN5LWN1ci5qcyc7XG5pbXBvcnQgKiBhcyB0YXNrcyBmcm9tICcuL3NyYy9hY3Rpb25zL3Rhc2tzLmpzJztcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcbmNvbnN0IG1haW4gPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcmVwb3J0RmlsZSA9IFwiLi9QYXRoZmluZGVyLnR4dFwiO1xuICAgIGxldCBkYXRlVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgcmVnaW9uID0gcHJvY2Vzcy5lbnYuQVdTX1JFR0lPTiB8fCAndXMtZWFzdC0xJztcbiAgICBjb25zdCBhbGxSZWdpb25zID0gYXdhaXQgZ2V0QWxsUmVnaW9ucygpO1xuICAgIGNvbnNvbGUubG9nKFwiRGlzY292ZXJpbmcgeW91ciBBV1MgZW52aXJvbm1lbnQuLi4uXCIpO1xuICAgIGNvbnN0IGFjY291bnRUeXBlID0gYXdhaXQgZGVmaW5lQWNjb3VudFR5cGUocmVnaW9uKTtcbiAgICBmcy53cml0ZUZpbGVTeW5jKHJlcG9ydEZpbGUsIFwiQ2xvdWQgRm91bmRhdGlvbnMgLSBQYXRoZmluZGVyXCIpO1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5HZW5lcmF0ZWQgb246ICR7ZGF0ZVRpbWUudG9VVENTdHJpbmcoKX0gXFxuXFxuYCk7XG4gICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgICAgICAgICAgICAgICAgTUFOQUdFTUVOVCBBQ0NPVU5UYCk7XG4gICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5BV1MgQUNDT1VOVCBUWVBFXFxuYCk7XG4gICAgaWYgKGFjY291bnRUeXBlKSB7XG4gICAgICAgIGNvbnNvbGUuZGlyKGFjY291bnRUeXBlLCB7IGRlcHRoOiBudWxsLCBjb2xvcnM6IHRydWUgfSk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIElzIGluIEFXUyBPcmdhbml6YXRpb246ICR7YWNjb3VudFR5cGUuaXNJbk9yZ2FuaXphdGlvbn1gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQXNzZXNzaW5nIEFXUyBNYW5hZ2VtZW50IEFjY291bnQ6ICR7YWNjb3VudFR5cGUuaXNNYW5hZ2VtZW50QWNjb3VudH1gKTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJEaXNjb3ZlcmluZyBJQU0gVXNlcnMuLi4uXCIpO1xuICAgIGNvbnN0IGlhbVVzZXJSZXN1bHQgPSBhd2FpdCBjaGVja0lhbVVzZXJzKCk7XG4gICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbklBTSBVU0VSUyBDSEVDS1xcbmApO1xuICAgIGlmIChpYW1Vc2VyUmVzdWx0ICYmIGlhbVVzZXJSZXN1bHQubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zb2xlLmRpcihpYW1Vc2VyUmVzdWx0LCB7IGRlcHRoOiBudWxsLCBjb2xvcnM6IHRydWUgfSk7XG4gICAgICAgIGZvciAoY29uc3QgaWFtVXNlciBvZiBpYW1Vc2VyUmVzdWx0KSB7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBJQU0gVXNlcjogJHtpYW1Vc2VyLnVzZXJOYW1lfWApO1xuICAgICAgICAgICAgaWYgKGlhbVVzZXIuYWNjZXNzS2V5SWQpIHtcbiAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgIFVzZXIgQVBJIEtleSBJRDogJHtpYW1Vc2VyLmFjY2Vzc0tleUlkfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBObyBJQU0gVXNlcnMgZm91bmQuYCk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFwiRGlzY292ZXJpbmcgRUMyIGluc3RhbmNlcyBhY3Jvc3MgYWxsIEFXUyBSZWdpb25zLi4uLlwiKTtcbiAgICBjb25zdCBlYzJDaGVjayA9IGF3YWl0IGNoZWNrRWMyRXhpc3RzKGFsbFJlZ2lvbnMpO1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5FQzIgSU5TVEFOQ0UgQ0hFQ0tcXG5gKTtcbiAgICBpZiAoZWMyQ2hlY2sgJiYgZWMyQ2hlY2suZmluZChwYXJhbSA9PiBwYXJhbS5lYzJGb3VuZCA9PT0gdHJ1ZSkpIHtcbiAgICAgICAgY29uc29sZS5kaXIoZWMyQ2hlY2ssIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgZm9yIChjb25zdCBlYzIgb2YgZWMyQ2hlY2spIHtcbiAgICAgICAgICAgIGlmIChlYzIuZWMyRm91bmQpIHtcbiAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke2VjMi5yZWdpb259IC0gZm91bmQgRUMyIEluc3RhbmNlKHMpLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBObyBFQzIgaW5zdGFuY2VzIGZvdW5kLmApO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhcIkRpc2NvdmVyaW5nIFZQQ3MgYWNyb3NzIGFsbCBBV1MgUmVnaW9ucy4uLi5cIik7XG4gICAgY29uc3QgdnBjQ2hlY2sgPSBhd2FpdCBjaGVja1ZwY0V4aXN0cyhhbGxSZWdpb25zKTtcbiAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuVlBDIENIRUNLXFxuYCk7XG4gICAgaWYgKHZwY0NoZWNrICYmIHZwY0NoZWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5kaXIodnBjQ2hlY2ssIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgZm9yIChjb25zdCB2cGNGaW5kIG9mIHZwY0NoZWNrKSB7XG4gICAgICAgICAgICBpZiAodnBjRmluZC52cGNGb3VuZCkge1xuICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7dnBjRmluZC5yZWdpb259IC0gZm91bmQgVlBDKHMpLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBObyBWUENzIGZvdW5kLmApO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhcIkRpc2NvdmVyaW5nIEFXUyBDb25maWcgY29uZmlndXJhdGlvbnMgYWNyb3NzIGFsbCBBV1MgUmVnaW9ucy4uLi5cIik7XG4gICAgY29uc3QgY2xvdWRUcmFpbENoZWNrID0gYXdhaXQgY2hlY2tDbG91ZFRyYWlsRXhpc3RzKGFsbFJlZ2lvbnMpO1xuICAgIGNvbnN0IGNvbmZpZ0NoZWNrID0gYXdhaXQgY2hlY2tDb25maWdFeGlzdHMoYWxsUmVnaW9ucyk7XG4gICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkFXUyBDT05GSUcgQ0hFQ0tcXG5gKTtcbiAgICBpZiAoY29uZmlnQ2hlY2sgJiYgY29uZmlnQ2hlY2suZmluZChwYXJhbSA9PiBwYXJhbS5jb25maWdSZWNvcmRlckZvdW5kID09PSB0cnVlKSkge1xuICAgICAgICBjb25zb2xlLmRpcihjb25maWdDaGVjaywgeyBkZXB0aDogbnVsbCwgY29sb3JzOiB0cnVlIH0pO1xuICAgICAgICBmb3IgKGNvbnN0IGNvbmZpZ0ZpbmQgb2YgY29uZmlnQ2hlY2spIHtcbiAgICAgICAgICAgIGlmIChjb25maWdGaW5kLmNvbmZpZ1JlY29yZGVyRm91bmQpIHtcbiAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke2NvbmZpZ0ZpbmQucmVnaW9ufSAtIENvbmZpZyBSZWNvcmRlciBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbmZpZ0ZpbmQuY29uZmlnRGVsaXZlcnlDaGFubmVsRm91bmQpIHtcbiAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke2NvbmZpZ0ZpbmQucmVnaW9ufSAtIENvbmZpZyBEZWxpdmVyeSBDaGFubmVsIGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIE5vIEFXUyBDb25maWcgcmVzb3VyY2UgZGlzY292ZXJlZGApO1xuICAgIH1cbiAgICAvLyBhbGwgY2FsbHMgcmVxdWlyZSBhbiBBV1MgT3JnYW5pemF0aW9uIGV4aXN0IGFuZCB0aGUgYWNjb3VudCBiZSBhIG1hbmFnZW1lbnQgYWNjb3VudFxuICAgIGlmIChhY2NvdW50VHlwZS5pc0luT3JnYW5pemF0aW9uICYmIGFjY291bnRUeXBlLmlzTWFuYWdlbWVudEFjY291bnQpIHtcbiAgICAgICAgY29uc3Qgb3JnRGV0YWlscyA9IGF3YWl0IGdldE9yZ0RldGFpbHMoJ3VzLWVhc3QtMScpO1xuICAgICAgICBjb25zb2xlLmRpcihvcmdEZXRhaWxzLCB7IGRlcHRoOiBudWxsLCBjb2xvcnM6IHRydWUgfSk7XG4gICAgICAgIGNvbnN0IGxlZ2FjeUN1ckNoZWNrID0gYXdhaXQgY2hlY2tMZWdhY3lDdXIoJ3VzLWVhc3QtMScpO1xuICAgICAgICBjb25zdCBlbmFibGVPcmdQb2xpY2llc0NoZWNrID0gYXdhaXQgZ2V0RW5hYmxlZE9yZ1BvbGljeVR5cGVzKCd1cy1lYXN0LTEnKTtcbiAgICAgICAgY29uc29sZS5kaXIoZW5hYmxlT3JnUG9saWNpZXNDaGVjaywgeyBkZXB0aDogbnVsbCwgY29sb3JzOiB0cnVlIH0pO1xuICAgICAgICBjb25zdCBvcmdFbmFibGVkU2VydmljZXMgPSBhd2FpdCBnZXRFbmFibGVkT3JnU2VydmljZXMoJ3VzLWVhc3QtMScpO1xuICAgICAgICBjb25zb2xlLmRpcihvcmdFbmFibGVkU2VydmljZXMsIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgY29uc3QgY2ZuT3JnU3RhdHVzID0gYXdhaXQgZ2V0T3JnQ2xvdWRGb3JtYXRpb24ocmVnaW9uKTtcbiAgICAgICAgY29uc29sZS5kaXIoY2ZuT3JnU3RhdHVzLCB7IGRlcHRoOiBudWxsLCBjb2xvcnM6IHRydWUgfSk7XG4gICAgICAgIGNvbnN0IGNvbnRyb2xUb3dlckRldGFpbHMgPSBhd2FpdCBnZXRDb250cm9sVG93ZXIocmVnaW9uKTtcbiAgICAgICAgY29uc3QgaWRjSW5mb3JtYXRpb24gPSBhd2FpdCBnZXRJZGNJbmZvKGFsbFJlZ2lvbnMpO1xuICAgICAgICBjb25zb2xlLmRpcihpZGNJbmZvcm1hdGlvbiwgeyBkZXB0aDogbnVsbCwgY29sb3JzOiB0cnVlIH0pO1xuICAgICAgICBjb25zdCBvcmdEZWxBZG1pbkRldGFpbHMgPSBhd2FpdCBnZXRPcmdEYUFjY291bnRzKCk7XG4gICAgICAgIGNvbnNvbGUuZGlyKG9yZ0RlbEFkbWluRGV0YWlscywgeyBkZXB0aDogbnVsbCwgY29sb3JzOiB0cnVlIH0pO1xuICAgICAgICBjb25zdCBvcmdNZW1iZXJBY2NvdW50RGV0YWlscyA9IGF3YWl0IGdldE9yZ01lbWJlckFjY291bnRzKCk7XG4gICAgICAgIGNvbnNvbGUuZGlyKG9yZ01lbWJlckFjY291bnREZXRhaWxzLCB7IGRlcHRoOiBudWxsLCBjb2xvcnM6IHRydWUgfSk7XG4gICAgICAgIC8vLy8vIFNFVCBUSEUgQkFDS0xPRyBUQVNLIEZPUiBNQU5BR0VNRU5UIEFDQ09VTlQgLy8vL1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuTUFOQUdFTUVOVCBBQ0NPVU5UIFJFQ09NTUVOREVEIFRBU0tTOmApO1xuICAgICAgICBsZXQgbWd0VGFza051bWJlciA9IDE7XG4gICAgICAgIGNvbnN0IG1hbmFnZW1lbnRBY2NvdW50V2F5cG9pbnQgPSBcIk1hbmFnZW1lbnQgQWNjb3VudFwiO1xuICAgICAgICBpZiAoaWFtVXNlclJlc3VsdCAmJiBpYW1Vc2VyUmVzdWx0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaWFtVXNlciBvZiBpYW1Vc2VyUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLnJlbW92ZUlhbVVzZXJUYXNrKG1ndFRhc2tOdW1iZXIsIG1hbmFnZW1lbnRBY2NvdW50V2F5cG9pbnQsIGlhbVVzZXIudXNlck5hbWUpO1xuICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgICAgICBtZ3RUYXNrTnVtYmVyKys7XG4gICAgICAgICAgICAgICAgaWYgKGlhbVVzZXIuYWNjZXNzS2V5SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLnJlbW92ZUlhbVVzZXJBcGlLZXlUYXNrKG1ndFRhc2tOdW1iZXIsIG1hbmFnZW1lbnRBY2NvdW50V2F5cG9pbnQsIGlhbVVzZXIudXNlck5hbWUsIGlhbVVzZXIuYWNjZXNzS2V5SWQpO1xuICAgICAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgICAgICAgIG1ndFRhc2tOdW1iZXIrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVjMkNoZWNrICYmIGVjMkNoZWNrLmZpbmQocGFyYW0gPT4gcGFyYW0uZWMyRm91bmQgPT09IHRydWUpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVjMiBvZiBlYzJDaGVjaykge1xuICAgICAgICAgICAgICAgIGlmIChlYzIuZWMyRm91bmQgJiYgZWMyLnJlZ2lvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVsZXRlRWMyKG1ndFRhc2tOdW1iZXIsIG1hbmFnZW1lbnRBY2NvdW50V2F5cG9pbnQsIGVjMi5yZWdpb24pO1xuICAgICAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgICAgICAgIG1ndFRhc2tOdW1iZXIrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZwY0NoZWNrICYmIHZwY0NoZWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdnBjRmluZCBvZiB2cGNDaGVjaykge1xuICAgICAgICAgICAgICAgIGlmICh2cGNGaW5kLnZwY0ZvdW5kICYmIHZwY0ZpbmQucmVnaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5kZWxldGVWcGMobWd0VGFza051bWJlciwgbWFuYWdlbWVudEFjY291bnRXYXlwb2ludCwgdnBjRmluZC5yZWdpb24pO1xuICAgICAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgICAgICAgIG1ndFRhc2tOdW1iZXIrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgICAgICAgICAgICAgICAgICBHT1ZFUk5BTkNFYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkFXUyBPUkdBTklaQVRJT04gUE9MSUNZIFRZUEVTXFxuYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIFNlcnZpY2UgQ29udHJvbCBQb2xpY2llcyAoU0NQKSBlbmFibGVkOiAke2VuYWJsZU9yZ1BvbGljaWVzQ2hlY2suc2NwRW5hYmxlZH1gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgVGFnIFBvbGljaWVzIGVuYWJsZWQ6ICR7ZW5hYmxlT3JnUG9saWNpZXNDaGVjay50YWdQb2xpY3lFbmFibGVkfWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBCYWNrdXAgUG9saWNpZXMgZW5hYmxlZDogJHtlbmFibGVPcmdQb2xpY2llc0NoZWNrLmJhY2t1cFBvbGljeUVuYWJsZWR9YCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5BV1MgT1JHQU5JWkFUSU9OIENMT1VERk9STUFUSU9OXFxuYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEFXUyBDbG91ZEZvcm1hdGlvbiBPcmdhbml6YXRpb24gc3RhY2sgc2V0cyBzdGF0dXMgOiAke2Nmbk9yZ1N0YXR1cy5zdGF0dXN9YCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5DTE9VRFRSQUlMIENIRUNLXFxuYCk7XG4gICAgICAgIGlmIChjbG91ZFRyYWlsQ2hlY2sgJiYgY2xvdWRUcmFpbENoZWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZGlyKGNsb3VkVHJhaWxDaGVjaywgeyBkZXB0aDogbnVsbCwgY29sb3JzOiB0cnVlIH0pO1xuICAgICAgICAgICAgZm9yIChjb25zdCBjdEZpbmQgb2YgY2xvdWRUcmFpbENoZWNrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN0RmluZC50cmFpbEZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIENsb3VkVHJhaWwgZm91bmQgaW4gJHtjdEZpbmQucmVnaW9ufWApO1xuICAgICAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgIElzIE9yZ2FuaXphdGlvbiBUcmFpbDogJHtjdEZpbmQuaXNPcmdUcmFpbH1gKTtcbiAgICAgICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICBJcyBNdWx0aVJlZ2lvbjogJHtjdEZpbmQuaXNNdWx0aVJlZ2lvbn1gKTtcbiAgICAgICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIE5vIEFXUyBDbG91ZFRyYWlsIHJlc291cmNlIGRpc2NvdmVyZWRgKTtcbiAgICAgICAgfVxuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuR09WRVJOQU5DRSBTRVJWSUNFUyBFTkFCTEVEIElOIEFXUyBPUkdBTklaQVRJT046XFxuYCk7XG4gICAgICAgIGlmIChvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnY2xvdWR0cmFpbC5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEFXUyBDbG91ZFRyYWlsYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdjb25maWcuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBV1MgQ29uZmlnYCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8vLy8gU0VUIFRIRSBCQUNLTE9HIFRBU0sgRk9SIEdPVkVSTkFOQ0UgLy8vLy9cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkdPVkVSTkFOQ0UgUkVDT01NRU5ERUQgVEFTS1M6YCk7XG4gICAgICAgIGNvbnN0IGdvdldheXBvaW50ID0gXCJHb3Zlcm5hbmNlXCI7XG4gICAgICAgIGxldCBnb3ZUYXNrTnVtYmVyID0gMTtcbiAgICAgICAgaWYgKCFvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnY2xvdWR0cmFpbC5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVBd3NPcmdhbml6YXRpb25TZXJ2aWNlKGdvdlRhc2tOdW1iZXIsIGdvdldheXBvaW50LCBcIkFXUyBDbG91ZFRyYWlsXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgZ292VGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghb3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2NvbmZpZy5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVBd3NPcmdhbml6YXRpb25TZXJ2aWNlKGdvdlRhc2tOdW1iZXIsIGdvdldheXBvaW50LCBcIkFXUyBDb25maWdcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBnb3ZUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlbmFibGVPcmdQb2xpY2llc0NoZWNrLnNjcEVuYWJsZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVQb2xpY3lUeXBlVGFzayhnb3ZUYXNrTnVtYmVyLCBnb3ZXYXlwb2ludCwgXCJTZXJ2aWNlIENvbnRyb2wgUG9saWN5XCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgZ292VGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZW5hYmxlT3JnUG9saWNpZXNDaGVjay50YWdQb2xpY3lFbmFibGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlUG9saWN5VHlwZVRhc2soZ292VGFza051bWJlciwgZ292V2F5cG9pbnQsIFwiVGFnIFBvbGljeVwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIGdvdlRhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWVuYWJsZU9yZ1BvbGljaWVzQ2hlY2suYmFja3VwUG9saWN5RW5hYmxlZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZVBvbGljeVR5cGVUYXNrKGdvdlRhc2tOdW1iZXIsIGdvdldheXBvaW50LCBcIkJhY2t1cCBQb2xpY3lcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBnb3ZUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgICAgICAgICAgICAgIEZJTkFOQ0lBTCBNQU5BR0VNRU5UYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkxlZ2FjeSBDVVJgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgSXMgbGVnYWN5IENVUiBzZXR1cDogJHtsZWdhY3lDdXJDaGVjay5pc0xlZ2FjeUN1clNldHVwfWApO1xuICAgICAgICAvLy8vLyBTRVQgVEhFIEJBQ0tMT0cgVEFTSyBGT1IgRklOQU5DSUFMIE1BTkFHRU1FTlQgLy8vLy9cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkNMT1VEIEZJTkFOQ0lBTCBNQU5BR0VNRU5UIFJFQ09NTUVOREVEIFRBU0tTOmApO1xuICAgICAgICBsZXQgZmluVGFza051bWJlciA9IDE7XG4gICAgICAgIGNvbnN0IGZpbldheXBvaW50ID0gXCJDbG91ZCBGaW5hbmNpYWwgTWFuYWdlbWVudFwiO1xuICAgICAgICBpZiAoIWxlZ2FjeUN1ckNoZWNrLmlzTGVnYWN5Q3VyU2V0dXApIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVBd3NDdXIoZmluVGFza051bWJlciwgZmluV2F5cG9pbnQpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICAgICAgICAgICAgICBNVUxUSS1BQ0NPVU5UIFNUUkFURUdZYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkFXUyBPUkdBTklaQVRJT04gREVUQUlMU1xcbmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBV1MgT3JnYW5pemF0aW9uIElkOiAke29yZ0RldGFpbHMuaWR9YCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEFXUyBPcmdhbml6YXRpb24gQVJOOiAke29yZ0RldGFpbHMuYXJufWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBV1MgT3JnYW5pemF0aW9uIFJvb3QgT1UgSWQ6ICR7b3JnRGV0YWlscy5yb290T3VJZH1gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkFXUyBPUkdBTklaQVRJT04gQ0xPVURGT1JNQVRJT05cXG5gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQVdTIENsb3VkRm9ybWF0aW9uIE9yZ2FuaXphdGlvbiBzdGFjayBzZXRzIHN0YXR1cyA6ICR7Y2ZuT3JnU3RhdHVzLnN0YXR1c31gKTtcbiAgICAgICAgbGV0IHRyYW5zaXRpb25hbEZvdW5kLCBzdXNwZW5kZWRGb3VuZCwgd29ya2xvYWRzRm91bmQsIHNlY3VyaXR5Rm91bmQgPSBmYWxzZTtcbiAgICAgICAgaWYgKG9yZ0RldGFpbHMucm9vdE91SWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG9yZ091cyA9IGF3YWl0IGdldE9yZ1RvcExldmVsT3VzKCd1cy1lYXN0LTEnLCBvcmdEZXRhaWxzLnJvb3RPdUlkKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZGlyKG9yZ091cywgeyBkZXB0aDogbnVsbCwgY29sb3JzOiB0cnVlIH0pO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkFXUyBPUkdBTklaQVRJT04gVE9QLUxFVkVMIE9SR0FOSVpBVElPTiBVTklUU1xcbmApO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgTGlzdCBvZiBPcmdhbml6YXRpb24ncyB0b3AtbGV2ZWwgT1VzIGFuZCBBV1MgYWNjb3VudHM6YCk7XG4gICAgICAgICAgICBpZiAob3JnT3VzICYmIG9yZ091cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBvdSBvZiBvcmdPdXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91Lm5hbWU/LnRvTG93ZXJDYXNlKCkgPT09ICdzdXNwZW5kZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdXNwZW5kZWRGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG91Lm5hbWU/LnRvTG93ZXJDYXNlKCkgPT09ICd0cmFuc2l0aW9uYWwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uYWxGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG91Lm5hbWU/LnRvTG93ZXJDYXNlKCkgPT09ICd3b3JrbG9hZHMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JrbG9hZHNGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG91Lm5hbWU/LnRvTG93ZXJDYXNlKCkgPT09ICdzZWN1cml0eScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3VyaXR5Rm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgT3JnYW5pemF0aW9uYWwgVW5pdDogJHtvdS5uYW1lfWApO1xuICAgICAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgICAgT3JnYW5pemF0aW9uYWwgVW5pdCBJZDogJHtvdS5pZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91LmFjY291bnRzICYmIG91LmFjY291bnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgICBBV1MgQWNjb3VudHM6YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGFjY291bnQgb2Ygb3UuYWNjb3VudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgICAgICAke2FjY291bnQuTmFtZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgICBBV1MgQWNjb3VudHM6IE5vbmVgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIE5vIHRvcCBsZXZlbCBPVXMgZm91bmQuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkFXUyBPUkdBTklaQVRJT04gTUVNQkVSIEFDQ09VTlRTXFxuYCk7XG4gICAgICAgIGlmIChvcmdNZW1iZXJBY2NvdW50RGV0YWlscyAmJiBvcmdNZW1iZXJBY2NvdW50RGV0YWlscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1lbWJlckFjY291bnQgb2Ygb3JnTWVtYmVyQWNjb3VudERldGFpbHMpIHtcbiAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBY2NvdW50OiAke21lbWJlckFjY291bnQuYWNjb3VudE5hbWV9YCk7XG4gICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQWNjb3VudCBFbWFpbDogJHttZW1iZXJBY2NvdW50LmFjY291bnRFbWFpbH1cXG5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBObyBtZW1iZXIgYWNjb3VudHMgZm91bmQgd2hpY2ggaXMgYW1hemluZyBhcyB0aGlzIGlzIHJ1bm5pbmcgZnJvbSBvbmUuYCk7XG4gICAgICAgIH1cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkFXUyBPUkdBTklaQVRJT04gRU5BQkxFRCBTRVJWSUNFU1xcbmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBUaGUgZm9sbG93aW5nIEFXUyBTZXJ2aWNlcyBhcmUgZW5hYmxlZCB3aXRoaW4geW91ciBBV1MgT3JnYW5pemF0aW9uOmApO1xuICAgICAgICBmb3IgKGNvbnN0IG9yZ1NlcnZpY2Ugb2Ygb3JnRW5hYmxlZFNlcnZpY2VzKSB7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgICR7b3JnU2VydmljZS5zZXJ2aWNlfWApO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpZGVudGl0eURlbGVnYXRlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgc2VjdXJpdHlIdWJEZWxlZ2F0ZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IGd1YXJkRHV0eURlbGVnYXRlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgY29uZmlnRGVsZWdhdGVkID0gZmFsc2U7XG4gICAgICAgIGxldCBpYW1BY2Nlc3NBbmFseXplckRlbGVnYXRlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgczNTdG9yYWdlTGVuc0RlbGVnYXRlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgaXBhbURlbGVnYXRlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgYWNjb3VudERlbGVnYXRlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgYmFja3VwRGVsZWdhdGVkID0gZmFsc2U7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5BV1MgT1JHQU5JWkFUSU9OIElOVEVHUkFURUQgU0VSVklDRSBSRUdJU1RFUkVEIERFTEVHQVRFRCBBRE1JTlNcXG5gKTtcbiAgICAgICAgaWYgKG9yZ0RlbEFkbWluRGV0YWlscyAmJiBvcmdEZWxBZG1pbkRldGFpbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBhY2NvdW50IG9mIG9yZ0RlbEFkbWluRGV0YWlscykge1xuICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEFjY291bnQ6ICR7YWNjb3VudC5hY2NvdW50TmFtZX1gKTtcbiAgICAgICAgICAgICAgICBpZiAoYWNjb3VudC5zZXJ2aWNlcyAmJiBhY2NvdW50LnNlcnZpY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgRGVsZWdhdGVkIFNlcnZpY2VzOmApO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNydiBvZiBhY2NvdW50LnNlcnZpY2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgICR7c3J2LlNlcnZpY2VQcmluY2lwYWx9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3J2LlNlcnZpY2VQcmluY2lwYWwgPT09ICdzZWN1cml0eWh1Yi5hbWF6b25hd3MuY29tJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3VyaXR5SHViRGVsZWdhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcnYuU2VydmljZVByaW5jaXBhbCA9PT0gJ2d1YXJkZHV0eS5hbWF6b25hd3MuY29tJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGd1YXJkRHV0eURlbGVnYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3J2LlNlcnZpY2VQcmluY2lwYWwgPT09ICdzc28uYW1hem9uYXdzLmNvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGVudGl0eURlbGVnYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3J2LlNlcnZpY2VQcmluY2lwYWwgPT09ICdjb25maWcuYW1hem9uYXdzLmNvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWdEZWxlZ2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNydi5TZXJ2aWNlUHJpbmNpcGFsID09PSAnYWNjZXNzLWFuYWx5emVyLmFtYXpvbmF3cy5jb20nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWFtQWNjZXNzQW5hbHl6ZXJEZWxlZ2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNydi5TZXJ2aWNlUHJpbmNpcGFsID09PSAnc3RvcmFnZS1sZW5zLnMzLmFtYXpvbmF3cy5jb20nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczNTdG9yYWdlTGVuc0RlbGVnYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3J2LlNlcnZpY2VQcmluY2lwYWwgPT09ICdpcGFtLmFtYXpvbmF3cy5jb20nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXBhbURlbGVnYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3J2LlNlcnZpY2VQcmluY2lwYWwgPT09ICdhY2NvdW50LmFtYXpvbmF3cy5jb20nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudERlbGVnYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3J2LlNlcnZpY2VQcmluY2lwYWwgPT09ICdiYWNrdXAuYW1hem9uYXdzLmNvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrdXBEZWxlZ2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBObyBkZWxlZ2F0ZWQgYWRtaW4gYWNjb3VudHMgaW4gQVdTIE9yZ2FuaXphdGlvbmApO1xuICAgICAgICB9XG4gICAgICAgIC8vLy8vIFNFVCBUSEUgQkFDS0xPRyBUQVNLIEZPUiBNVUxUSS1BQ0NPVU5UIFNUUkFURUdZIC8vLy8vXG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5NVUxUSS1BQ0NPVU5UIFNUUkFURUdZIFJFQ09NTUVOREVEIFRBU0tTOmApO1xuICAgICAgICBsZXQgbWFzVGFza051bWJlciA9IDE7XG4gICAgICAgIGxldCBtYXNXYXlwb2ludCA9ICdNdWx0aS1BY2NvdW50IFN0cmF0ZWd5JztcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLnJldmlld0FjY291bnRFbWFpbEFkZHJlc3NlcyhtYXNUYXNrTnVtYmVyLCBtYXNXYXlwb2ludCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgbWFzVGFza051bWJlcisrO1xuICAgICAgICBpZiAoIWVuYWJsZU9yZ1BvbGljaWVzQ2hlY2suc2NwRW5hYmxlZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZVBvbGljeVR5cGVUYXNrKG1hc1Rhc2tOdW1iZXIsIG1hc1dheXBvaW50LCBcIlNlcnZpY2UgQ29udHJvbCBQb2xpY3lcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBtYXNUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0cmFuc2l0aW9uYWxGb3VuZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlcGxveU91VGFzayhtYXNUYXNrTnVtYmVyLCBtYXNXYXlwb2ludCwgXCJUcmFuc2l0aW9uYWxcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBtYXNUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzdXNwZW5kZWRGb3VuZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlcGxveU91VGFzayhtYXNUYXNrTnVtYmVyLCBtYXNXYXlwb2ludCwgXCJTdXNwZW5kZWRcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBtYXNUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF3b3JrbG9hZHNGb3VuZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlcGxveU91VGFzayhtYXNUYXNrTnVtYmVyLCBtYXNXYXlwb2ludCwgXCJXb3JrbG9hZHNcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBtYXNUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzZWN1cml0eUZvdW5kKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVwbG95T3VUYXNrKG1hc1Rhc2tOdW1iZXIsIG1hc1dheXBvaW50LCBcIlNlY3VyaXR5XCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgbWFzVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICAgICAgICAgICAgICAgIExBTkRJTkcgWk9ORWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5BV1MgQ09OVFJPTCBUT1dFUlxcbmApO1xuICAgICAgICBpZiAoY29udHJvbFRvd2VyRGV0YWlscy5jb250cm9sVG93ZXJSZWdpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZGlyKGNvbnRyb2xUb3dlckRldGFpbHMsIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIENvbnRyb2wgVG93ZXIgaG9tZSByZWdpb246ICR7Y29udHJvbFRvd2VyRGV0YWlscy5jb250cm9sVG93ZXJSZWdpb259YCk7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBDb250cm9sIFRvd2VyIHN0YXR1czogJHtjb250cm9sVG93ZXJEZXRhaWxzLnN0YXR1c31gKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIENvbnRyb2wgVG93ZXIgTGFuZGluZyBab25lIHZlcnNpb246ICR7Y29udHJvbFRvd2VyRGV0YWlscy5kZXBsb3llZFZlcnNpb259YCk7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBMYXRlc3QgYXZhaWxhYmxlIHZlcnNpb246ICR7Y29udHJvbFRvd2VyRGV0YWlscy5sYXRlc3RBdmFpbGFibGVWZXJzaW9ufWApO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgRHJpZnQgU3RhdHVzOiAke2NvbnRyb2xUb3dlckRldGFpbHMuZHJpZnRTdGF0dXN9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBV1MgQ29udHJvbCBUb3dlciBpcyBub3QgZGVwbG95ZWQgaW4gdGhlIEFXUyBPcmdhbml6YXRpb25gKTtcbiAgICAgICAgfVxuICAgICAgICAvLy8vLyBTRVQgVEhFIEJBQ0tMT0cgVEFTSyBGT1IgTEFORElORyBaT05FIC8vLy8vXG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5MQU5ESU5HIFpPTkUgUkVDT01NRU5ERUQgVEFTS1M6YCk7XG4gICAgICAgIGxldCBselRhc2tOdW1iZXIgPSAxO1xuICAgICAgICBjb25zdCBseldheXBvaW50ID0gXCJMYW5kaW5nIFpvbmVcIjtcbiAgICAgICAgaWYgKGNvbnRyb2xUb3dlckRldGFpbHMuY29udHJvbFRvd2VyUmVnaW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5kZXBsb3lDb250cm9sVG93ZXJUYXNrKGx6VGFza051bWJlciwgbHpXYXlwb2ludCk7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBselRhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJvbFRvd2VyRGV0YWlscy5kcmlmdFN0YXR1cyA9PT0gJ0RSSUZURUQnKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZml4THpEcmlmdChselRhc2tOdW1iZXIsIGx6V2F5cG9pbnQpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgbHpUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyb2xUb3dlckRldGFpbHMuZGVwbG95ZWRWZXJzaW9uICE9PSBjb250cm9sVG93ZXJEZXRhaWxzLmxhdGVzdEF2YWlsYWJsZVZlcnNpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWZXJzaW9uID0gY29udHJvbFRvd2VyRGV0YWlscy5kZXBsb3llZFZlcnNpb24gPz8gXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IGxhdGVzdFZlcnNpb24gPSBjb250cm9sVG93ZXJEZXRhaWxzLmxhdGVzdEF2YWlsYWJsZVZlcnNpb24gPz8gXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy51cGRhdGVMekNvbnRyb2xUb3dlclRhc2sobHpUYXNrTnVtYmVyLCBseldheXBvaW50LCBjdXJyZW50VmVyc2lvbiwgbGF0ZXN0VmVyc2lvbik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBselRhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdtZW1iZXIub3JnLnN0YWNrc2V0cy5jbG91ZGZvcm1hdGlvbi5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVBd3NPcmdhbml6YXRpb25TZXJ2aWNlKGx6VGFza051bWJlciwgbHpXYXlwb2ludCwgXCJBV1MgQ2xvdWRGb3JtYXRpb25cIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBselRhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgICAgICAgICAgICAgICAgIElERU5USVRZYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkFXUyBJQU0gSURFTlRJVFkgQ0VOVEVSXFxuYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIElkQyBSZWdpb246ICR7aWRjSW5mb3JtYXRpb24ucmVnaW9ufWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBJZEMgQVJOOiAke2lkY0luZm9ybWF0aW9uLmFybn1gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgSWRDIEluc3RhbmNlIElkOiAke2lkY0luZm9ybWF0aW9uLmlkfWApO1xuICAgICAgICAvLy8vLyBTRVQgVEhFIEJBQ0tMT0cgVEFTSyBGT1IgSURFTlRJVFkgLy8vLy9cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbklERU5USVRZIFJFQ09NTUVOREVEIFRBU0tTOmApO1xuICAgICAgICBsZXQgc3NvVGFza051bWJlciA9IDE7XG4gICAgICAgIGNvbnN0IHNzb1dheXBvaW50ID0gJ0lkZW50aXR5JztcbiAgICAgICAgaWYgKCFvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnc3NvLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2Uoc3NvVGFza051bWJlciwgc3NvV2F5cG9pbnQsIFwiQVdTIElBTSBJZGVudGl0eSBDZW50ZXJcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBzc29UYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpZGVudGl0eURlbGVnYXRlZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlbGVnYXRlQWRtaW5pc3RyYXRpb25Bd3NTZXJ2aWNlKHNzb1Rhc2tOdW1iZXIsIHNzb1dheXBvaW50LCBcIkFXUyBJQU0gSWRlbnRpdHkgQ2VudGVyXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgc3NvVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZW5hYmxlT3JnUG9saWNpZXNDaGVjay5zY3BFbmFibGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlUG9saWN5VHlwZVRhc2soc3NvVGFza051bWJlciwgc3NvV2F5cG9pbnQsIFwiU2VydmljZSBDb250cm9sIFBvbGljeVwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIHNzb1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgICAgICAgICAgICAgICAgIFNFQ1VSSVRZYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkFXUyBTRUNVUklUWSBTRVJWSUNFUyBFTkFCTEVEIElOIEFXUyBPUkdBTklaQVRJT046XFxuYCk7XG4gICAgICAgIGlmIChvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnZ3VhcmRkdXR5LmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQVdTIEd1YXJkRHV0eWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnc2VjdXJpdHlodWIuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBV1MgU2VjdXJpdHkgSHViYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdhY2Nlc3MtYW5hbHl6ZXIuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBJQU0gQWNjZXNzIEFuYWx5emVyYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdtYWNpZS5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIE1hY2llYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdzdG9yYWdlLWxlbnMuczMuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBbWF6b24gUzMgU3RvcmFnZSBMZW5zYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdpbnNwZWN0b3IyLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQW1hem9uIEluc3BlY3RvcmApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnY2xvdWR0cmFpbC5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEFXUyBDbG91ZFRyYWlsYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdjb25maWcuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBV1MgQ29uZmlnYCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8vLy8gU0VUIFRIRSBCQUNLTE9HIFRBU0sgRk9SIFNFQ1VSSVRZIC8vLy8vXG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5TRUNVUklUWSBSRUNPTU1FTkRFRCBUQVNLUzpgKTtcbiAgICAgICAgbGV0IHNlY1Rhc2tOdW1iZXIgPSAxO1xuICAgICAgICBjb25zdCBzZWNXYXlwb2ludCA9IFwiU2VjdXJpdHlcIjtcbiAgICAgICAgaWYgKCFlbmFibGVPcmdQb2xpY2llc0NoZWNrLnNjcEVuYWJsZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVQb2xpY3lUeXBlVGFzayhzZWNUYXNrTnVtYmVyLCBzZWNXYXlwb2ludCwgXCJTZXJ2aWNlIENvbnRyb2wgUG9saWN5XCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgc2VjVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghb3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2d1YXJkZHV0eS5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVBd3NPcmdhbml6YXRpb25TZXJ2aWNlKHNlY1Rhc2tOdW1iZXIsIHNlY1dheXBvaW50LCBcIkFXUyBHdWFyZER1dHlcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBzZWNUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnc2VjdXJpdHlodWIuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlQXdzT3JnYW5pemF0aW9uU2VydmljZShzZWNUYXNrTnVtYmVyLCBzZWNXYXlwb2ludCwgXCJBV1MgU2VjdXJpdHlIdWJcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBzZWNUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnYWNjZXNzLWFuYWx5emVyLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2Uoc2VjVGFza051bWJlciwgc2VjV2F5cG9pbnQsIFwiQVdTIElBTSBBY2Nlc3MgQW5hbHl6ZXJcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBzZWNUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnY2xvdWR0cmFpbC5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVBd3NPcmdhbml6YXRpb25TZXJ2aWNlKHNlY1Rhc2tOdW1iZXIsIHNlY1dheXBvaW50LCBcIkFXUyBDbG91ZFRyYWlsXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgc2VjVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghb3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2NvbmZpZy5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVBd3NPcmdhbml6YXRpb25TZXJ2aWNlKHNlY1Rhc2tOdW1iZXIsIHNlY1dheXBvaW50LCBcIkFXUyBDb25maWdcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBzZWNUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzZWN1cml0eUh1YkRlbGVnYXRlZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlbGVnYXRlQWRtaW5pc3RyYXRpb25Bd3NTZXJ2aWNlKHNlY1Rhc2tOdW1iZXIsIHNlY1dheXBvaW50LCBcIlNlY3VyaXR5IEh1YlwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIHNlY1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWd1YXJkRHV0eURlbGVnYXRlZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlbGVnYXRlQWRtaW5pc3RyYXRpb25Bd3NTZXJ2aWNlKHNlY1Rhc2tOdW1iZXIsIHNlY1dheXBvaW50LCBcIkd1YXJkRHV0eVwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIHNlY1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNvbmZpZ0RlbGVnYXRlZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlbGVnYXRlQWRtaW5pc3RyYXRpb25Bd3NTZXJ2aWNlKHNlY1Rhc2tOdW1iZXIsIHNlY1dheXBvaW50LCBcIkFXUyBDb25maWdcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBzZWNUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpYW1BY2Nlc3NBbmFseXplckRlbGVnYXRlZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlbGVnYXRlQWRtaW5pc3RyYXRpb25Bd3NTZXJ2aWNlKHNlY1Rhc2tOdW1iZXIsIHNlY1dheXBvaW50LCBcIkFXUyBJQU0gQWNjZXNzIEFuYWx5emVyXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgc2VjVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghczNTdG9yYWdlTGVuc0RlbGVnYXRlZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlbGVnYXRlQWRtaW5pc3RyYXRpb25Bd3NTZXJ2aWNlKHNlY1Rhc2tOdW1iZXIsIHNlY1dheXBvaW50LCBcIlMzIFN0b3JhZ2UgTGVuc1wiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIHNlY1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgICAgICAgICAgICAgICAgIE5FVFdPUktgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgICAgICAvLy8vLyBTRVQgVEhFIEJBQ0tMT0cgVEFTSyBGT1IgTkVUV09SSyAvLy8vL1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuTkVUV09SSyBSRUNPTU1FTkRFRCBUQVNLUzpgKTtcbiAgICAgICAgbGV0IG5ldFRhc2tOdW1iZXIgPSAxO1xuICAgICAgICBjb25zdCBuZXR3b3JrV2F5cG9pbnQgPSAnTmV0d29yayc7XG4gICAgICAgIGlmICghb3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2d1YXJkZHV0eS5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ldEd1YXJkRHV0eUVuYWJsZU1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVBd3NPcmdhbml6YXRpb25TZXJ2aWNlKG5ldFRhc2tOdW1iZXIsIG5ldHdvcmtXYXlwb2ludCwgXCJBV1MgR3VhcmREdXR5XCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHtuZXRHdWFyZER1dHlFbmFibGVNZXNzYWdlfWApO1xuICAgICAgICAgICAgbmV0VGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghb3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2lwYW0uYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlQXdzT3JnYW5pemF0aW9uU2VydmljZShuZXRUYXNrTnVtYmVyLCBuZXR3b3JrV2F5cG9pbnQsIFwiQVdTIElQQU1cIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBuZXRUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAncmFtLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2UobmV0VGFza051bWJlciwgbmV0d29ya1dheXBvaW50LCBcIkFXUyBSZXNvdXJjZSBBY2Nlc3MgTWFuYWdlclwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIG5ldFRhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlwYW1EZWxlZ2F0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5kZWxlZ2F0ZUFkbWluaXN0cmF0aW9uQXdzU2VydmljZShuZXRUYXNrTnVtYmVyLCBuZXR3b3JrV2F5cG9pbnQsIFwiQVdTIElQQU1cIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBuZXRUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlbmFibGVPcmdQb2xpY2llc0NoZWNrLnNjcEVuYWJsZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVQb2xpY3lUeXBlVGFzayhuZXRUYXNrTnVtYmVyLCBuZXR3b3JrV2F5cG9pbnQsIFwiU2VydmljZSBDb250cm9sIFBvbGljeVwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIG5ldFRhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgICAgICAgICAgICAgICBPQlNFUlZBQklMSVRZYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgKTtcbiAgICAgICAgLy8vLy8gU0VUIFRIRSBCQUNLTE9HIFRBU0sgRk9SIE9CU0VSVkFCSUxJVFkgLy8vLy9cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbk9CU0VSVkFCSUxJVFkgUkVDT01NRU5ERUQgVEFTS1M6YCk7XG4gICAgICAgIGxldCBvYlRhc2tOdW1iZXIgPSAxO1xuICAgICAgICBjb25zdCBvYldheXBvaW50ID0gJ09ic2VydmFiaWxpdHknO1xuICAgICAgICBpZiAoIW9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdhY2NvdW50LmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2Uob2JUYXNrTnVtYmVyLCBvYldheXBvaW50LCBcIkFjY291bnQgTWFuYWdlclwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIG9iVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghYWNjb3VudERlbGVnYXRlZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlbGVnYXRlQWRtaW5pc3RyYXRpb25Bd3NTZXJ2aWNlKG9iVGFza051bWJlciwgb2JXYXlwb2ludCwgXCJBY2NvdW50IE1hbmFnZXJcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBvYlRhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgICAgICAgICAgICBCQUNLVVAgQU5EIFJFQ09WRVJZYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgKTtcbiAgICAgICAgLy8vLy8gU0VUIFRIRSBCQUNLTE9HIFRBU0sgRk9SIEJBQ0tVUCBBTkQgUkVDT1ZFUlkgLy8vLy9cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkJBQ0tVUCBBTkQgUkVDT1ZFUlkgUkVDT01NRU5ERUQgVEFTS1M6YCk7XG4gICAgICAgIGxldCBiYWNrVGFza051bWJlciA9IDE7XG4gICAgICAgIGNvbnN0IGJhY2t1cFdheXBvaW50ID0gJ0JhY2t1cCBhbmQgUmVjb3ZlcnknO1xuICAgICAgICAvLyBjaGVjayBpZiBBV1MgQmFja3VwIGlzIGVuYWJsZWRcbiAgICAgICAgaWYgKCFvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnYmFja3VwLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2UoYmFja1Rhc2tOdW1iZXIsIGJhY2t1cFdheXBvaW50LCBcIkFXUyBCYWNrdXBcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBiYWNrVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghYmFja3VwRGVsZWdhdGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVsZWdhdGVBZG1pbmlzdHJhdGlvbkF3c1NlcnZpY2UoYmFja1Rhc2tOdW1iZXIsIGJhY2t1cFdheXBvaW50LCBcIkFXUyBCYWNrdXBcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBiYWNrVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZW5hYmxlT3JnUG9saWNpZXNDaGVjay5iYWNrdXBQb2xpY3lFbmFibGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlUG9saWN5VHlwZVRhc2soYmFja1Rhc2tOdW1iZXIsIGJhY2t1cFdheXBvaW50LCBcIkJhY2t1cCBQb2xpY3lcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBiYWNrVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZW5hYmxlT3JnUG9saWNpZXNDaGVjay5zY3BFbmFibGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlUG9saWN5VHlwZVRhc2soYmFja1Rhc2tOdW1iZXIsIGJhY2t1cFdheXBvaW50LCBcIlNlcnZpY2UgQ29udHJvbCBQb2xpY3lcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBiYWNrVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGFjY291bnRUeXBlLmlzSW5Pcmdhbml6YXRpb24gJiYgIWFjY291bnRUeXBlLmlzTWFuYWdlbWVudEFjY291bnQpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9ICdcXG5XQVJOSU5HOiBZb3UgYXJlIHJ1bm5pbmcgUGF0aGZpbmRlciBmcm9tIGFuIGFjY291bnQgdGhhdCBpcyBhIG1lbWJlciBvZiB5b3VyIEFXUyBPcmdhbml6YXRpb24uIFBsZWFzZSBydW4gdGhlIHNvbHV0aW9uIGZyb20geW91ciBBV1MgTWFuYWdlbWVudCBhY2NvdW50Lic7XG4gICAgICAgIGNvbnNvbGUud2FybihtZXNzYWdlKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgbWVzc2FnZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gJ1xcbldBUk5JTkc6IFlvdSBhcmUgcnVubmluZyBQYXRoZmluZGVyIGZyb20gYW4gYWNjb3VudCB0aGF0IG5vdCBwYXJ0IG9mIGFuIEFXUyBPcmdhbml6YXRpb24uIFRoaXMgYWNjb3VudCB3aWxsIGJlIHRyZWF0ZWQgYXMgYSBzdGFuZGFsb25lIGFjY291bnQuJztcbiAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBtZXNzYWdlKTtcbiAgICB9XG4gICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcblxcbiAgRU5EIFJFVklFV2ApO1xufTtcbm1haW4oKTtcbiIsImltcG9ydCB7IEVDMkNsaWVudCwgRGVzY3JpYmVSZWdpb25zQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtZWMyXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRBbGxSZWdpb25zKCkge1xuICAgIC8vIGdyYWJiaW5nIGFsbCByZWdpb25zIGZyb20gdXMtZWFzdC0xXG4gICAgY29uc3QgZWMyQ2xpZW50ID0gbmV3IEVDMkNsaWVudCh7IHJlZ2lvbjogXCJ1cy1lYXN0LTFcIiB9KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBkZXNjcmliZVJlZ2lvbnNDb21tYW5kID0gbmV3IERlc2NyaWJlUmVnaW9uc0NvbW1hbmQoe30pO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGVjMkNsaWVudC5zZW5kKGRlc2NyaWJlUmVnaW9uc0NvbW1hbmQpO1xuICAgICAgICBjb25zdCByZWdpb25zID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcmVnaW9uIG9mIHJlc3BvbnNlLlJlZ2lvbnMgfHwgW10pIHtcbiAgICAgICAgICAgIHJlZ2lvbnMucHVzaChyZWdpb24uUmVnaW9uTmFtZSB8fCBcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVnaW9ucztcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZXRyaWV2aW5nIHJlZ2lvbnM6XCIsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgZWMyQ2xpZW50LmRlc3Ryb3koKTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBnZXRBbGxSZWdpb25zO1xuIiwiaW1wb3J0IHsgU1RTQ2xpZW50LCBHZXRDYWxsZXJJZGVudGl0eUNvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LXN0c1wiO1xuaW1wb3J0IHsgT3JnYW5pemF0aW9uc0NsaWVudCwgRGVzY3JpYmVPcmdhbml6YXRpb25Db21tYW5kLCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtb3JnYW5pemF0aW9uc1wiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0QWNjb3VudElkKHJlZ2lvbikge1xuICAgIGNvbnN0IHN0c0NsaWVudCA9IG5ldyBTVFNDbGllbnQoeyByZWdpb24gfSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZ2V0Q2FsbGVySWRlbnRpdHlDb21tYW5kID0gbmV3IEdldENhbGxlcklkZW50aXR5Q29tbWFuZCh7fSk7XG4gICAgICAgIGNvbnN0IEFjY291bnQgPSBhd2FpdCBzdHNDbGllbnQuc2VuZChnZXRDYWxsZXJJZGVudGl0eUNvbW1hbmQpO1xuICAgICAgICByZXR1cm4gQWNjb3VudC5BY2NvdW50O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdldHRpbmcgYWNjb3VudCBJRDpcIiwgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59XG47XG4vLyBmdW5jdGlvbiBjaGVja2luZyBpZiBtYW5hZ2VtZW50IGFjY291bnQsIG1lbWJlciBhY2NvdW50LCBvciBzdGFuZGFsb25lIGFjY291bnRcbmV4cG9ydCBjb25zdCBkZWZpbmVBY2NvdW50VHlwZSA9IGFzeW5jIChyZWdpb24pID0+IHtcbiAgICBjb25zdCBvcmdhbml6YXRpb25zQ2xpZW50ID0gbmV3IE9yZ2FuaXphdGlvbnNDbGllbnQoeyByZWdpb24gfSk7XG4gICAgbGV0IGlzSW5Pcmdhbml6YXRpb24gPSBmYWxzZTtcbiAgICBsZXQgaXNNYW5hZ2VtZW50QWNjb3VudCA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRBY2NvdW50SWQgPSBhd2FpdCBnZXRBY2NvdW50SWQocmVnaW9uKTtcbiAgICAgICAgaWYgKGN1cnJlbnRBY2NvdW50SWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaWJlT3JnYW5pemF0aW9uQ29tbWFuZCA9IG5ldyBEZXNjcmliZU9yZ2FuaXphdGlvbkNvbW1hbmQoe30pO1xuICAgICAgICAgICAgY29uc3QgZGVzY3JpYmVPcmdhbml6YXRpb25SZXNwb25zZSA9IGF3YWl0IG9yZ2FuaXphdGlvbnNDbGllbnQuc2VuZChkZXNjcmliZU9yZ2FuaXphdGlvbkNvbW1hbmQpO1xuICAgICAgICAgICAgLy8gdGhlIGFjY291bnQgaXMgbm90IHN0YW5kYWxvbmUgYW5kIHBhcnQgb2YgQVdTIE9yZ2FuaXphdGlvblxuICAgICAgICAgICAgaWYgKGRlc2NyaWJlT3JnYW5pemF0aW9uUmVzcG9uc2UuT3JnYW5pemF0aW9uPy5NYXN0ZXJBY2NvdW50SWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYW5hZ2VtZW50QWNjb3VudElkID0gZGVzY3JpYmVPcmdhbml6YXRpb25SZXNwb25zZS5Pcmdhbml6YXRpb24/Lk1hc3RlckFjY291bnRJZDtcbiAgICAgICAgICAgICAgICBpZiAobWFuYWdlbWVudEFjY291bnRJZCA9PSBjdXJyZW50QWNjb3VudElkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgYW4gb3JnYW5pemF0aW9uIGFuZCB0aGlzIGlzIHRoZSBtYW5hZ2VtZW50IGFjY291bnRcbiAgICAgICAgICAgICAgICAgICAgaXNNYW5hZ2VtZW50QWNjb3VudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlzSW5Pcmdhbml6YXRpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlcmUgaXMgYW4gb3JnYW5pemF0aW9uLCBidXQgdGhpcyBpc24ndCB0aGUgbWFuYWdlbWVudCBhY2NvdW50XG4gICAgICAgICAgICAgICAgICAgIGlzSW5Pcmdhbml6YXRpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHRoZXJlIGlzbid0IGFuIG9yZ2FuaXphdGlvbiBhbmQgdGhpcyBhY2NvdW50IGlzIHN0YW5kYWxvbmVcbiAgICAgICAgICAgICAgICBpc0luT3JnYW5pemF0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgb3JnYW5pemF0aW9uc0NsaWVudC5kZXN0cm95KCk7XG4gICAgfVxuICAgIHJldHVybiB7IGlzSW5Pcmdhbml6YXRpb24sIGlzTWFuYWdlbWVudEFjY291bnQgfTtcbn07XG4iLCJpbXBvcnQgeyBJQU1DbGllbnQsIExpc3RVc2Vyc0NvbW1hbmQsIExpc3RBY2Nlc3NLZXlzQ29tbWFuZCwgR2V0QWNjZXNzS2V5TGFzdFVzZWRDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1pYW1cIjtcbi8vIGZ1bmN0aW9uIGxpc3QgYWxsIElBTSB1c2VycyBhbmQgaWYgdGhleSBoYXZlIGtleXMgaW4gdGhlIG1hbmFnZW1lbnQgYWNjb3VudFxuY29uc3QgY2hlY2tJYW1Vc2VycyA9IGFzeW5jICgpID0+IHtcbiAgICAvLyBTZXQgdG8gdXMtZWFzdC0xIGFzIElBTSBpcyBnbG9iYWwgYW5kIHJlZ2lvbiBpc24ndCBhIGNvbmNlcm5cbiAgICBjb25zdCBpYW1DbGllbnQgPSBuZXcgSUFNQ2xpZW50KHsgcmVnaW9uOiAndXMtZWFzdC0xJyB9KTtcbiAgICBjb25zdCBpYW1Vc2VySW5mbyA9IFtdO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGxpc3RVc2Vyc0NvbW1hbmQgPSBuZXcgTGlzdFVzZXJzQ29tbWFuZCh7fSk7XG4gICAgICAgIGNvbnN0IGxpc3RVc2Vyc1Jlc3BvbnNlID0gYXdhaXQgaWFtQ2xpZW50LnNlbmQobGlzdFVzZXJzQ29tbWFuZCk7XG4gICAgICAgIGZvciAoY29uc3QgdXNlciBvZiBsaXN0VXNlcnNSZXNwb25zZS5Vc2VycyB8fCBbXSkge1xuICAgICAgICAgICAgY29uc3QgdXNlck5hbWUgPSB1c2VyLlVzZXJOYW1lIHx8IFwiXCI7XG4gICAgICAgICAgICBjb25zdCBsaXN0QWNjZXNzS2V5c0NvbW1hbmQgPSBuZXcgTGlzdEFjY2Vzc0tleXNDb21tYW5kKHtcbiAgICAgICAgICAgICAgICBVc2VyTmFtZTogdXNlck5hbWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RBY2Nlc3NLZXlzUmVzcG9uc2UgPSBhd2FpdCBpYW1DbGllbnQuc2VuZChsaXN0QWNjZXNzS2V5c0NvbW1hbmQpO1xuICAgICAgICAgICAgY29uc3QgYWNjZXNzS2V5cyA9IGxpc3RBY2Nlc3NLZXlzUmVzcG9uc2UuQWNjZXNzS2V5TWV0YWRhdGEgfHwgW107XG4gICAgICAgICAgICBpZiAoYWNjZXNzS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBhY2Nlc3NLZXkgb2YgYWNjZXNzS2V5cykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhY2Nlc3NLZXlJZCA9IGFjY2Vzc0tleS5BY2Nlc3NLZXlJZCB8fCBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBnZXRMYXN0VXNlZENvbW1hbmQgPSBuZXcgR2V0QWNjZXNzS2V5TGFzdFVzZWRDb21tYW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFjY2Vzc0tleUlkOiBhY2Nlc3NLZXlJZCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RVc2VkUmVzcG9uc2UgPSBhd2FpdCBpYW1DbGllbnQuc2VuZChnZXRMYXN0VXNlZENvbW1hbmQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3VuZFVzZXJJbmZvID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlck5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NLZXlJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RVc2VkOiBsYXN0VXNlZFJlc3BvbnNlICYmIGxhc3RVc2VkUmVzcG9uc2UuQWNjZXNzS2V5TGFzdFVzZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGAke2xhc3RVc2VkUmVzcG9uc2UuQWNjZXNzS2V5TGFzdFVzZWQuTGFzdFVzZWREYXRlfWAgfHwgXCJOb3QgYXZhaWxhYmxlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiTm90IGF2YWlsYWJsZVwiLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpYW1Vc2VySW5mby5wdXNoKGZvdW5kVXNlckluZm8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kVXNlckluZm8gPSB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJOYW1lXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpYW1Vc2VySW5mby5wdXNoKGZvdW5kVXNlckluZm8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGVycm9yKTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIGlhbUNsaWVudC5kZXN0cm95KCk7XG4gICAgfVxuICAgIHJldHVybiBpYW1Vc2VySW5mbztcbn07XG5leHBvcnQgZGVmYXVsdCBjaGVja0lhbVVzZXJzO1xuIiwiaW1wb3J0IHsgRUMyQ2xpZW50LCBEZXNjcmliZUluc3RhbmNlc0NvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LWVjMlwiO1xuYXN5bmMgZnVuY3Rpb24gY2hlY2tFYzJFeGlzdHMocmVnaW9ucykge1xuICAgIGxldCBlYzJWYWxpZGF0aW9uID0gW107XG4gICAgZm9yIChjb25zdCByZWdpb24gb2YgcmVnaW9ucykge1xuICAgICAgICBjb25zdCBlYzJDbGllbnQgPSBuZXcgRUMyQ2xpZW50KHsgcmVnaW9uIH0pO1xuICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IERlc2NyaWJlSW5zdGFuY2VzQ29tbWFuZCh7fSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGVjMkNsaWVudC5zZW5kKGNvbW1hbmQpO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLlJlc2VydmF0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5SZXNlcnZhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGBXQVJOSU5HOiBJbnN0YW5jZShzKSBleGlzdHMgaW4gcmVnaW9uOiAke3JlZ2lvbn1gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWMyRm91bmQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpb246IHJlZ2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVjMkZvdW5kOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGVjMlZhbGlkYXRpb24ucHVzaChlYzJGb3VuZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlYzJGb3VuZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcmVnaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgZWMyRm91bmQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGVjMlZhbGlkYXRpb24ucHVzaChlYzJGb3VuZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZWMyRm91bmQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcmVnaW9uLFxuICAgICAgICAgICAgICAgICAgICBlYzJGb3VuZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGVjMlZhbGlkYXRpb24ucHVzaChlYzJGb3VuZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3IgY2hlY2tpbmcgaW5zdGFuY2U6ICR7ZXJyb3J9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBlYzJDbGllbnQuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfSAvLyBlbmQgZm9yXG4gICAgcmV0dXJuIGVjMlZhbGlkYXRpb247XG59XG47XG5leHBvcnQgZGVmYXVsdCBjaGVja0VjMkV4aXN0cztcbiIsImltcG9ydCB7IEVDMkNsaWVudCwgRGVzY3JpYmVWcGNzQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtZWMyXCI7XG5hc3luYyBmdW5jdGlvbiBjaGVja1ZwY0V4aXN0cyhyZWdpb25zKSB7XG4gICAgbGV0IHZwY1ZhbGlkYXRpb24gPSBbXTtcbiAgICBmb3IgKGNvbnN0IHJlZ2lvbiBvZiByZWdpb25zKSB7XG4gICAgICAgIGNvbnN0IGVjMkNsaWVudCA9IG5ldyBFQzJDbGllbnQoeyByZWdpb24gfSk7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgRGVzY3JpYmVWcGNzQ29tbWFuZCh7fSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGVjMkNsaWVudC5zZW5kKGNvbW1hbmQpO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLlZwY3MpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuVnBjcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coYFdBUk5JTkc6IFZQQyhzKSBleGlzdHMgaW4gcmVnaW9uOiAke3JlZ2lvbn1gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdnBjRm91bmQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpb246IHJlZ2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHZwY0ZvdW5kOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZwY1ZhbGlkYXRpb24ucHVzaCh2cGNGb3VuZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2cGNGb3VuZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcmVnaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgdnBjRm91bmQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZwY1ZhbGlkYXRpb24ucHVzaCh2cGNGb3VuZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdnBjRm91bmQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcmVnaW9uLFxuICAgICAgICAgICAgICAgICAgICB2cGNGb3VuZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZwY1ZhbGlkYXRpb24ucHVzaCh2cGNGb3VuZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3IgY2hlY2tpbmcgaW5zdGFuY2U6ICR7ZXJyb3J9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBlYzJDbGllbnQuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfSAvLyBlbmQgZm9yXG4gICAgcmV0dXJuIHZwY1ZhbGlkYXRpb247XG59XG47XG5leHBvcnQgZGVmYXVsdCBjaGVja1ZwY0V4aXN0cztcbiIsImltcG9ydCB7IENsb3VkVHJhaWxDbGllbnQsIERlc2NyaWJlVHJhaWxzQ29tbWFuZCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHRyYWlsJztcbmFzeW5jIGZ1bmN0aW9uIGNoZWNrQ2xvdWRUcmFpbEV4aXN0cyhyZWdpb25zKSB7XG4gICAgbGV0IGNsb3VkVHJhaWxWYWxpZGF0aW9uID0gW107XG4gICAgZm9yIChjb25zdCByZWdpb24gb2YgcmVnaW9ucykge1xuICAgICAgICBjb25zdCBjbG91ZFRyYWlsQ2xpZW50ID0gbmV3IENsb3VkVHJhaWxDbGllbnQoeyByZWdpb24gfSk7XG4gICAgICAgIGNvbnN0IGNsb3VkVHJhaWxEZXNjcmliZUNvbW1hbmQgPSBuZXcgRGVzY3JpYmVUcmFpbHNDb21tYW5kKHt9KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNsb3VkVHJhaWxSZXNwb25zZSA9IGF3YWl0IGNsb3VkVHJhaWxDbGllbnQuc2VuZChjbG91ZFRyYWlsRGVzY3JpYmVDb21tYW5kKTtcbiAgICAgICAgICAgIGlmIChjbG91ZFRyYWlsUmVzcG9uc2UudHJhaWxMaXN0KSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0cmFpbCBvZiBjbG91ZFRyYWlsUmVzcG9uc2UudHJhaWxMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0cmFpbEluZm8gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyYWlsLkhvbWVSZWdpb24gPT0gcmVnaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGB0cmFpbCBmb3VuZCBpbiAke3JlZ2lvbn1gKVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhaWxJbmZvID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcmVnaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWlsRm91bmQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPcmdUcmFpbDogdHJhaWwuSXNNdWx0aVJlZ2lvblRyYWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTXVsdGlSZWdpb246IHRyYWlsLklzTXVsdGlSZWdpb25UcmFpbFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWlsSW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpb246IHJlZ2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFpbEZvdW5kOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjbG91ZFRyYWlsVmFsaWRhdGlvbi5wdXNoKHRyYWlsSW5mbyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEVycm9yIGNoZWNraW5nIGluc3RhbmNlOiAke2Vycm9yfWApO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgY2xvdWRUcmFpbENsaWVudC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9IC8vIGVuZCBmb3IgcmVnaW9uc1xuICAgIHJldHVybiBjbG91ZFRyYWlsVmFsaWRhdGlvbjtcbn1cbjtcbmV4cG9ydCBkZWZhdWx0IGNoZWNrQ2xvdWRUcmFpbEV4aXN0cztcbiIsImltcG9ydCB7IENvbmZpZ1NlcnZpY2VDbGllbnQsIERlc2NyaWJlQ29uZmlndXJhdGlvblJlY29yZGVyU3RhdHVzQ29tbWFuZCwgRGVzY3JpYmVEZWxpdmVyeUNoYW5uZWxzQ29tbWFuZCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1jb25maWctc2VydmljZSc7XG5hc3luYyBmdW5jdGlvbiBjaGVja0NvbmZpZ0V4aXN0cyhyZWdpb25zKSB7XG4gICAgbGV0IGNvbmZpZ0RldGFpbHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHJlZ2lvbiBvZiByZWdpb25zKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZ1NlcnZpY2VDbGllbnQgPSBuZXcgQ29uZmlnU2VydmljZUNsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICAgICAgbGV0IGNvbmZpZ0RldGFpbCA9IHtcbiAgICAgICAgICAgIHJlZ2lvbjogcmVnaW9uLFxuICAgICAgICAgICAgY29uZmlnUmVjb3JkZXJGb3VuZDogZmFsc2UsXG4gICAgICAgICAgICBjb25maWdEZWxpdmVyeUNoYW5uZWxGb3VuZDogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIENvbmZpZyByZWNvcmRlciBleGlzdHNcbiAgICAgICAgICAgIGNvbnN0IHJlY29yZGVyUmVzcG9uc2UgPSBhd2FpdCBjb25maWdTZXJ2aWNlQ2xpZW50LnNlbmQobmV3IERlc2NyaWJlQ29uZmlndXJhdGlvblJlY29yZGVyU3RhdHVzQ29tbWFuZCh7fSkpO1xuICAgICAgICAgICAgY29uc3QgcmVjb3JkZXJFeGlzdHMgPSByZWNvcmRlclJlc3BvbnNlLkNvbmZpZ3VyYXRpb25SZWNvcmRlcnNTdGF0dXM/Lmxlbmd0aCAhPT0gMDtcbiAgICAgICAgICAgIGlmIChyZWNvcmRlckV4aXN0cykge1xuICAgICAgICAgICAgICAgIGNvbmZpZ0RldGFpbC5jb25maWdSZWNvcmRlckZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIENvbmZpZyBkZWxpdmVyeSBjaGFubmVsIGV4aXN0c1xuICAgICAgICAgICAgY29uc3QgY2hhbm5lbFJlc3BvbnNlID0gYXdhaXQgY29uZmlnU2VydmljZUNsaWVudC5zZW5kKG5ldyBEZXNjcmliZURlbGl2ZXJ5Q2hhbm5lbHNDb21tYW5kKHt9KSk7XG4gICAgICAgICAgICBjb25zdCBjaGFubmVsRXhpc3RzID0gY2hhbm5lbFJlc3BvbnNlLkRlbGl2ZXJ5Q2hhbm5lbHM/Lmxlbmd0aCAhPT0gMDtcbiAgICAgICAgICAgIGlmIChjaGFubmVsRXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnRGV0YWlsLmNvbmZpZ0RlbGl2ZXJ5Q2hhbm5lbEZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbmZpZ0RldGFpbHMucHVzaChjb25maWdEZXRhaWwpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgY2hlY2tpbmcgQVdTIENvbmZpZyBpbiAke3JlZ2lvbn06YCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgY29uZmlnU2VydmljZUNsaWVudC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvbmZpZ0RldGFpbHM7XG59XG5leHBvcnQgZGVmYXVsdCBjaGVja0NvbmZpZ0V4aXN0cztcbiIsImltcG9ydCB7IE9yZ2FuaXphdGlvbnNDbGllbnQsIERlc2NyaWJlT3JnYW5pemF0aW9uQ29tbWFuZCwgTGlzdFJvb3RzQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtb3JnYW5pemF0aW9uc1wiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0T3JnRGV0YWlscyhyZWdpb24pIHtcbiAgICBjb25zdCBvcmdDbGllbnQgPSBuZXcgT3JnYW5pemF0aW9uc0NsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICBsZXQgb3JnRGV0YWlscyA9IHt9O1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG9yZ0Rlc2NyaWJlQ29tbWFuZCA9IG5ldyBEZXNjcmliZU9yZ2FuaXphdGlvbkNvbW1hbmQoe30pO1xuICAgICAgICBjb25zdCBvcmdEYXRhID0gYXdhaXQgb3JnQ2xpZW50LnNlbmQob3JnRGVzY3JpYmVDb21tYW5kKTtcbiAgICAgICAgaWYgKG9yZ0RhdGEuT3JnYW5pemF0aW9uKSB7XG4gICAgICAgICAgICBvcmdEZXRhaWxzLmlkID0gb3JnRGF0YS5Pcmdhbml6YXRpb24uSWQgPz8gXCJcIjtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBPcmdhbml6YXRpb24gSUQ6ICR7b3JnRGV0YWlscy5pZH1gICk7XG4gICAgICAgICAgICBvcmdEZXRhaWxzLmFybiA9IG9yZ0RhdGEuT3JnYW5pemF0aW9uLkFybiA/PyBcIlwiO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYE9yZ2FuaXphdGlvbiBBUk46ICR7b3JnRGV0YWlscy5hcm59YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBMaXN0Um9vdHNDb21tYW5kKHt9KTtcbiAgICAgICAgY29uc3Qgcm9vdHMgPSBhd2FpdCBvcmdDbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICAgICAgaWYgKHJvb3RzLlJvb3RzKSB7XG4gICAgICAgICAgICBvcmdEZXRhaWxzLnJvb3RPdUlkID0gcm9vdHMuUm9vdHNbMF0uSWQ7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgQVdTIE9yZyByb290IG91IGlkOiAke29yZ0RldGFpbHMucm9vdE91SWR9YClcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBpbmZvIGZvdW5kIGZvciB5b3VyIEFXUyBPcmdhbml6YXRpb24uJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEFuIGVycm9yIG9jY3VycmVkOiAke2Vycm9yfWApO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgb3JnQ2xpZW50LmRlc3Ryb3koKTtcbiAgICAgICAgcmV0dXJuIG9yZ0RldGFpbHM7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgZ2V0T3JnRGV0YWlscztcbiIsImltcG9ydCB7IENvc3RBbmRVc2FnZVJlcG9ydFNlcnZpY2VDbGllbnQsIERlc2NyaWJlUmVwb3J0RGVmaW5pdGlvbnNDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1jb3N0LWFuZC11c2FnZS1yZXBvcnQtc2VydmljZVwiO1xuY29uc3QgY2hlY2tMZWdhY3lDdXIgPSBhc3luYyAocmVnaW9uKSA9PiB7XG4gICAgLy8gU2V0IHVwIEFXUyBTREsgY2xpZW50IGZvciBDb3N0IEV4cGxvcmVyXG4gICAgY29uc3QgY3VyQ2xpZW50ID0gbmV3IENvc3RBbmRVc2FnZVJlcG9ydFNlcnZpY2VDbGllbnQoeyByZWdpb24gfSk7XG4gICAgbGV0IGlzTGVnYWN5Q3VyU2V0dXAgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICAvLyBDaGVjayBpZiBDb3N0IEV4cGxvcmVyIGlzIHNldCB1cFxuICAgICAgICBjb25zdCBpbnB1dCA9IHt9O1xuICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IERlc2NyaWJlUmVwb3J0RGVmaW5pdGlvbnNDb21tYW5kKGlucHV0KTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjdXJDbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLlJlcG9ydERlZmluaXRpb25zICYmIHJlc3BvbnNlLlJlcG9ydERlZmluaXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlzTGVnYWN5Q3VyU2V0dXAgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGlzTGVnYWN5Q3VyU2V0dXAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBlcnJvciBpcyByZWxhdGVkIHRvIENvc3QgRXhwbG9yZXIgc2V0dXBcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgICAgIGlzTGVnYWN5Q3VyU2V0dXAgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHsgaXNMZWdhY3lDdXJTZXR1cCB9O1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgLy8gQ2xvc2UgdGhlIEFXUyBTREsgY2xpZW50XG4gICAgICAgIGN1ckNsaWVudC5kZXN0cm95KCk7XG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IGNoZWNrTGVnYWN5Q3VyO1xuIiwiaW1wb3J0IHsgT3JnYW5pemF0aW9uc0NsaWVudCwgTGlzdFJvb3RzQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtb3JnYW5pemF0aW9uc1wiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0RW5hYmxlZE9yZ1BvbGljeVR5cGVzKHJlZ2lvbikge1xuICAgIGNvbnN0IG9yZ0NsaWVudCA9IG5ldyBPcmdhbml6YXRpb25zQ2xpZW50KHsgcmVnaW9uIH0pO1xuICAgIGxldCBwb2xpY3lUeXBlc0VuYWJsZWQgPSB7XG4gICAgICAgIHNjcEVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICB0YWdQb2xpY3lFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgYmFja3VwUG9saWN5RW5hYmxlZDogZmFsc2VcbiAgICB9O1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0ge307XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgTGlzdFJvb3RzQ29tbWFuZChpbnB1dCk7XG4gICAgICAgIGNvbnN0IHJvb3RzID0gYXdhaXQgb3JnQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgIGlmIChyb290cy5Sb290cykge1xuICAgICAgICAgICAgaWYgKHJvb3RzLlJvb3RzWzBdLlBvbGljeVR5cGVzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlbmFibGVkUG9saWN5IG9mIHJvb3RzLlJvb3RzWzBdLlBvbGljeVR5cGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmFibGVkUG9saWN5LlR5cGUgPT0gJ1NFUlZJQ0VfQ09OVFJPTF9QT0xJQ1knICYmIGVuYWJsZWRQb2xpY3kuU3RhdHVzID09ICdFTkFCTEVEJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5VHlwZXNFbmFibGVkLnNjcEVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmFibGVkUG9saWN5LlR5cGUgPT0gJ1RBR19QT0xJQ1knICYmIGVuYWJsZWRQb2xpY3kuU3RhdHVzID09ICdFTkFCTEVEJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5VHlwZXNFbmFibGVkLnRhZ1BvbGljeUVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmFibGVkUG9saWN5LlR5cGUgPT0gJ0JBQ0tVUF9QT0xJQ1knICYmIGVuYWJsZWRQb2xpY3kuU3RhdHVzID09ICdFTkFCTEVEJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5VHlwZXNFbmFibGVkLmJhY2t1cFBvbGljeUVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSAvLyBlbmQgZm9yXG4gICAgICAgICAgICB9IC8vIGVuZCBpZlxuICAgICAgICB9IC8vIGVuZCBpZlxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgQW4gZXJyb3Igb2NjdXJyZWQ6ICR7ZXJyb3J9YCk7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBvcmdDbGllbnQuZGVzdHJveSgpO1xuICAgICAgICByZXR1cm4gcG9saWN5VHlwZXNFbmFibGVkO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IGdldEVuYWJsZWRPcmdQb2xpY3lUeXBlcztcbiIsImltcG9ydCB7IE9yZ2FuaXphdGlvbnNDbGllbnQsIExpc3RBV1NTZXJ2aWNlQWNjZXNzRm9yT3JnYW5pemF0aW9uQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtb3JnYW5pemF0aW9uc1wiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0RW5hYmxlZE9yZ1NlcnZpY2VzKHJlZ2lvbikge1xuICAgIGNvbnN0IGRpc2NvdmVyZWRPcmdTZXJ2aWNlcyA9IFtdO1xuICAgIGNvbnN0IG9yZ0NsaWVudCA9IG5ldyBPcmdhbml6YXRpb25zQ2xpZW50KHsgcmVnaW9uIH0pO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG9yZ1NlcnZpY2VBY2Nlc3NDb21tYW5kID0gbmV3IExpc3RBV1NTZXJ2aWNlQWNjZXNzRm9yT3JnYW5pemF0aW9uQ29tbWFuZCh7fSk7XG4gICAgICAgIGNvbnN0IG9yZ1NlcnZpY2VBY2Nlc3NSZXNwb25zZSA9IGF3YWl0IG9yZ0NsaWVudC5zZW5kKG9yZ1NlcnZpY2VBY2Nlc3NDb21tYW5kKTtcbiAgICAgICAgaWYgKG9yZ1NlcnZpY2VBY2Nlc3NSZXNwb25zZS5FbmFibGVkU2VydmljZVByaW5jaXBhbHMgJiYgb3JnU2VydmljZUFjY2Vzc1Jlc3BvbnNlLkVuYWJsZWRTZXJ2aWNlUHJpbmNpcGFscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBvcmdTZXJ2aWNlQWNjZXNzUmVzcG9uc2UuRW5hYmxlZFNlcnZpY2VQcmluY2lwYWxzO1xuICAgICAgICAgICAgZm9yIChjb25zdCBvcmdTZXJ2aWNlIG9mIG9yZ1NlcnZpY2VBY2Nlc3NSZXNwb25zZS5FbmFibGVkU2VydmljZVByaW5jaXBhbHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmb3VuZE9yZ1NlcnZpY2UgPSB7IHNlcnZpY2U6IG9yZ1NlcnZpY2UuU2VydmljZVByaW5jaXBhbCA/PyBcIlwiIH07XG4gICAgICAgICAgICAgICAgZGlzY292ZXJlZE9yZ1NlcnZpY2VzLnB1c2goZm91bmRPcmdTZXJ2aWNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgc2VydmljZSBhY2Nlc3M6JywgZXJyb3IpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgb3JnQ2xpZW50LmRlc3Ryb3koKTtcbiAgICAgICAgcmV0dXJuIGRpc2NvdmVyZWRPcmdTZXJ2aWNlcztcbiAgICB9XG59XG47XG5leHBvcnQgZGVmYXVsdCBnZXRFbmFibGVkT3JnU2VydmljZXM7XG4iLCJpbXBvcnQgeyBDbG91ZEZvcm1hdGlvbkNsaWVudCwgRGVzY3JpYmVPcmdhbml6YXRpb25zQWNjZXNzQ29tbWFuZCwgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LWNsb3VkZm9ybWF0aW9uXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRPcmdDbG91ZEZvcm1hdGlvbihyZWdpb24pIHtcbiAgICBsZXQgb3JnQ2ZuU3RhdHVzID0ge1xuICAgICAgICBzdGF0dXM6IFwiZGlzYWJsZWRcIlxuICAgIH07XG4gICAgY29uc3QgY2xvdWRGb3JtYXRpb25DbGllbnQgPSBuZXcgQ2xvdWRGb3JtYXRpb25DbGllbnQoeyByZWdpb24gfSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGVzY3JpYmVPcmdBY2Nlc3NJbnB1dCA9IHt9O1xuICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IERlc2NyaWJlT3JnYW5pemF0aW9uc0FjY2Vzc0NvbW1hbmQoZGVzY3JpYmVPcmdBY2Nlc3NJbnB1dCk7XG4gICAgICAgIGNvbnN0IGNsb3VkRm9ybWF0aW9uT3JnQWNjZXNzID0gYXdhaXQgY2xvdWRGb3JtYXRpb25DbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIkNsb3VkRm9ybWF0aW9uIGFjdGl2YXRpb24gc3RhdHVzOiBcIiwgY2xvdWRGb3JtYXRpb25PcmdBY2Nlc3MuU3RhdHVzKVxuICAgICAgICBvcmdDZm5TdGF0dXMuc3RhdHVzID0gY2xvdWRGb3JtYXRpb25PcmdBY2Nlc3MuU3RhdHVzID8/IFwiZGlzYWJsZWRcIjtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJvcn1gKTtcbiAgICAgICAgLy90aHJvdyBuZXcgRXJyb3IoYEVycm9yOiAke2Vycm9yfWApO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgY2xvdWRGb3JtYXRpb25DbGllbnQuZGVzdHJveSgpO1xuICAgICAgICByZXR1cm4gb3JnQ2ZuU3RhdHVzO1xuICAgIH1cbn1cbjtcbmV4cG9ydCBkZWZhdWx0IGdldE9yZ0Nsb3VkRm9ybWF0aW9uO1xuIiwiaW1wb3J0IHsgQ29udHJvbFRvd2VyQ2xpZW50LCBMaXN0TGFuZGluZ1pvbmVzQ29tbWFuZCwgR2V0TGFuZGluZ1pvbmVDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1jb250cm9sdG93ZXJcIjtcbmFzeW5jIGZ1bmN0aW9uIGdldENvbnRyb2xUb3dlcihyZWdpb24pIHtcbiAgICBsZXQgY29udHJvbFRvd2VySW5mbyA9IHt9O1xuICAgIGNvbnN0IGNvbnRyb2xUb3dlckNsaWVudCA9IG5ldyBDb250cm9sVG93ZXJDbGllbnQoeyByZWdpb24gfSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBMaXN0TGFuZGluZ1pvbmVzQ29tbWFuZCh7fSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY29udHJvbFRvd2VyQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmxhbmRpbmdab25lcywgbnVsbCwgMikpO1xuICAgICAgICBpZiAocmVzcG9uc2UubGFuZGluZ1pvbmVzICYmIHJlc3BvbnNlLmxhbmRpbmdab25lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IHtcbiAgICAgICAgICAgICAgICBsYW5kaW5nWm9uZUlkZW50aWZpZXI6IHJlc3BvbnNlLmxhbmRpbmdab25lc1swXS5hcm4sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgbHpSZWdpb24gPSByZXNwb25zZS5sYW5kaW5nWm9uZXNbMF0uYXJuPy50b1N0cmluZygpLnNwbGl0KCc6JylbM10gPz8gXCJcIjtcbiAgICAgICAgICAgIGlmIChselJlZ2lvbikge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xUb3dlckluZm8uY29udHJvbFRvd2VyUmVnaW9uID0gbHpSZWdpb247XG4gICAgICAgICAgICAgICAgY29uc3QgY29udHJvbFRvd2VyQ2xpZW50UmVnaW9uID0gbmV3IENvbnRyb2xUb3dlckNsaWVudCh7IHJlZ2lvbjogbHpSZWdpb24gfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBHZXRMYW5kaW5nWm9uZUNvbW1hbmQoaW5wdXQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGx6UmVzcG9uc2UgPSBhd2FpdCBjb250cm9sVG93ZXJDbGllbnRSZWdpb24uc2VuZChjb21tYW5kKTtcbiAgICAgICAgICAgICAgICBpZiAobHpSZXNwb25zZS5sYW5kaW5nWm9uZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShselJlc3BvbnNlLmxhbmRpbmdab25lLCBudWxsLCAyKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xUb3dlckluZm8uc3RhdHVzID0gbHpSZXNwb25zZS5sYW5kaW5nWm9uZS5zdGF0dXM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xUb3dlckluZm8ubGF0ZXN0QXZhaWxhYmxlVmVyc2lvbiA9IGx6UmVzcG9uc2UubGFuZGluZ1pvbmUubGF0ZXN0QXZhaWxhYmxlVmVyc2lvbjtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbFRvd2VySW5mby5kZXBsb3llZFZlcnNpb24gPSBselJlc3BvbnNlLmxhbmRpbmdab25lLnZlcnNpb247XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xUb3dlckluZm8uZHJpZnRTdGF0dXMgPSBselJlc3BvbnNlLmxhbmRpbmdab25lLmRyaWZ0U3RhdHVzPy5zdGF0dXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjaGVja2luZyBDb250cm9sIFRvd2VyIGluICR7cmVnaW9ufTpgLCBlcnJvcik7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBjb250cm9sVG93ZXJDbGllbnQuZGVzdHJveSgpO1xuICAgIH1cbiAgICByZXR1cm4gY29udHJvbFRvd2VySW5mbztcbn1cbmV4cG9ydCBkZWZhdWx0IGdldENvbnRyb2xUb3dlcjtcbiIsImltcG9ydCB7IFNTT0FkbWluQ2xpZW50LCBMaXN0SW5zdGFuY2VzQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtc3NvLWFkbWluXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRJZGNJbmZvKHJlZ2lvbkxpc3QpIHtcbiAgICBsZXQgaWRjRGV0YWlscyA9IHsgZm91bmQ6IGZhbHNlIH07XG4gICAgZm9yIChjb25zdCByZWdpb24gb2YgcmVnaW9uTGlzdCkge1xuICAgICAgICBjb25zdCBzc29BZG1pbkNsaWVudCA9IG5ldyBTU09BZG1pbkNsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHNzb0lucHV0ID0ge1xuICAgICAgICAgICAgICAgIE1heFJlc3VsdHM6IE51bWJlcihcIjEwMFwiKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgTGlzdEluc3RhbmNlc0NvbW1hbmQoc3NvSW5wdXQpO1xuICAgICAgICAgICAgY29uc3Qgc3NvSW5zdGFuY2VSZXNwb25zZSA9IGF3YWl0IHNzb0FkbWluQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgICAgICBpZiAoc3NvSW5zdGFuY2VSZXNwb25zZS5JbnN0YW5jZXMgJiYgc3NvSW5zdGFuY2VSZXNwb25zZS5JbnN0YW5jZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNzb0luc3RhbmNlID0gc3NvSW5zdGFuY2VSZXNwb25zZS5JbnN0YW5jZXNbMF07XG4gICAgICAgICAgICAgICAgaWRjRGV0YWlscy5mb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWRjRGV0YWlscy5yZWdpb24gPSByZWdpb247XG4gICAgICAgICAgICAgICAgaWRjRGV0YWlscy5hcm4gPSBzc29JbnN0YW5jZS5JbnN0YW5jZUFybjtcbiAgICAgICAgICAgICAgICBpZGNEZXRhaWxzLmlkID0gc3NvSW5zdGFuY2UuSWRlbnRpdHlTdG9yZUlkO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEVycm9yIGxvb2tpbmcgZm9yIEFXUyBJZGVudGl0eSBDZW50ZXIgZGV0YWlscyBpbiByZWdpb24gJHtyZWdpb259YCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBzc29BZG1pbkNsaWVudC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGlkY0RldGFpbHM7XG59XG47XG5leHBvcnQgZGVmYXVsdCBnZXRJZGNJbmZvO1xuIiwiaW1wb3J0IHsgT3JnYW5pemF0aW9uc0NsaWVudCwgTGlzdERlbGVnYXRlZEFkbWluaXN0cmF0b3JzQ29tbWFuZCwgTGlzdERlbGVnYXRlZFNlcnZpY2VzRm9yQWNjb3VudENvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LW9yZ2FuaXphdGlvbnNcIjtcbmFzeW5jIGZ1bmN0aW9uIGdldE9yZ0RhQWNjb3VudHMoKSB7XG4gICAgbGV0IG9yZ0RhRGV0YWlscyA9IFtdO1xuICAgIGNvbnN0IG9yZ0NsaWVudCA9IG5ldyBPcmdhbml6YXRpb25zQ2xpZW50KHsgcmVnaW9uOiAndXMtZWFzdC0xJyB9KTtcbiAgICBsZXQgb3JnRGFEZXRhaWwgPSB7fTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IExpc3REZWxlZ2F0ZWRBZG1pbmlzdHJhdG9yc0NvbW1hbmQoe30pO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG9yZ0NsaWVudC5zZW5kKGNvbW1hbmQpO1xuICAgICAgICBpZiAocmVzcG9uc2UuRGVsZWdhdGVkQWRtaW5pc3RyYXRvcnMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZGEgb2YgcmVzcG9uc2UuRGVsZWdhdGVkQWRtaW5pc3RyYXRvcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dCA9IHsgQWNjb3VudElkOiBkYS5JZCB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgTGlzdERlbGVnYXRlZFNlcnZpY2VzRm9yQWNjb3VudENvbW1hbmQoaW5wdXQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjY291bnRSZXNwb25zZSA9IGF3YWl0IG9yZ0NsaWVudC5zZW5kKGNvbW1hbmQpO1xuICAgICAgICAgICAgICAgIGlmIChhY2NvdW50UmVzcG9uc2UuRGVsZWdhdGVkU2VydmljZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgb3JnRGFEZXRhaWwgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlczogYWNjb3VudFJlc3BvbnNlLkRlbGVnYXRlZFNlcnZpY2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudE5hbWU6IGRhLk5hbWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgb3JnRGFEZXRhaWxzLnB1c2gob3JnRGFEZXRhaWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIGxvb2tpbmcgZm9yIGRlbGVnYXRlZCBzZXJ2aWNlcy5gKTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIG9yZ0NsaWVudC5kZXN0cm95KCk7XG4gICAgfVxuICAgIHJldHVybiBvcmdEYURldGFpbHM7XG59XG47XG5leHBvcnQgZGVmYXVsdCBnZXRPcmdEYUFjY291bnRzO1xuIiwiaW1wb3J0IHsgT3JnYW5pemF0aW9uc0NsaWVudCwgTGlzdEFjY291bnRzQ29tbWFuZCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1vcmdhbml6YXRpb25zJztcbmFzeW5jIGZ1bmN0aW9uIGdldE9yZ01lbWJlckFjY291bnRzKCkge1xuICAgIGxldCBvcmdNZW1iZXJBY2NvdW50SW5mbyA9IFtdO1xuICAgIGNvbnN0IG9yZ3NDbGllbnQgPSBuZXcgT3JnYW5pemF0aW9uc0NsaWVudCh7IHJlZ2lvbjogJ3VzLWVhc3QtMScgfSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcmdzQ2xpZW50LnNlbmQobmV3IExpc3RBY2NvdW50c0NvbW1hbmQoe30pKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLkFjY291bnRzICYmIHJlc3BvbnNlLkFjY291bnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYWNjb3VudCBvZiByZXNwb25zZS5BY2NvdW50cykge1xuICAgICAgICAgICAgICAgIGxldCBvcmdNZW1iZXJBY2NvdW50ID0ge1xuICAgICAgICAgICAgICAgICAgICBhY2NvdW50TmFtZTogYWNjb3VudC5OYW1lLFxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50RW1haWw6IGFjY291bnQuRW1haWwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBvcmdNZW1iZXJBY2NvdW50SW5mby5wdXNoKG9yZ01lbWJlckFjY291bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsaXN0aW5nIEFXUyBhY2NvdW50czonLCBlcnJvcik7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBvcmdzQ2xpZW50LmRlc3Ryb3koKTtcbiAgICB9XG4gICAgcmV0dXJuIG9yZ01lbWJlckFjY291bnRJbmZvO1xufVxuZXhwb3J0IGRlZmF1bHQgZ2V0T3JnTWVtYmVyQWNjb3VudHM7XG4iLCJpbXBvcnQgeyBPcmdhbml6YXRpb25zQ2xpZW50LCBMaXN0T3JnYW5pemF0aW9uYWxVbml0c0ZvclBhcmVudENvbW1hbmQsIExpc3RBY2NvdW50c0ZvclBhcmVudENvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LW9yZ2FuaXphdGlvbnNcIjtcbmFzeW5jIGZ1bmN0aW9uIGdldE9yZ1RvcExldmVsT3VzKHJlZ2lvbiwgcm9vdE91SWQpIHtcbiAgICBjb25zdCBvcmdDbGllbnQgPSBuZXcgT3JnYW5pemF0aW9uc0NsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICBsZXQgdG9wTGV2ZWxPdXMgPSBbXTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBsaXN0T1VzQ29tbWFuZCA9IG5ldyBMaXN0T3JnYW5pemF0aW9uYWxVbml0c0ZvclBhcmVudENvbW1hbmQoe1xuICAgICAgICAgICAgUGFyZW50SWQ6IHJvb3RPdUlkLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbGlzdE9Vc1Jlc3BvbnNlID0gYXdhaXQgb3JnQ2xpZW50LnNlbmQobGlzdE9Vc0NvbW1hbmQpO1xuICAgICAgICBpZiAobGlzdE9Vc1Jlc3BvbnNlLk9yZ2FuaXphdGlvbmFsVW5pdHMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3Ugb2YgbGlzdE9Vc1Jlc3BvbnNlLk9yZ2FuaXphdGlvbmFsVW5pdHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgdG9wTGV2ZWxPdSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IG91LklkLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBvdS5OYW1lXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBhY2NvdW50UmVzcG9uc2UgPSBhd2FpdCBvcmdDbGllbnQuc2VuZChuZXcgTGlzdEFjY291bnRzRm9yUGFyZW50Q29tbWFuZCh7IFBhcmVudElkOiBvdS5JZCB9KSk7XG4gICAgICAgICAgICAgICAgaWYgKGFjY291bnRSZXNwb25zZS5BY2NvdW50cyAmJiBhY2NvdW50UmVzcG9uc2UuQWNjb3VudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0b3BMZXZlbE91LmFjY291bnRzID0gYWNjb3VudFJlc3BvbnNlLkFjY291bnRzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0b3BMZXZlbE91cy5wdXNoKHRvcExldmVsT3UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBzZXJ2aWNlIGFjY2VzczonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIG9yZ0NsaWVudC5kZXN0cm95KCk7XG4gICAgfVxuICAgIHJldHVybiB0b3BMZXZlbE91cztcbn1cbjtcbmV4cG9ydCBkZWZhdWx0IGdldE9yZ1RvcExldmVsT3VzO1xuIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJhc3luYyIsImRlcGxveU91VGFzayIsInRhc2tOdW1iZXIiLCJ3YXlwb2ludCIsIk91TmFtZSIsInJlbW92ZUlhbVVzZXJUYXNrIiwiSWFtVXNlck5hbWUiLCJyZW1vdmVJYW1Vc2VyQXBpS2V5VGFzayIsIklhbVVzZXJBcGlLZXlJZCIsImRlbGV0ZVZwYyIsInJlZ2lvbiIsImRlbGV0ZUVjMiIsImVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2UiLCJzZXJ2aWNlTmFtZSIsImRlbGVnYXRlQWRtaW5pc3RyYXRpb25Bd3NTZXJ2aWNlIiwiZW5hYmxlUG9saWN5VHlwZVRhc2siLCJwb2xpY3lUeXBlIiwicmVwb3J0RmlsZSIsImRhdGVUaW1lIiwiRGF0ZSIsInByb2Nlc3MiLCJlbnYiLCJBV1NfUkVHSU9OIiwiYWxsUmVnaW9ucyIsImVjMkNsaWVudCIsIkVDMkNsaWVudCIsImRlc2NyaWJlUmVnaW9uc0NvbW1hbmQiLCJEZXNjcmliZVJlZ2lvbnNDb21tYW5kIiwicmVzcG9uc2UiLCJzZW5kIiwicmVnaW9ucyIsIlJlZ2lvbnMiLCJwdXNoIiwiUmVnaW9uTmFtZSIsImVycm9yIiwiY29uc29sZSIsImRlc3Ryb3kiLCJsb2ciLCJhY2NvdW50VHlwZSIsIm9yZ2FuaXphdGlvbnNDbGllbnQiLCJPcmdhbml6YXRpb25zQ2xpZW50IiwiaXNJbk9yZ2FuaXphdGlvbiIsImlzTWFuYWdlbWVudEFjY291bnQiLCJjdXJyZW50QWNjb3VudElkIiwic3RzQ2xpZW50IiwiU1RTQ2xpZW50IiwiZ2V0Q2FsbGVySWRlbnRpdHlDb21tYW5kIiwiR2V0Q2FsbGVySWRlbnRpdHlDb21tYW5kIiwiQWNjb3VudCIsImdldEFjY291bnRJZCIsImRlc2NyaWJlT3JnYW5pemF0aW9uQ29tbWFuZCIsIkRlc2NyaWJlT3JnYW5pemF0aW9uQ29tbWFuZCIsImRlc2NyaWJlT3JnYW5pemF0aW9uUmVzcG9uc2UiLCJPcmdhbml6YXRpb24iLCJNYXN0ZXJBY2NvdW50SWQiLCJtYW5hZ2VtZW50QWNjb3VudElkIiwiZGVmaW5lQWNjb3VudFR5cGUiLCJ0b1VUQ1N0cmluZyIsImRpciIsImRlcHRoIiwiY29sb3JzIiwiaWFtVXNlclJlc3VsdCIsImlhbUNsaWVudCIsIklBTUNsaWVudCIsImlhbVVzZXJJbmZvIiwibGlzdFVzZXJzQ29tbWFuZCIsIkxpc3RVc2Vyc0NvbW1hbmQiLCJsaXN0VXNlcnNSZXNwb25zZSIsInVzZXIiLCJVc2VycyIsInVzZXJOYW1lIiwiVXNlck5hbWUiLCJsaXN0QWNjZXNzS2V5c0NvbW1hbmQiLCJMaXN0QWNjZXNzS2V5c0NvbW1hbmQiLCJhY2Nlc3NLZXlzIiwiQWNjZXNzS2V5TWV0YWRhdGEiLCJsZW5ndGgiLCJhY2Nlc3NLZXkiLCJhY2Nlc3NLZXlJZCIsIkFjY2Vzc0tleUlkIiwiZ2V0TGFzdFVzZWRDb21tYW5kIiwiR2V0QWNjZXNzS2V5TGFzdFVzZWRDb21tYW5kIiwibGFzdFVzZWRSZXNwb25zZSIsImZvdW5kVXNlckluZm8iLCJsYXN0VXNlZCIsIkFjY2Vzc0tleUxhc3RVc2VkIiwiTGFzdFVzZWREYXRlIiwiaWFtVXNlciIsImVjMkNoZWNrIiwiZWMyVmFsaWRhdGlvbiIsImNvbW1hbmQiLCJEZXNjcmliZUluc3RhbmNlc0NvbW1hbmQiLCJSZXNlcnZhdGlvbnMiLCJlYzJGb3VuZCIsImZpbmQiLCJwYXJhbSIsImVjMiIsInZwY0NoZWNrIiwidnBjVmFsaWRhdGlvbiIsIkRlc2NyaWJlVnBjc0NvbW1hbmQiLCJWcGNzIiwidnBjRm91bmQiLCJ2cGNGaW5kIiwiY2xvdWRUcmFpbENoZWNrIiwiY2xvdWRUcmFpbFZhbGlkYXRpb24iLCJjbG91ZFRyYWlsQ2xpZW50IiwiQ2xvdWRUcmFpbENsaWVudCIsImNsb3VkVHJhaWxEZXNjcmliZUNvbW1hbmQiLCJEZXNjcmliZVRyYWlsc0NvbW1hbmQiLCJjbG91ZFRyYWlsUmVzcG9uc2UiLCJ0cmFpbExpc3QiLCJ0cmFpbCIsInRyYWlsSW5mbyIsIkhvbWVSZWdpb24iLCJ0cmFpbEZvdW5kIiwiaXNPcmdUcmFpbCIsIklzTXVsdGlSZWdpb25UcmFpbCIsImlzTXVsdGlSZWdpb24iLCJjb25maWdDaGVjayIsImNvbmZpZ0RldGFpbHMiLCJjb25maWdTZXJ2aWNlQ2xpZW50IiwiQ29uZmlnU2VydmljZUNsaWVudCIsImNvbmZpZ0RldGFpbCIsImNvbmZpZ1JlY29yZGVyRm91bmQiLCJjb25maWdEZWxpdmVyeUNoYW5uZWxGb3VuZCIsInJlY29yZGVyUmVzcG9uc2UiLCJEZXNjcmliZUNvbmZpZ3VyYXRpb25SZWNvcmRlclN0YXR1c0NvbW1hbmQiLCJDb25maWd1cmF0aW9uUmVjb3JkZXJzU3RhdHVzIiwiY2hhbm5lbFJlc3BvbnNlIiwiRGVzY3JpYmVEZWxpdmVyeUNoYW5uZWxzQ29tbWFuZCIsIkRlbGl2ZXJ5Q2hhbm5lbHMiLCJjb25maWdGaW5kIiwib3JnRGV0YWlscyIsIm9yZ0NsaWVudCIsIm9yZ0Rlc2NyaWJlQ29tbWFuZCIsIm9yZ0RhdGEiLCJpZCIsIklkIiwiYXJuIiwiQXJuIiwiTGlzdFJvb3RzQ29tbWFuZCIsInJvb3RzIiwiUm9vdHMiLCJyb290T3VJZCIsImxlZ2FjeUN1ckNoZWNrIiwiY3VyQ2xpZW50IiwiQ29zdEFuZFVzYWdlUmVwb3J0U2VydmljZUNsaWVudCIsImlzTGVnYWN5Q3VyU2V0dXAiLCJpbnB1dCIsIkRlc2NyaWJlUmVwb3J0RGVmaW5pdGlvbnNDb21tYW5kIiwiUmVwb3J0RGVmaW5pdGlvbnMiLCJlbmFibGVPcmdQb2xpY2llc0NoZWNrIiwicG9saWN5VHlwZXNFbmFibGVkIiwic2NwRW5hYmxlZCIsInRhZ1BvbGljeUVuYWJsZWQiLCJiYWNrdXBQb2xpY3lFbmFibGVkIiwiUG9saWN5VHlwZXMiLCJlbmFibGVkUG9saWN5IiwiVHlwZSIsIlN0YXR1cyIsIm9yZ0VuYWJsZWRTZXJ2aWNlcyIsImRpc2NvdmVyZWRPcmdTZXJ2aWNlcyIsIm9yZ1NlcnZpY2VBY2Nlc3NDb21tYW5kIiwiTGlzdEFXU1NlcnZpY2VBY2Nlc3NGb3JPcmdhbml6YXRpb25Db21tYW5kIiwib3JnU2VydmljZUFjY2Vzc1Jlc3BvbnNlIiwiRW5hYmxlZFNlcnZpY2VQcmluY2lwYWxzIiwib3JnU2VydmljZSIsImZvdW5kT3JnU2VydmljZSIsInNlcnZpY2UiLCJTZXJ2aWNlUHJpbmNpcGFsIiwiY2ZuT3JnU3RhdHVzIiwib3JnQ2ZuU3RhdHVzIiwic3RhdHVzIiwiY2xvdWRGb3JtYXRpb25DbGllbnQiLCJDbG91ZEZvcm1hdGlvbkNsaWVudCIsImRlc2NyaWJlT3JnQWNjZXNzSW5wdXQiLCJEZXNjcmliZU9yZ2FuaXphdGlvbnNBY2Nlc3NDb21tYW5kIiwiY2xvdWRGb3JtYXRpb25PcmdBY2Nlc3MiLCJjb250cm9sVG93ZXJEZXRhaWxzIiwiY29udHJvbFRvd2VySW5mbyIsImNvbnRyb2xUb3dlckNsaWVudCIsIkNvbnRyb2xUb3dlckNsaWVudCIsIkxpc3RMYW5kaW5nWm9uZXNDb21tYW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsImxhbmRpbmdab25lcyIsImxhbmRpbmdab25lSWRlbnRpZmllciIsImx6UmVnaW9uIiwidG9TdHJpbmciLCJzcGxpdCIsImNvbnRyb2xUb3dlclJlZ2lvbiIsImNvbnRyb2xUb3dlckNsaWVudFJlZ2lvbiIsIkdldExhbmRpbmdab25lQ29tbWFuZCIsImx6UmVzcG9uc2UiLCJsYW5kaW5nWm9uZSIsImxhdGVzdEF2YWlsYWJsZVZlcnNpb24iLCJkZXBsb3llZFZlcnNpb24iLCJ2ZXJzaW9uIiwiZHJpZnRTdGF0dXMiLCJpZGNJbmZvcm1hdGlvbiIsInJlZ2lvbkxpc3QiLCJpZGNEZXRhaWxzIiwiZm91bmQiLCJzc29BZG1pbkNsaWVudCIsIlNTT0FkbWluQ2xpZW50Iiwic3NvSW5wdXQiLCJNYXhSZXN1bHRzIiwiTnVtYmVyIiwiTGlzdEluc3RhbmNlc0NvbW1hbmQiLCJzc29JbnN0YW5jZVJlc3BvbnNlIiwiSW5zdGFuY2VzIiwic3NvSW5zdGFuY2UiLCJJbnN0YW5jZUFybiIsIklkZW50aXR5U3RvcmVJZCIsIm9yZ0RlbEFkbWluRGV0YWlscyIsIm9yZ0RhRGV0YWlscyIsIm9yZ0RhRGV0YWlsIiwiTGlzdERlbGVnYXRlZEFkbWluaXN0cmF0b3JzQ29tbWFuZCIsIkRlbGVnYXRlZEFkbWluaXN0cmF0b3JzIiwiZGEiLCJBY2NvdW50SWQiLCJMaXN0RGVsZWdhdGVkU2VydmljZXNGb3JBY2NvdW50Q29tbWFuZCIsImFjY291bnRSZXNwb25zZSIsIkRlbGVnYXRlZFNlcnZpY2VzIiwic2VydmljZXMiLCJhY2NvdW50TmFtZSIsIk5hbWUiLCJvcmdNZW1iZXJBY2NvdW50RGV0YWlscyIsIm9yZ01lbWJlckFjY291bnRJbmZvIiwib3Jnc0NsaWVudCIsIkxpc3RBY2NvdW50c0NvbW1hbmQiLCJBY2NvdW50cyIsImFjY291bnQiLCJvcmdNZW1iZXJBY2NvdW50IiwiYWNjb3VudEVtYWlsIiwiRW1haWwiLCJtZ3RUYXNrTnVtYmVyIiwibWFuYWdlbWVudEFjY291bnRXYXlwb2ludCIsIm1lc3NhZ2UiLCJjdEZpbmQiLCJnb3ZXYXlwb2ludCIsImdvdlRhc2tOdW1iZXIiLCJmaW5UYXNrTnVtYmVyIiwiZmluV2F5cG9pbnQiLCJ0cmFuc2l0aW9uYWxGb3VuZCIsInN1c3BlbmRlZEZvdW5kIiwid29ya2xvYWRzRm91bmQiLCJzZWN1cml0eUZvdW5kIiwib3JnT3VzIiwidG9wTGV2ZWxPdXMiLCJsaXN0T1VzQ29tbWFuZCIsIkxpc3RPcmdhbml6YXRpb25hbFVuaXRzRm9yUGFyZW50Q29tbWFuZCIsIlBhcmVudElkIiwibGlzdE9Vc1Jlc3BvbnNlIiwiT3JnYW5pemF0aW9uYWxVbml0cyIsIm91IiwidG9wTGV2ZWxPdSIsIm5hbWUiLCJMaXN0QWNjb3VudHNGb3JQYXJlbnRDb21tYW5kIiwiYWNjb3VudHMiLCJ0b0xvd2VyQ2FzZSIsIm1lbWJlckFjY291bnQiLCJpZGVudGl0eURlbGVnYXRlZCIsInNlY3VyaXR5SHViRGVsZWdhdGVkIiwiZ3VhcmREdXR5RGVsZWdhdGVkIiwiY29uZmlnRGVsZWdhdGVkIiwiaWFtQWNjZXNzQW5hbHl6ZXJEZWxlZ2F0ZWQiLCJzM1N0b3JhZ2VMZW5zRGVsZWdhdGVkIiwiaXBhbURlbGVnYXRlZCIsImFjY291bnREZWxlZ2F0ZWQiLCJiYWNrdXBEZWxlZ2F0ZWQiLCJzcnYiLCJtYXNUYXNrTnVtYmVyIiwibWFzV2F5cG9pbnQiLCJselRhc2tOdW1iZXIiLCJseldheXBvaW50IiwidW5kZWZpbmVkIiwiY3VycmVudFZlcnNpb24iLCJsYXRlc3RWZXJzaW9uIiwic3NvVGFza051bWJlciIsInNzb1dheXBvaW50Iiwic2VjVGFza051bWJlciIsInNlY1dheXBvaW50IiwibmV0VGFza051bWJlciIsIm5ldHdvcmtXYXlwb2ludCIsIm5ldEd1YXJkRHV0eUVuYWJsZU1lc3NhZ2UiLCJvYlRhc2tOdW1iZXIiLCJvYldheXBvaW50IiwiYmFja1Rhc2tOdW1iZXIiLCJiYWNrdXBXYXlwb2ludCIsIndhcm4iLCJtYWluIl0sInNvdXJjZVJvb3QiOiIifQ==