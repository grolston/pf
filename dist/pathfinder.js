(()=>{"use strict";const n=require("@aws-sdk/client-organizations"),e=require("@aws-sdk/client-iam"),o=require("@aws-sdk/client-cloudformation"),i=require("@aws-sdk/client-sso-admin"),t=require("@aws-sdk/client-ec2"),a=require("@aws-sdk/client-cloudtrail"),s=require("@aws-sdk/client-config-service"),c=require("@aws-sdk/client-controltower"),r=require("@aws-sdk/client-cost-and-usage-report-service"),l=require("fs");(async()=>{const d="./Pathfinder.txt";let p=new Date;l.writeFileSync(d,"Cloud Foundations - Pathfinder"),l.appendFileSync(d,`\nGenerated on: ${p.toUTCString()} \n\n`),l.appendFileSync(d,"\n---------------------------------------------------------");const u=process.env.AWS_REGION||"us-east-1",y=await async function(){const n=new t.EC2Client({region:"us-east-1"});try{const e=new t.DescribeRegionsCommand({}),o=await n.send(e),i=[];for(const n of o.Regions||[])i.push(n.RegionName||"");return i}catch(n){return console.error("Error retrieving regions:",n),[]}finally{n.destroy()}}(),g=await(async e=>{const o=new n.OrganizationsClient({region:e});try{const e=new n.DescribeOrganizationCommand({}),i=await o.send(e),t=!!i.Organization;return i.Organization?.MasterAccountId?{isInOrganization:t,isManagementAccount:i.Organization?.MasterAccountId==i.Organization?.MasterAccountId}:{isInOrganization:t}}catch(n){return console.error("Error:",n),{isInOrganization:!1}}finally{o.destroy()}})(u);if(l.appendFileSync(d,"\n\nAWS ACCOUNT TYPE\n"),g&&(console.dir(g,{depth:null,colors:!0}),l.appendFileSync(d,`\n  Is in AWS Organization: ${g.isInOrganization}`),l.appendFileSync(d,`\n  Assessing AWS Management Account: ${g.isManagementAccount}`)),g.isInOrganization&&g.isManagementAccount){l.appendFileSync(d,"\n\n---------------------------------------------------------"),l.appendFileSync(d,"\n\nLegacy CUR\n");const e=await(async n=>{const e=new r.CostAndUsageReportServiceClient({region:n});let o=!1;try{const n={},i=new r.DescribeReportDefinitionsCommand(n),t=await e.send(i);return t.ReportDefinitions&&t.ReportDefinitions.length>0&&(o=!0),{isLegacyCurSetup:o}}catch(n){return console.error(`Error: ${n}`),o=!1,{isLegacyCurSetup:o}}finally{e.destroy()}})("us-east-1");console.dir(e,{depth:null,colors:!0}),l.appendFileSync(d,`\n  Is legacy CUR setup: ${e.isLegacyCurSetup}`),l.appendFileSync(d,"\n\n---------------------------------------------------------"),l.appendFileSync(d,"\n\nAWS ORGANIZATION POLICY TYPES\n");const t=await async function(e){const o=new n.OrganizationsClient({region:e});let i={scpEnabled:!1,tagPolicyEnabled:!1,backupPolicyEnabled:!1};try{const e={},t=new n.ListRootsCommand(e),a=await o.send(t);if(a.Roots&&a.Roots[0].PolicyTypes)for(const n of a.Roots[0].PolicyTypes)"SERVICE_CONTROL_POLICY"==n.Type&&"ENABLED"==n.Status&&(i.scpEnabled=!0),"TAG_POLICY"==n.Type&&"ENABLED"==n.Status&&(i.tagPolicyEnabled=!0),"BACKUP_POLICY"==n.Type&&"ENABLED"==n.Status&&(i.backupPolicyEnabled=!0)}catch(n){console.error(`An error occurred: ${n}`)}finally{return o.destroy(),i}}("us-east-1");console.dir(t,{depth:null,colors:!0}),l.appendFileSync(d,`\n  Service Control Policies (SCP) enabled: ${t.scpEnabled}`),l.appendFileSync(d,`\n  Tag Policies enabled: ${t.tagPolicyEnabled}`),l.appendFileSync(d,`\n  Backup Policies enabled: ${t.backupPolicyEnabled}`),l.appendFileSync(d,"\n\n---------------------------------------------------------"),l.appendFileSync(d,"\n\nAWS ORGANIZATION ENABLED SERVICES\n");const a=await async function(e){const o=[],i=new n.OrganizationsClient({region:e});try{const e=new n.ListAWSServiceAccessForOrganizationCommand({}),t=await i.send(e);if(t.EnabledServicePrincipals&&t.EnabledServicePrincipals.length>0){t.EnabledServicePrincipals;for(const n of t.EnabledServicePrincipals){const e={service:n.ServicePrincipal??""};o.push(e)}}}catch(n){console.error("Error checking service access:",n)}finally{return i.destroy(),o}}("us-east-1");console.dir(a,{depth:null,colors:!0}),l.appendFileSync(d,"\n  The following AWS Services are enabled within your AWS Organization:");for(const n of a)l.appendFileSync(d,`\n    ${n.service}`);l.appendFileSync(d,"\n\n---------------------------------------------------------"),l.appendFileSync(d,"\n\nAWS ORGANIZATION INTEGRATED SERVICE REGISTERED DELEGATED ADMINS\n");const s=await async function(){let e=[];const o=new n.OrganizationsClient({region:"us-east-1"});let i={};try{const t=new n.ListDelegatedAdministratorsCommand({}),a=await o.send(t);if(a.DelegatedAdministrators)for(const t of a.DelegatedAdministrators){const a={AccountId:t.Id},s=new n.ListDelegatedServicesForAccountCommand(a),c=await o.send(s);c.DelegatedServices&&(i={services:c.DelegatedServices,accountName:t.Name},e.push(i))}}catch(n){console.log("Error looking for delegated services.")}finally{o.destroy()}return e}();if(console.dir(s,{depth:null,colors:!0}),s&&s.length>0)for(const n of s){if(l.appendFileSync(d,`\n  Account: ${n.accountName}`),n.services&&n.services.length>0){l.appendFileSync(d,"\n  Delegated Services:");for(const e of n.services)l.appendFileSync(d,`\n    ${e.ServicePrincipal}`)}l.appendFileSync(d,"\n ")}else l.appendFileSync(d,"\n  No delegated admin accounts in AWS Organization");l.appendFileSync(d,"\n\n---------------------------------------------------------"),l.appendFileSync(d,"\n\nAWS ORGANIZATION CLOUDFORMATION\n");const p=await async function(n){let e={status:"disabled"};const i=new o.CloudFormationClient({region:n});try{const n={},t=new o.DescribeOrganizationsAccessCommand(n),a=await i.send(t);e.status=a.Status??"disabled"}catch(n){console.log(`Error: ${n}`)}finally{return i.destroy(),e}}(u);console.dir(p,{depth:null,colors:!0}),l.appendFileSync(d,`\n  AWS CloudFormation Organization stack sets status : ${p.status}`),l.appendFileSync(d,"\n\n---------------------------------------------------------"),l.appendFileSync(d,"\n\nAWS CONTROL TOWER\n");const g=await async function(n){let e={};const o=new c.ControlTowerClient({region:n});try{const n=new c.ListLandingZonesCommand({}),i=await o.send(n);if(console.log(JSON.stringify(i.landingZones,null,2)),i.landingZones&&i.landingZones.length>0){const n={landingZoneIdentifier:i.landingZones[0].arn},o=i.landingZones[0].arn?.toString().split(":")[3]??"";if(o){e.controlTowerRegion=o;const i=new c.ControlTowerClient({region:o}),t=new c.GetLandingZoneCommand(n),a=await i.send(t);a.landingZone&&(console.log(JSON.stringify(a.landingZone,null,2)),e.status=a.landingZone.status,e.latestAvailableVersion=a.landingZone.latestAvailableVersion,e.deployedVersion=a.landingZone.version,e.driftStatus=a.landingZone.driftStatus?.status)}}}catch(e){console.error(`Error checking Control Tower in ${n}:`,e)}finally{o.destroy()}return e}(u);g?(console.dir(g,{depth:null,colors:!0}),l.appendFileSync(d,`\n  Control Tower home region: ${g.controlTowerRegion}`),l.appendFileSync(d,`\n  Control Tower status: ${g.status}`),l.appendFileSync(d,`\n  Control Tower Landing Zone version: ${g.deployedVersion}`),l.appendFileSync(d,`\n  Latest available version: ${g.deployedVersion}`),l.appendFileSync(d,`\n  Drift Status: ${g.driftStatus}`)):l.appendFileSync(d,"\n  AWS Control Tower is not deployed in the AWS Organization"),l.appendFileSync(d,"\n\n---------------------------------------------------------"),l.appendFileSync(d,"\n\nAWS IAM IDENTITY CENTER\n");const S=await async function(n){let e={found:!1};for(const o of n){const n=new i.SSOAdminClient({region:o});try{const t={MaxResults:Number("100")},a=new i.ListInstancesCommand(t),s=await n.send(a);if(s.Instances&&s.Instances.length>0){const n=s.Instances[0];e.found=!0,e.region=o,e.arn=n.InstanceArn,e.id=n.IdentityStoreId;break}}catch(n){console.log(`Error looking for AWS Identity Center details in region ${o}`)}finally{n.destroy()}}return e}(y);console.dir(S,{depth:null,colors:!0}),l.appendFileSync(d,`\n  IdC Region: ${S.region}`),l.appendFileSync(d,`\n  IdC ARN: ${S.arn}`),l.appendFileSync(d,`\n  IdC Instance Id: ${S.id}`),l.appendFileSync(d,"\n\n---------------------------------------------------------"),l.appendFileSync(d,"\n\nAWS ORGANIZATION DETAILS\n");const f=await async function(e){const o=new n.OrganizationsClient({region:e});let i={};try{const e=new n.DescribeOrganizationCommand({}),t=await o.send(e);t.Organization&&(i.id=t.Organization.Id??"",i.arn=t.Organization.Arn??"");const a=new n.ListRootsCommand({}),s=await o.send(a);s.Roots?i.rootOuId=s.Roots[0].Id:console.log("No info found for your AWS Organization.")}catch(n){console.error(`An error occurred: ${n}`)}finally{return o.destroy(),i}}("us-east-1");if(console.dir(f,{depth:null,colors:!0}),l.appendFileSync(d,`\n  AWS Organization Id: ${f.id}`),l.appendFileSync(d,`\n  AWS Organization ARN: ${f.arn}`),l.appendFileSync(d,`\n  AWS Organization Root OU Id: ${f.rootOuId}`),f.rootOuId){l.appendFileSync(d,"\n\n---------------------------------------------------------"),l.appendFileSync(d,"\n\nAWS ORGANIZATION TOP-LEVEL ORGANIZATION UNITS\n");const e=await async function(e,o){const i=new n.OrganizationsClient({region:e});let t=[];try{const e=new n.ListOrganizationalUnitsForParentCommand({ParentId:o}),a=await i.send(e);if(a.OrganizationalUnits)for(const e of a.OrganizationalUnits){let o={id:e.Id,name:e.Name};const a=await i.send(new n.ListAccountsForParentCommand({ParentId:e.Id}));a.Accounts&&a.Accounts.length>0&&(o.accounts=a.Accounts),t.push(o)}}catch(n){return console.error("Error checking service access:",n),[]}finally{i.destroy()}return t}("us-east-1",f.rootOuId);if(console.dir(e,{depth:null,colors:!0}),l.appendFileSync(d,"\n  List of Organization's top-level OUs and AWS accounts:"),e&&e.length>0)for(const n of e){if(l.appendFileSync(d,`\n    Organizational Unit: ${n.name}`),l.appendFileSync(d,`\n      Organizational Unit Id: ${n.id}`),n.accounts&&n.accounts.length>0){l.appendFileSync(d,"\n      AWS Accounts:");for(const e of n.accounts)l.appendFileSync(d,`\n        ${e.Name}`);l.appendFileSync(d,"\n")}else l.appendFileSync(d,"\n      AWS Accounts: None");l.appendFileSync(d,"\n")}else l.appendFileSync(d,"\n  No top level OUs found.")}l.appendFileSync(d,"\n\n---------------------------------------------------------"),l.appendFileSync(d,"\n\nAWS ORGANIZATION MEMBER ACCOUNTS\n");const A=await async function(){let e=[];const o=new n.OrganizationsClient({region:"us-east-1"});try{const i=await o.send(new n.ListAccountsCommand({}));if(i.Accounts&&i.Accounts.length>0)for(const n of i.Accounts){let o={accountName:n.Name,accountEmail:n.Email};e.push(o)}}catch(n){console.error("Error listing AWS accounts:",n)}finally{o.destroy()}return e}();if(console.dir(A,{depth:null,colors:!0}),A&&A.length>0)for(const n of A)l.appendFileSync(d,`\n  Account: ${n.accountName}`),l.appendFileSync(d,`\n  Account Email: ${n.accountEmail}\n`);else l.appendFileSync(d,"No member accounts found which is amazing as this is running from one.")}else if(g.isInOrganization&&!g.isManagementAccount){const n="\nWARNING: You are running Pathfinder from an account that is a member of your AWS Organization. Please run the solution from your AWS Management account.";console.warn(n),l.appendFileSync(d,n)}else{const n="\nWARNING: You are running Pathfinder from an account that not part of an AWS Organization. This account will be treated as a standalone account.";console.warn(n),l.appendFileSync(d,n)}l.appendFileSync(d,"\n\n\n---------------------------------------------------------"),l.appendFileSync(d,"\n---------------------------------------------------------"),l.appendFileSync(d,"\nAWS MANAGEMENT ACCOUNT CHECKS"),l.appendFileSync(d,"\n---------------------------------------------------------"),l.appendFileSync(d,"\n---------------------------------------------------------\n");const S=await(async()=>{const n=new e.IAMClient({region:"us-east-1"}),o=[];try{const i=new e.ListUsersCommand({}),t=await n.send(i);for(const i of t.Users||[]){const t=i.UserName||"",a=new e.ListAccessKeysCommand({UserName:t}),s=(await n.send(a)).AccessKeyMetadata||[];if(s.length>0)for(const i of s){const a=i.AccessKeyId||"",s=new e.GetAccessKeyLastUsedCommand({AccessKeyId:a}),c=await n.send(s),r={userName:t,accessKeyId:a,lastUsed:c&&c.AccessKeyLastUsed&&`${c.AccessKeyLastUsed.LastUsedDate}`||"Not available"};o.push(r)}else{const n={userName:t};o.push(n)}}}catch(n){console.error("Error:",n)}finally{n.destroy()}return o})();if(l.appendFileSync(d,"\n\nIAM USERS CHECK\n"),S&&S.length>0){console.dir(S,{depth:null,colors:!0});for(const n of S)l.appendFileSync(d,`\n  IAM User: ${n.userName}`),n.accessKeyId&&l.appendFileSync(d,`\n    User API Key ID: ${n.accessKeyId}`),l.appendFileSync(d,"\n")}else l.appendFileSync(d,"\n  No IAM Users found.");l.appendFileSync(d,"\n\n---------------------------------------------------------");const f=await async function(n){let e=[];for(const o of n){const n=new t.EC2Client({region:o}),i=new t.DescribeInstancesCommand({});try{const t=await n.send(i);if(t.Reservations)if(t.Reservations.length>0){const n={region:o,ec2Found:!0};e.push(n)}else{const n={region:o,ec2Found:!1};e.push(n)}else{const n={region:o,ec2Found:!1};e.push(n)}}catch(n){console.log(`Error checking instance: ${n}`)}finally{n.destroy()}}return e}(y);if(l.appendFileSync(d,"\n\nEC2 INSTANCE CHECK\n"),f&&f.find((n=>!0===n.ec2Found))){console.dir(f,{depth:null,colors:!0});for(const n of f)n.ec2Found&&l.appendFileSync(d,`\n  ${n.region} - found EC2 Instance(s).`)}else l.appendFileSync(d,"\n  No EC2 instances found.");l.appendFileSync(d,"\n\n---------------------------------------------------------");const A=await async function(n){let e=[];for(const o of n){const n=new t.EC2Client({region:o}),i=new t.DescribeVpcsCommand({});try{const t=await n.send(i);if(t.Vpcs)if(t.Vpcs.length>0){const n={region:o,vpcFound:!0};e.push(n)}else{const n={region:o,vpcFound:!1};e.push(n)}else{const n={region:o,vpcFound:!1};e.push(n)}}catch(n){console.log(`Error checking instance: ${n}`)}finally{n.destroy()}}return e}(y);if(l.appendFileSync(d,"\n\nVPC CHECK\n"),A&&A.length>0){console.dir(A,{depth:null,colors:!0});for(const n of A)n.vpcFound&&l.appendFileSync(d,`\n  ${n.region} - found VPC(s).`)}else l.appendFileSync(d,"\n  No VPCs found.");l.appendFileSync(d,"\n\n---------------------------------------------------------");const F=await async function(n){let e=[];for(const o of n){const n=new a.CloudTrailClient({region:o}),i=new a.DescribeTrailsCommand({});try{const t=await n.send(i);if(t.trailList)for(const n of t.trailList){let i={};i=n.HomeRegion==o?{region:o,trailFound:!0,isOrgTrail:n.IsMultiRegionTrail,isMultiRegion:n.IsMultiRegionTrail}:{region:o,trailFound:!1},e.push(i)}}catch(n){console.log(`Error checking instance: ${n}`)}finally{n.destroy()}}return e}(y);if(l.appendFileSync(d,"\n\nCLOUDTRAIL CHECK\n"),F&&F.length>0){console.dir(F,{depth:null,colors:!0});for(const n of F)n.trailFound&&(l.appendFileSync(d,`\n  CloudTrail found in ${n.region}`),l.appendFileSync(d,`\n    Is Organization Trail: ${n.isOrgTrail}`),l.appendFileSync(d,`\n    Is MultiRegion: ${n.isMultiRegion}`),l.appendFileSync(d,"\n"))}else l.appendFileSync(d,"\n  No AWS CloudTrail resource discovered");l.appendFileSync(d,"\n"),l.appendFileSync(d,"\n\n---------------------------------------------------------");const C=await async function(n){let e=[];for(const o of n){const n=new s.ConfigServiceClient({region:o});let i={region:o,configRecorderFound:!1,configDeliveryChannelFound:!1};try{const o=await n.send(new s.DescribeConfigurationRecorderStatusCommand({}));0!==o.ConfigurationRecordersStatus?.length&&(i.configRecorderFound=!0);const t=await n.send(new s.DescribeDeliveryChannelsCommand({}));0!==t.DeliveryChannels?.length&&(i.configDeliveryChannelFound=!0),e.push(i)}catch(n){console.error(`Error checking AWS Config in ${o}:`,n)}finally{n.destroy()}}return e}(y);if(l.appendFileSync(d,"\n\nAWS CONFIG CHECK\n"),C&&C.find((n=>!0===n.configRecorderFound))){console.dir(C,{depth:null,colors:!0});for(const n of C)n.configRecorderFound&&l.appendFileSync(d,`\n  ${n.region} - Config Recorder found`),n.configDeliveryChannelFound&&l.appendFileSync(d,`\n  ${n.region} - Config Delivery Channel found`)}else l.appendFileSync(d,"\n  No AWS Config resource discovered");l.appendFileSync(d,"\n\n\n  END ASSESSMENT")})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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XCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIGNvbW1vbmpzIFwiQGF3cy1zZGsvY2xpZW50LWlhbVwiIiwid2VicGFjazovLy9leHRlcm5hbCBjb21tb25qcyBcIkBhd3Mtc2RrL2NsaWVudC1jbG91ZGZvcm1hdGlvblwiIiwid2VicGFjazovLy9leHRlcm5hbCBjb21tb25qcyBcIkBhd3Mtc2RrL2NsaWVudC1zc28tYWRtaW5cIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgY29tbW9uanMgXCJAYXdzLXNkay9jbGllbnQtZWMyXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIGNvbW1vbmpzIFwiQGF3cy1zZGsvY2xpZW50LWNsb3VkdHJhaWxcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgY29tbW9uanMgXCJAYXdzLXNkay9jbGllbnQtY29uZmlnLXNlcnZpY2VcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgY29tbW9uanMgXCJAYXdzLXNkay9jbGllbnQtY29udHJvbHRvd2VyXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIGNvbW1vbmpzIFwiQGF3cy1zZGsvY2xpZW50LWNvc3QtYW5kLXVzYWdlLXJlcG9ydC1zZXJ2aWNlXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJmc1wiIiwid2VicGFjazovLy8uL2J1aWxkL2FwcC5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9nZXQtcmVnaW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9kZWZpbmUtYWNjb3VudC10eXBlLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2NoZWNrLWxlZ2FjeS1jdXIuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvZ2V0LWVuYWJsZWQtb3JnLXBvbGljeS10eXBlcy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9nZXQtZW5hYmxlZC1vcmctc2VydmljZXMuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvZ2V0LW9yZy1kYS1hY2NvdW50cy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9jaGVjay1vcmctY2xvdWRmb3JtYXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvY2hlY2stY29udHJvbC10b3dlci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9nZXQtaWRjLWluZm8uanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvZ2V0LW9yZy1kZXRhaWxzLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2dldC1vcmctb3VzLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2dldC1vcmctbWVtYmVyLWFjY291bnRzLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2NoZWNrLWlhbS11c2Vycy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9jaGVjay1lYzItZXhpc3RlbmNlLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2NoZWNrLXZwYy1leGlzdGVuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvY2hlY2stY2xvdWR0cmFpbC1leGlzdGVuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvY2hlY2stY29uZmlnLWV4aXN0ZW5jZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIkBhd3Mtc2RrL2NsaWVudC1vcmdhbml6YXRpb25zXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiQGF3cy1zZGsvY2xpZW50LWlhbVwiKTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIkBhd3Mtc2RrL2NsaWVudC1jbG91ZGZvcm1hdGlvblwiKTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIkBhd3Mtc2RrL2NsaWVudC1zc28tYWRtaW5cIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJAYXdzLXNkay9jbGllbnQtZWMyXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiQGF3cy1zZGsvY2xpZW50LWNsb3VkdHJhaWxcIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJAYXdzLXNkay9jbGllbnQtY29uZmlnLXNlcnZpY2VcIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJAYXdzLXNkay9jbGllbnQtY29udHJvbHRvd2VyXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiQGF3cy1zZGsvY2xpZW50LWNvc3QtYW5kLXVzYWdlLXJlcG9ydC1zZXJ2aWNlXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiZnNcIik7IiwiaW1wb3J0IHsgZGVmaW5lQWNjb3VudFR5cGUgfSBmcm9tICcuL3NyYy9hY3Rpb25zL2RlZmluZS1hY2NvdW50LXR5cGUuanMnO1xuaW1wb3J0IGNoZWNrSWFtVXNlcnMgZnJvbSAnLi9zcmMvYWN0aW9ucy9jaGVjay1pYW0tdXNlcnMuanMnO1xuaW1wb3J0IGdldEVuYWJsZWRPcmdQb2xpY3lUeXBlcyBmcm9tICcuL3NyYy9hY3Rpb25zL2dldC1lbmFibGVkLW9yZy1wb2xpY3ktdHlwZXMuanMnO1xuaW1wb3J0IGdldEVuYWJsZWRPcmdTZXJ2aWNlcyBmcm9tICcuL3NyYy9hY3Rpb25zL2dldC1lbmFibGVkLW9yZy1zZXJ2aWNlcy5qcyc7XG5pbXBvcnQgZ2V0T3JnQ2xvdWRGb3JtYXRpb24gZnJvbSAnLi9zcmMvYWN0aW9ucy9jaGVjay1vcmctY2xvdWRmb3JtYXRpb24uanMnO1xuaW1wb3J0IGdldElkY0luZm8gZnJvbSAnLi9zcmMvYWN0aW9ucy9nZXQtaWRjLWluZm8uanMnO1xuaW1wb3J0IGdldE9yZ0RldGFpbHMgZnJvbSAnLi9zcmMvYWN0aW9ucy9nZXQtb3JnLWRldGFpbHMuanMnO1xuaW1wb3J0IGdldE9yZ1RvcExldmVsT3VzIGZyb20gJy4vc3JjL2FjdGlvbnMvZ2V0LW9yZy1vdXMuanMnO1xuaW1wb3J0IGdldEFsbFJlZ2lvbnMgZnJvbSAnLi9zcmMvYWN0aW9ucy9nZXQtcmVnaW9ucy5qcyc7XG5pbXBvcnQgY2hlY2tFYzJFeGlzdHMgZnJvbSAnLi9zcmMvYWN0aW9ucy9jaGVjay1lYzItZXhpc3RlbmNlLmpzJztcbmltcG9ydCBjaGVja1ZwY0V4aXN0cyBmcm9tICcuL3NyYy9hY3Rpb25zL2NoZWNrLXZwYy1leGlzdGVuY2UuanMnO1xuaW1wb3J0IGNoZWNrQ2xvdWRUcmFpbEV4aXN0cyBmcm9tICcuL3NyYy9hY3Rpb25zL2NoZWNrLWNsb3VkdHJhaWwtZXhpc3RlbmNlLmpzJztcbmltcG9ydCBnZXRPcmdEYUFjY291bnRzIGZyb20gJy4vc3JjL2FjdGlvbnMvZ2V0LW9yZy1kYS1hY2NvdW50cy5qcyc7XG5pbXBvcnQgY2hlY2tDb25maWdFeGlzdHMgZnJvbSAnLi9zcmMvYWN0aW9ucy9jaGVjay1jb25maWctZXhpc3RlbmNlLmpzJztcbmltcG9ydCBnZXRPcmdNZW1iZXJBY2NvdW50cyBmcm9tICcuL3NyYy9hY3Rpb25zL2dldC1vcmctbWVtYmVyLWFjY291bnRzLmpzJztcbmltcG9ydCBnZXRDb250cm9sVG93ZXIgZnJvbSAnLi9zcmMvYWN0aW9ucy9jaGVjay1jb250cm9sLXRvd2VyLmpzJztcbmltcG9ydCBjaGVja0xlZ2FjeUN1ciBmcm9tICcuL3NyYy9hY3Rpb25zL2NoZWNrLWxlZ2FjeS1jdXIuanMnO1xuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnO1xuY29uc3QgbWFpbiA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCByZXBvcnRGaWxlID0gXCIuL1BhdGhmaW5kZXIudHh0XCI7XG4gICAgbGV0IGRhdGVUaW1lID0gbmV3IERhdGUoKTtcbiAgICBmcy53cml0ZUZpbGVTeW5jKHJlcG9ydEZpbGUsIFwiQ2xvdWQgRm91bmRhdGlvbnMgLSBQYXRoZmluZGVyXCIpO1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5HZW5lcmF0ZWQgb246ICR7ZGF0ZVRpbWUudG9VVENTdHJpbmcoKX0gXFxuXFxuYCk7XG4gICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLWApO1xuICAgIC8vIGdyYWIgcmVnaW9uIGZyb20gYXdzIENsb3VkU2hlbGwuIFNldCBkZWZhdWx0IHRob3VnaCByZWdpb24gc3BlY2lmaWMgY2FsbHMgYXJlIGZvciBnbG9iYWwgc2VydmljZXNcbiAgICAvLyBhbmQgdXMtZWFzdC0xIHdvcmtzIHRvIGdldCBkZXRhaWxzLlxuICAgIGNvbnN0IHJlZ2lvbiA9IHByb2Nlc3MuZW52LkFXU19SRUdJT04gfHwgJ3VzLWVhc3QtMSc7XG4gICAgLy8gZnVuY3Rpb24gY2hlY2tpbmcgaWYgbWFuYWdlbWVudCBhY2NvdW50LCBtZW1iZXIgYWNjb3VudCwgb3Igc3RhbmRhbG9uZSBhY2NvdW50XG4gICAgY29uc3QgYWxsUmVnaW9ucyA9IGF3YWl0IGdldEFsbFJlZ2lvbnMoKTtcbiAgICBjb25zdCBhY2NvdW50VHlwZSA9IGF3YWl0IGRlZmluZUFjY291bnRUeXBlKHJlZ2lvbik7XG4gICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkFXUyBBQ0NPVU5UIFRZUEVcXG5gKTtcbiAgICBpZiAoYWNjb3VudFR5cGUpIHtcbiAgICAgICAgY29uc29sZS5kaXIoYWNjb3VudFR5cGUsIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgSXMgaW4gQVdTIE9yZ2FuaXphdGlvbjogJHthY2NvdW50VHlwZS5pc0luT3JnYW5pemF0aW9ufWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBc3Nlc3NpbmcgQVdTIE1hbmFnZW1lbnQgQWNjb3VudDogJHthY2NvdW50VHlwZS5pc01hbmFnZW1lbnRBY2NvdW50fWApO1xuICAgIH1cbiAgICAvLyBhbGwgY2FsbHMgcmVxdWlyZSBhbiBBV1MgT3JnYW5pemF0aW9uIGV4aXN0IGFuZCB0aGUgYWNjb3VudCBiZSBhIG1hbmFnZW1lbnQgYWNjb3VudFxuICAgIGlmIChhY2NvdW50VHlwZS5pc0luT3JnYW5pemF0aW9uICYmIGFjY291bnRUeXBlLmlzTWFuYWdlbWVudEFjY291bnQpIHtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuTGVnYWN5IENVUlxcbmApO1xuICAgICAgICBjb25zdCBsZWdhY3lDdXJDaGVjayA9IGF3YWl0IGNoZWNrTGVnYWN5Q3VyKCd1cy1lYXN0LTEnKTtcbiAgICAgICAgY29uc29sZS5kaXIobGVnYWN5Q3VyQ2hlY2ssIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgSXMgbGVnYWN5IENVUiBzZXR1cDogJHtsZWdhY3lDdXJDaGVjay5pc0xlZ2FjeUN1clNldHVwfWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5BV1MgT1JHQU5JWkFUSU9OIFBPTElDWSBUWVBFU1xcbmApO1xuICAgICAgICBjb25zdCBlbmFibGVPcmdQb2xpY2llc0NoZWNrID0gYXdhaXQgZ2V0RW5hYmxlZE9yZ1BvbGljeVR5cGVzKCd1cy1lYXN0LTEnKTtcbiAgICAgICAgY29uc29sZS5kaXIoZW5hYmxlT3JnUG9saWNpZXNDaGVjaywgeyBkZXB0aDogbnVsbCwgY29sb3JzOiB0cnVlIH0pO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBTZXJ2aWNlIENvbnRyb2wgUG9saWNpZXMgKFNDUCkgZW5hYmxlZDogJHtlbmFibGVPcmdQb2xpY2llc0NoZWNrLnNjcEVuYWJsZWR9YCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIFRhZyBQb2xpY2llcyBlbmFibGVkOiAke2VuYWJsZU9yZ1BvbGljaWVzQ2hlY2sudGFnUG9saWN5RW5hYmxlZH1gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQmFja3VwIFBvbGljaWVzIGVuYWJsZWQ6ICR7ZW5hYmxlT3JnUG9saWNpZXNDaGVjay5iYWNrdXBQb2xpY3lFbmFibGVkfWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5BV1MgT1JHQU5JWkFUSU9OIEVOQUJMRUQgU0VSVklDRVNcXG5gKTtcbiAgICAgICAgY29uc3Qgb3JnRW5hYmxlZFNlcnZpY2VzID0gYXdhaXQgZ2V0RW5hYmxlZE9yZ1NlcnZpY2VzKCd1cy1lYXN0LTEnKTtcbiAgICAgICAgY29uc29sZS5kaXIob3JnRW5hYmxlZFNlcnZpY2VzLCB7IGRlcHRoOiBudWxsLCBjb2xvcnM6IHRydWUgfSk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIFRoZSBmb2xsb3dpbmcgQVdTIFNlcnZpY2VzIGFyZSBlbmFibGVkIHdpdGhpbiB5b3VyIEFXUyBPcmdhbml6YXRpb246YCk7XG4gICAgICAgIGZvciAoY29uc3Qgb3JnU2VydmljZSBvZiBvcmdFbmFibGVkU2VydmljZXMpIHtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgJHtvcmdTZXJ2aWNlLnNlcnZpY2V9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuQVdTIE9SR0FOSVpBVElPTiBJTlRFR1JBVEVEIFNFUlZJQ0UgUkVHSVNURVJFRCBERUxFR0FURUQgQURNSU5TXFxuYCk7XG4gICAgICAgIGNvbnN0IG9yZ0RlbEFkbWluRGV0YWlscyA9IGF3YWl0IGdldE9yZ0RhQWNjb3VudHMoKTtcbiAgICAgICAgY29uc29sZS5kaXIob3JnRGVsQWRtaW5EZXRhaWxzLCB7IGRlcHRoOiBudWxsLCBjb2xvcnM6IHRydWUgfSk7XG4gICAgICAgIGlmIChvcmdEZWxBZG1pbkRldGFpbHMgJiYgb3JnRGVsQWRtaW5EZXRhaWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYWNjb3VudCBvZiBvcmdEZWxBZG1pbkRldGFpbHMpIHtcbiAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBY2NvdW50OiAke2FjY291bnQuYWNjb3VudE5hbWV9YCk7XG4gICAgICAgICAgICAgICAgaWYgKGFjY291bnQuc2VydmljZXMgJiYgYWNjb3VudC5zZXJ2aWNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIERlbGVnYXRlZCBTZXJ2aWNlczpgKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzcnYgb2YgYWNjb3VudC5zZXJ2aWNlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICAke3Nydi5TZXJ2aWNlUHJpbmNpcGFsfWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBObyBkZWxlZ2F0ZWQgYWRtaW4gYWNjb3VudHMgaW4gQVdTIE9yZ2FuaXphdGlvbmApO1xuICAgICAgICB9XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkFXUyBPUkdBTklaQVRJT04gQ0xPVURGT1JNQVRJT05cXG5gKTtcbiAgICAgICAgY29uc3QgY2ZuT3JnU3RhdHVzID0gYXdhaXQgZ2V0T3JnQ2xvdWRGb3JtYXRpb24ocmVnaW9uKTtcbiAgICAgICAgY29uc29sZS5kaXIoY2ZuT3JnU3RhdHVzLCB7IGRlcHRoOiBudWxsLCBjb2xvcnM6IHRydWUgfSk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEFXUyBDbG91ZEZvcm1hdGlvbiBPcmdhbml6YXRpb24gc3RhY2sgc2V0cyBzdGF0dXMgOiAke2Nmbk9yZ1N0YXR1cy5zdGF0dXN9YCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkFXUyBDT05UUk9MIFRPV0VSXFxuYCk7XG4gICAgICAgIGNvbnN0IGNvbnRyb2xUb3dlckRldGFpbHMgPSBhd2FpdCBnZXRDb250cm9sVG93ZXIocmVnaW9uKTtcbiAgICAgICAgaWYgKGNvbnRyb2xUb3dlckRldGFpbHMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZGlyKGNvbnRyb2xUb3dlckRldGFpbHMsIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIENvbnRyb2wgVG93ZXIgaG9tZSByZWdpb246ICR7Y29udHJvbFRvd2VyRGV0YWlscy5jb250cm9sVG93ZXJSZWdpb259YCk7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBDb250cm9sIFRvd2VyIHN0YXR1czogJHtjb250cm9sVG93ZXJEZXRhaWxzLnN0YXR1c31gKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIENvbnRyb2wgVG93ZXIgTGFuZGluZyBab25lIHZlcnNpb246ICR7Y29udHJvbFRvd2VyRGV0YWlscy5kZXBsb3llZFZlcnNpb259YCk7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBMYXRlc3QgYXZhaWxhYmxlIHZlcnNpb246ICR7Y29udHJvbFRvd2VyRGV0YWlscy5kZXBsb3llZFZlcnNpb259YCk7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBEcmlmdCBTdGF0dXM6ICR7Y29udHJvbFRvd2VyRGV0YWlscy5kcmlmdFN0YXR1c31gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEFXUyBDb250cm9sIFRvd2VyIGlzIG5vdCBkZXBsb3llZCBpbiB0aGUgQVdTIE9yZ2FuaXphdGlvbmApO1xuICAgICAgICB9XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkFXUyBJQU0gSURFTlRJVFkgQ0VOVEVSXFxuYCk7XG4gICAgICAgIGNvbnN0IGlkY0luZm9ybWF0aW9uID0gYXdhaXQgZ2V0SWRjSW5mbyhhbGxSZWdpb25zKTtcbiAgICAgICAgY29uc29sZS5kaXIoaWRjSW5mb3JtYXRpb24sIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgSWRDIFJlZ2lvbjogJHtpZGNJbmZvcm1hdGlvbi5yZWdpb259YCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIElkQyBBUk46ICR7aWRjSW5mb3JtYXRpb24uYXJufWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBJZEMgSW5zdGFuY2UgSWQ6ICR7aWRjSW5mb3JtYXRpb24uaWR9YCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkFXUyBPUkdBTklaQVRJT04gREVUQUlMU1xcbmApO1xuICAgICAgICBjb25zdCBvcmdEZXRhaWxzID0gYXdhaXQgZ2V0T3JnRGV0YWlscygndXMtZWFzdC0xJyk7XG4gICAgICAgIGNvbnNvbGUuZGlyKG9yZ0RldGFpbHMsIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQVdTIE9yZ2FuaXphdGlvbiBJZDogJHtvcmdEZXRhaWxzLmlkfWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBV1MgT3JnYW5pemF0aW9uIEFSTjogJHtvcmdEZXRhaWxzLmFybn1gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQVdTIE9yZ2FuaXphdGlvbiBSb290IE9VIElkOiAke29yZ0RldGFpbHMucm9vdE91SWR9YCk7XG4gICAgICAgIGlmIChvcmdEZXRhaWxzLnJvb3RPdUlkKSB7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tYCk7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuQVdTIE9SR0FOSVpBVElPTiBUT1AtTEVWRUwgT1JHQU5JWkFUSU9OIFVOSVRTXFxuYCk7XG4gICAgICAgICAgICBjb25zdCBvcmdPdXMgPSBhd2FpdCBnZXRPcmdUb3BMZXZlbE91cygndXMtZWFzdC0xJywgb3JnRGV0YWlscy5yb290T3VJZCk7XG4gICAgICAgICAgICBjb25zb2xlLmRpcihvcmdPdXMsIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIExpc3Qgb2YgT3JnYW5pemF0aW9uJ3MgdG9wLWxldmVsIE9VcyBhbmQgQVdTIGFjY291bnRzOmApO1xuICAgICAgICAgICAgaWYgKG9yZ091cyAmJiBvcmdPdXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgb3Ugb2Ygb3JnT3VzKSB7XG4gICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgT3JnYW5pemF0aW9uYWwgVW5pdDogJHtvdS5uYW1lfWApO1xuICAgICAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgICAgT3JnYW5pemF0aW9uYWwgVW5pdCBJZDogJHtvdS5pZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91LmFjY291bnRzICYmIG91LmFjY291bnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgICBBV1MgQWNjb3VudHM6YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGFjY291bnQgb2Ygb3UuYWNjb3VudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgICAgICAke2FjY291bnQuTmFtZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgICBBV1MgQWNjb3VudHM6IE5vbmVgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgTm8gdG9wIGxldmVsIE9VcyBmb3VuZC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5BV1MgT1JHQU5JWkFUSU9OIE1FTUJFUiBBQ0NPVU5UU1xcbmApO1xuICAgICAgICBjb25zdCBvcmdNZW1iZXJBY2NvdW50RGV0YWlscyA9IGF3YWl0IGdldE9yZ01lbWJlckFjY291bnRzKCk7XG4gICAgICAgIGNvbnNvbGUuZGlyKG9yZ01lbWJlckFjY291bnREZXRhaWxzLCB7IGRlcHRoOiBudWxsLCBjb2xvcnM6IHRydWUgfSk7XG4gICAgICAgIGlmIChvcmdNZW1iZXJBY2NvdW50RGV0YWlscyAmJiBvcmdNZW1iZXJBY2NvdW50RGV0YWlscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1lbWJlckFjY291bnQgb2Ygb3JnTWVtYmVyQWNjb3VudERldGFpbHMpIHtcbiAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBY2NvdW50OiAke21lbWJlckFjY291bnQuYWNjb3VudE5hbWV9YCk7XG4gICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQWNjb3VudCBFbWFpbDogJHttZW1iZXJBY2NvdW50LmFjY291bnRFbWFpbH1cXG5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBObyBtZW1iZXIgYWNjb3VudHMgZm91bmQgd2hpY2ggaXMgYW1hemluZyBhcyB0aGlzIGlzIHJ1bm5pbmcgZnJvbSBvbmUuYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoYWNjb3VudFR5cGUuaXNJbk9yZ2FuaXphdGlvbiAmJiAhYWNjb3VudFR5cGUuaXNNYW5hZ2VtZW50QWNjb3VudCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gJ1xcbldBUk5JTkc6IFlvdSBhcmUgcnVubmluZyBQYXRoZmluZGVyIGZyb20gYW4gYWNjb3VudCB0aGF0IGlzIGEgbWVtYmVyIG9mIHlvdXIgQVdTIE9yZ2FuaXphdGlvbi4gUGxlYXNlIHJ1biB0aGUgc29sdXRpb24gZnJvbSB5b3VyIEFXUyBNYW5hZ2VtZW50IGFjY291bnQuJztcbiAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBtZXNzYWdlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSAnXFxuV0FSTklORzogWW91IGFyZSBydW5uaW5nIFBhdGhmaW5kZXIgZnJvbSBhbiBhY2NvdW50IHRoYXQgbm90IHBhcnQgb2YgYW4gQVdTIE9yZ2FuaXphdGlvbi4gVGhpcyBhY2NvdW50IHdpbGwgYmUgdHJlYXRlZCBhcyBhIHN0YW5kYWxvbmUgYWNjb3VudC4nO1xuICAgICAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIG1lc3NhZ2UpO1xuICAgIH1cbiAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tYCk7XG4gICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLWApO1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5BV1MgTUFOQUdFTUVOVCBBQ0NPVU5UIENIRUNLU2ApO1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1gKTtcbiAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxuYCk7XG4gICAgLy8gR2VuZXJhbCBhY2NvdW50IGNoZWNrcyBmb3IgYWxsIGFjY291bnQgdHlwZXMgKG1hbmFnZW1lbnQgYWNjb3VudCwgbWVtYmVyIGFjY291bnQsIHN0YW5kYWxvbmUpXG4gICAgLy8gMS4gbGlzdCBhbGwgSUFNIHVzZXJzIGFuZCBpZiB0aGV5IGhhdmUga2V5cyBpbiB0aGUgYXdzIGFjY291bnRcbiAgICBjb25zdCBpYW1Vc2VyUmVzdWx0ID0gYXdhaXQgY2hlY2tJYW1Vc2VycygpO1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5JQU0gVVNFUlMgQ0hFQ0tcXG5gKTtcbiAgICBpZiAoaWFtVXNlclJlc3VsdCAmJiBpYW1Vc2VyUmVzdWx0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5kaXIoaWFtVXNlclJlc3VsdCwgeyBkZXB0aDogbnVsbCwgY29sb3JzOiB0cnVlIH0pO1xuICAgICAgICBmb3IgKGNvbnN0IGlhbVVzZXIgb2YgaWFtVXNlclJlc3VsdCkge1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgSUFNIFVzZXI6ICR7aWFtVXNlci51c2VyTmFtZX1gKTtcbiAgICAgICAgICAgIGlmIChpYW1Vc2VyLmFjY2Vzc0tleUlkKSB7XG4gICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICBVc2VyIEFQSSBLZXkgSUQ6ICR7aWFtVXNlci5hY2Nlc3NLZXlJZH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgTm8gSUFNIFVzZXJzIGZvdW5kLmApO1xuICAgIH1cbiAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tYCk7XG4gICAgLy8gMi4gZmluZCBvdXQgaWYgRUMyIHdvcmtsb2FkcyBhcmUgcnVubmluZyBpbiB0aGUgYWNjb3VudFxuICAgIGNvbnN0IGVjMkNoZWNrID0gYXdhaXQgY2hlY2tFYzJFeGlzdHMoYWxsUmVnaW9ucyk7XG4gICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkVDMiBJTlNUQU5DRSBDSEVDS1xcbmApO1xuICAgIGlmIChlYzJDaGVjayAmJiBlYzJDaGVjay5maW5kKHBhcmFtID0+IHBhcmFtLmVjMkZvdW5kID09PSB0cnVlKSkge1xuICAgICAgICBjb25zb2xlLmRpcihlYzJDaGVjaywgeyBkZXB0aDogbnVsbCwgY29sb3JzOiB0cnVlIH0pO1xuICAgICAgICBmb3IgKGNvbnN0IGVjMiBvZiBlYzJDaGVjaykge1xuICAgICAgICAgICAgaWYgKGVjMi5lYzJGb3VuZCkge1xuICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7ZWMyLnJlZ2lvbn0gLSBmb3VuZCBFQzIgSW5zdGFuY2UocykuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIE5vIEVDMiBpbnN0YW5jZXMgZm91bmQuYCk7XG4gICAgfVxuICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1gKTtcbiAgICAvLyAzLiBsaXN0IGFsbCBWUENzIChkZWZhdWx0IG9yIG5vdClcbiAgICBjb25zdCB2cGNDaGVjayA9IGF3YWl0IGNoZWNrVnBjRXhpc3RzKGFsbFJlZ2lvbnMpO1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5WUEMgQ0hFQ0tcXG5gKTtcbiAgICBpZiAodnBjQ2hlY2sgJiYgdnBjQ2hlY2subGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zb2xlLmRpcih2cGNDaGVjaywgeyBkZXB0aDogbnVsbCwgY29sb3JzOiB0cnVlIH0pO1xuICAgICAgICBmb3IgKGNvbnN0IHZwY0ZpbmQgb2YgdnBjQ2hlY2spIHtcbiAgICAgICAgICAgIGlmICh2cGNGaW5kLnZwY0ZvdW5kKSB7XG4gICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHt2cGNGaW5kLnJlZ2lvbn0gLSBmb3VuZCBWUEMocykuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIE5vIFZQQ3MgZm91bmQuYCk7XG4gICAgfVxuICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1gKTtcbiAgICAvLyA0LiBjaGVjayBmb3IgY2xvdWR0cmFpbCBydW5uaW5nXG4gICAgY29uc3QgY2xvdWRUcmFpbENoZWNrID0gYXdhaXQgY2hlY2tDbG91ZFRyYWlsRXhpc3RzKGFsbFJlZ2lvbnMpO1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5DTE9VRFRSQUlMIENIRUNLXFxuYCk7XG4gICAgaWYgKGNsb3VkVHJhaWxDaGVjayAmJiBjbG91ZFRyYWlsQ2hlY2subGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zb2xlLmRpcihjbG91ZFRyYWlsQ2hlY2ssIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgZm9yIChjb25zdCBjdEZpbmQgb2YgY2xvdWRUcmFpbENoZWNrKSB7XG4gICAgICAgICAgICBpZiAoY3RGaW5kLnRyYWlsRm91bmQpIHtcbiAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBDbG91ZFRyYWlsIGZvdW5kIGluICR7Y3RGaW5kLnJlZ2lvbn1gKTtcbiAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgIElzIE9yZ2FuaXphdGlvbiBUcmFpbDogJHtjdEZpbmQuaXNPcmdUcmFpbH1gKTtcbiAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgIElzIE11bHRpUmVnaW9uOiAke2N0RmluZC5pc011bHRpUmVnaW9ufWApO1xuICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgTm8gQVdTIENsb3VkVHJhaWwgcmVzb3VyY2UgZGlzY292ZXJlZGApO1xuICAgIH1cbiAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuYCk7XG4gICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLWApO1xuICAgIC8vIDUuIGNoZWNrIGZvciBBV1MgY29uZmlnIHJlY29yZGVycyBhbmQgZGVsaXZlcnkgY2hhbm5lbHNcbiAgICBjb25zdCBjb25maWdDaGVjayA9IGF3YWl0IGNoZWNrQ29uZmlnRXhpc3RzKGFsbFJlZ2lvbnMpO1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5BV1MgQ09ORklHIENIRUNLXFxuYCk7XG4gICAgaWYgKGNvbmZpZ0NoZWNrICYmIGNvbmZpZ0NoZWNrLmZpbmQocGFyYW0gPT4gcGFyYW0uY29uZmlnUmVjb3JkZXJGb3VuZCA9PT0gdHJ1ZSkpIHtcbiAgICAgICAgY29uc29sZS5kaXIoY29uZmlnQ2hlY2ssIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgZm9yIChjb25zdCBjb25maWdGaW5kIG9mIGNvbmZpZ0NoZWNrKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlnRmluZC5jb25maWdSZWNvcmRlckZvdW5kKSB7XG4gICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHtjb25maWdGaW5kLnJlZ2lvbn0gLSBDb25maWcgUmVjb3JkZXIgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb25maWdGaW5kLmNvbmZpZ0RlbGl2ZXJ5Q2hhbm5lbEZvdW5kKSB7XG4gICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHtjb25maWdGaW5kLnJlZ2lvbn0gLSBDb25maWcgRGVsaXZlcnkgQ2hhbm5lbCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBObyBBV1MgQ29uZmlnIHJlc291cmNlIGRpc2NvdmVyZWRgKTtcbiAgICB9XG4gICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcblxcbiAgRU5EIEFTU0VTU01FTlRgKTtcbn07XG5tYWluKCk7XG4iLCJpbXBvcnQgeyBFQzJDbGllbnQsIERlc2NyaWJlUmVnaW9uc0NvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LWVjMlwiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0QWxsUmVnaW9ucygpIHtcbiAgICAvLyBncmFiYmluZyBhbGwgcmVnaW9ucyBmcm9tIHVzLWVhc3QtMVxuICAgIGNvbnN0IGVjMkNsaWVudCA9IG5ldyBFQzJDbGllbnQoeyByZWdpb246IFwidXMtZWFzdC0xXCIgfSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGVzY3JpYmVSZWdpb25zQ29tbWFuZCA9IG5ldyBEZXNjcmliZVJlZ2lvbnNDb21tYW5kKHt9KTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBlYzJDbGllbnQuc2VuZChkZXNjcmliZVJlZ2lvbnNDb21tYW5kKTtcbiAgICAgICAgY29uc3QgcmVnaW9ucyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHJlZ2lvbiBvZiByZXNwb25zZS5SZWdpb25zIHx8IFtdKSB7XG4gICAgICAgICAgICByZWdpb25zLnB1c2gocmVnaW9uLlJlZ2lvbk5hbWUgfHwgXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlZ2lvbnM7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcmV0cmlldmluZyByZWdpb25zOlwiLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIGVjMkNsaWVudC5kZXN0cm95KCk7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgZ2V0QWxsUmVnaW9ucztcbiIsImltcG9ydCB7IE9yZ2FuaXphdGlvbnNDbGllbnQsIERlc2NyaWJlT3JnYW5pemF0aW9uQ29tbWFuZCwgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LW9yZ2FuaXphdGlvbnNcIjtcbi8vIGZ1bmN0aW9uIGNoZWNraW5nIGlmIG1hbmFnZW1lbnQgYWNjb3VudCwgbWVtYmVyIGFjY291bnQsIG9yIHN0YW5kYWxvbmUgYWNjb3VudFxuZXhwb3J0IGNvbnN0IGRlZmluZUFjY291bnRUeXBlID0gYXN5bmMgKHJlZ2lvbikgPT4ge1xuICAgIGNvbnN0IG9yZ2FuaXphdGlvbnNDbGllbnQgPSBuZXcgT3JnYW5pemF0aW9uc0NsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBkZXNjcmliZU9yZ2FuaXphdGlvbkNvbW1hbmQgPSBuZXcgRGVzY3JpYmVPcmdhbml6YXRpb25Db21tYW5kKHt9KTtcbiAgICAgICAgY29uc3QgZGVzY3JpYmVPcmdhbml6YXRpb25SZXNwb25zZSA9IGF3YWl0IG9yZ2FuaXphdGlvbnNDbGllbnQuc2VuZChkZXNjcmliZU9yZ2FuaXphdGlvbkNvbW1hbmQpO1xuICAgICAgICBjb25zdCBpc0luT3JnYW5pemF0aW9uID0gISFkZXNjcmliZU9yZ2FuaXphdGlvblJlc3BvbnNlLk9yZ2FuaXphdGlvbjtcbiAgICAgICAgLy8gdGhlIGFjY291bnQgaXMgbm90IHN0YW5kYWxvbmUgYW5kIHBhcnQgb2YgQVdTIE9yZ2FuaXphdGlvblxuICAgICAgICBpZiAoZGVzY3JpYmVPcmdhbml6YXRpb25SZXNwb25zZS5Pcmdhbml6YXRpb24/Lk1hc3RlckFjY291bnRJZCkge1xuICAgICAgICAgICAgY29uc3QgaXNNYW5hZ2VtZW50QWNjb3VudCA9IGRlc2NyaWJlT3JnYW5pemF0aW9uUmVzcG9uc2UuT3JnYW5pemF0aW9uPy5NYXN0ZXJBY2NvdW50SWQgPT09IGRlc2NyaWJlT3JnYW5pemF0aW9uUmVzcG9uc2UuT3JnYW5pemF0aW9uPy5NYXN0ZXJBY2NvdW50SWQ7XG4gICAgICAgICAgICByZXR1cm4geyBpc0luT3JnYW5pemF0aW9uLCBpc01hbmFnZW1lbnRBY2NvdW50IH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geyBpc0luT3JnYW5pemF0aW9uIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgICByZXR1cm4geyBpc0luT3JnYW5pemF0aW9uOiBmYWxzZSB9O1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgb3JnYW5pemF0aW9uc0NsaWVudC5kZXN0cm95KCk7XG4gICAgfVxufTtcbiIsImltcG9ydCB7IENvc3RBbmRVc2FnZVJlcG9ydFNlcnZpY2VDbGllbnQsIERlc2NyaWJlUmVwb3J0RGVmaW5pdGlvbnNDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1jb3N0LWFuZC11c2FnZS1yZXBvcnQtc2VydmljZVwiO1xuY29uc3QgY2hlY2tMZWdhY3lDdXIgPSBhc3luYyAocmVnaW9uKSA9PiB7XG4gICAgLy8gU2V0IHVwIEFXUyBTREsgY2xpZW50IGZvciBDb3N0IEV4cGxvcmVyXG4gICAgY29uc3QgY3VyQ2xpZW50ID0gbmV3IENvc3RBbmRVc2FnZVJlcG9ydFNlcnZpY2VDbGllbnQoeyByZWdpb24gfSk7XG4gICAgbGV0IGlzTGVnYWN5Q3VyU2V0dXAgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICAvLyBDaGVjayBpZiBDb3N0IEV4cGxvcmVyIGlzIHNldCB1cFxuICAgICAgICBjb25zdCBpbnB1dCA9IHt9O1xuICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IERlc2NyaWJlUmVwb3J0RGVmaW5pdGlvbnNDb21tYW5kKGlucHV0KTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjdXJDbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLlJlcG9ydERlZmluaXRpb25zICYmIHJlc3BvbnNlLlJlcG9ydERlZmluaXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlzTGVnYWN5Q3VyU2V0dXAgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGlzTGVnYWN5Q3VyU2V0dXAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBlcnJvciBpcyByZWxhdGVkIHRvIENvc3QgRXhwbG9yZXIgc2V0dXBcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgICAgIGlzTGVnYWN5Q3VyU2V0dXAgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHsgaXNMZWdhY3lDdXJTZXR1cCB9O1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgLy8gQ2xvc2UgdGhlIEFXUyBTREsgY2xpZW50XG4gICAgICAgIGN1ckNsaWVudC5kZXN0cm95KCk7XG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IGNoZWNrTGVnYWN5Q3VyO1xuIiwiaW1wb3J0IHsgT3JnYW5pemF0aW9uc0NsaWVudCwgTGlzdFJvb3RzQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtb3JnYW5pemF0aW9uc1wiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0RW5hYmxlZE9yZ1BvbGljeVR5cGVzKHJlZ2lvbikge1xuICAgIGNvbnN0IG9yZ0NsaWVudCA9IG5ldyBPcmdhbml6YXRpb25zQ2xpZW50KHsgcmVnaW9uIH0pO1xuICAgIGxldCBwb2xpY3lUeXBlc0VuYWJsZWQgPSB7XG4gICAgICAgIHNjcEVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICB0YWdQb2xpY3lFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgYmFja3VwUG9saWN5RW5hYmxlZDogZmFsc2VcbiAgICB9O1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0ge307XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgTGlzdFJvb3RzQ29tbWFuZChpbnB1dCk7XG4gICAgICAgIGNvbnN0IHJvb3RzID0gYXdhaXQgb3JnQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgIGlmIChyb290cy5Sb290cykge1xuICAgICAgICAgICAgaWYgKHJvb3RzLlJvb3RzWzBdLlBvbGljeVR5cGVzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlbmFibGVkUG9saWN5IG9mIHJvb3RzLlJvb3RzWzBdLlBvbGljeVR5cGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmFibGVkUG9saWN5LlR5cGUgPT0gJ1NFUlZJQ0VfQ09OVFJPTF9QT0xJQ1knICYmIGVuYWJsZWRQb2xpY3kuU3RhdHVzID09ICdFTkFCTEVEJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5VHlwZXNFbmFibGVkLnNjcEVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmFibGVkUG9saWN5LlR5cGUgPT0gJ1RBR19QT0xJQ1knICYmIGVuYWJsZWRQb2xpY3kuU3RhdHVzID09ICdFTkFCTEVEJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5VHlwZXNFbmFibGVkLnRhZ1BvbGljeUVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmFibGVkUG9saWN5LlR5cGUgPT0gJ0JBQ0tVUF9QT0xJQ1knICYmIGVuYWJsZWRQb2xpY3kuU3RhdHVzID09ICdFTkFCTEVEJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5VHlwZXNFbmFibGVkLmJhY2t1cFBvbGljeUVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSAvLyBlbmQgZm9yXG4gICAgICAgICAgICB9IC8vIGVuZCBpZlxuICAgICAgICB9IC8vIGVuZCBpZlxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgQW4gZXJyb3Igb2NjdXJyZWQ6ICR7ZXJyb3J9YCk7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBvcmdDbGllbnQuZGVzdHJveSgpO1xuICAgICAgICByZXR1cm4gcG9saWN5VHlwZXNFbmFibGVkO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IGdldEVuYWJsZWRPcmdQb2xpY3lUeXBlcztcbiIsImltcG9ydCB7IE9yZ2FuaXphdGlvbnNDbGllbnQsIExpc3RBV1NTZXJ2aWNlQWNjZXNzRm9yT3JnYW5pemF0aW9uQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtb3JnYW5pemF0aW9uc1wiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0RW5hYmxlZE9yZ1NlcnZpY2VzKHJlZ2lvbikge1xuICAgIGNvbnN0IGRpc2NvdmVyZWRPcmdTZXJ2aWNlcyA9IFtdO1xuICAgIGNvbnN0IG9yZ0NsaWVudCA9IG5ldyBPcmdhbml6YXRpb25zQ2xpZW50KHsgcmVnaW9uIH0pO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG9yZ1NlcnZpY2VBY2Nlc3NDb21tYW5kID0gbmV3IExpc3RBV1NTZXJ2aWNlQWNjZXNzRm9yT3JnYW5pemF0aW9uQ29tbWFuZCh7fSk7XG4gICAgICAgIGNvbnN0IG9yZ1NlcnZpY2VBY2Nlc3NSZXNwb25zZSA9IGF3YWl0IG9yZ0NsaWVudC5zZW5kKG9yZ1NlcnZpY2VBY2Nlc3NDb21tYW5kKTtcbiAgICAgICAgaWYgKG9yZ1NlcnZpY2VBY2Nlc3NSZXNwb25zZS5FbmFibGVkU2VydmljZVByaW5jaXBhbHMgJiYgb3JnU2VydmljZUFjY2Vzc1Jlc3BvbnNlLkVuYWJsZWRTZXJ2aWNlUHJpbmNpcGFscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBvcmdTZXJ2aWNlQWNjZXNzUmVzcG9uc2UuRW5hYmxlZFNlcnZpY2VQcmluY2lwYWxzO1xuICAgICAgICAgICAgZm9yIChjb25zdCBvcmdTZXJ2aWNlIG9mIG9yZ1NlcnZpY2VBY2Nlc3NSZXNwb25zZS5FbmFibGVkU2VydmljZVByaW5jaXBhbHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmb3VuZE9yZ1NlcnZpY2UgPSB7IHNlcnZpY2U6IG9yZ1NlcnZpY2UuU2VydmljZVByaW5jaXBhbCA/PyBcIlwiIH07XG4gICAgICAgICAgICAgICAgZGlzY292ZXJlZE9yZ1NlcnZpY2VzLnB1c2goZm91bmRPcmdTZXJ2aWNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgc2VydmljZSBhY2Nlc3M6JywgZXJyb3IpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgb3JnQ2xpZW50LmRlc3Ryb3koKTtcbiAgICAgICAgcmV0dXJuIGRpc2NvdmVyZWRPcmdTZXJ2aWNlcztcbiAgICB9XG59XG47XG5leHBvcnQgZGVmYXVsdCBnZXRFbmFibGVkT3JnU2VydmljZXM7XG4iLCJpbXBvcnQgeyBPcmdhbml6YXRpb25zQ2xpZW50LCBMaXN0RGVsZWdhdGVkQWRtaW5pc3RyYXRvcnNDb21tYW5kLCBMaXN0RGVsZWdhdGVkU2VydmljZXNGb3JBY2NvdW50Q29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtb3JnYW5pemF0aW9uc1wiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0T3JnRGFBY2NvdW50cygpIHtcbiAgICBsZXQgb3JnRGFEZXRhaWxzID0gW107XG4gICAgY29uc3Qgb3JnQ2xpZW50ID0gbmV3IE9yZ2FuaXphdGlvbnNDbGllbnQoeyByZWdpb246ICd1cy1lYXN0LTEnIH0pO1xuICAgIGxldCBvcmdEYURldGFpbCA9IHt9O1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgTGlzdERlbGVnYXRlZEFkbWluaXN0cmF0b3JzQ29tbWFuZCh7fSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3JnQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgIGlmIChyZXNwb25zZS5EZWxlZ2F0ZWRBZG1pbmlzdHJhdG9ycykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBkYSBvZiByZXNwb25zZS5EZWxlZ2F0ZWRBZG1pbmlzdHJhdG9ycykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ID0geyBBY2NvdW50SWQ6IGRhLklkIH07XG4gICAgICAgICAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBMaXN0RGVsZWdhdGVkU2VydmljZXNGb3JBY2NvdW50Q29tbWFuZChpbnB1dCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYWNjb3VudFJlc3BvbnNlID0gYXdhaXQgb3JnQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgICAgICAgICAgaWYgKGFjY291bnRSZXNwb25zZS5EZWxlZ2F0ZWRTZXJ2aWNlcykge1xuICAgICAgICAgICAgICAgICAgICBvcmdEYURldGFpbCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VzOiBhY2NvdW50UmVzcG9uc2UuRGVsZWdhdGVkU2VydmljZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50TmFtZTogZGEuTmFtZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBvcmdEYURldGFpbHMucHVzaChvcmdEYURldGFpbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3IgbG9va2luZyBmb3IgZGVsZWdhdGVkIHNlcnZpY2VzLmApO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgb3JnQ2xpZW50LmRlc3Ryb3koKTtcbiAgICB9XG4gICAgcmV0dXJuIG9yZ0RhRGV0YWlscztcbn1cbjtcbmV4cG9ydCBkZWZhdWx0IGdldE9yZ0RhQWNjb3VudHM7XG4iLCJpbXBvcnQgeyBDbG91ZEZvcm1hdGlvbkNsaWVudCwgRGVzY3JpYmVPcmdhbml6YXRpb25zQWNjZXNzQ29tbWFuZCwgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LWNsb3VkZm9ybWF0aW9uXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRPcmdDbG91ZEZvcm1hdGlvbihyZWdpb24pIHtcbiAgICBsZXQgb3JnQ2ZuU3RhdHVzID0ge1xuICAgICAgICBzdGF0dXM6IFwiZGlzYWJsZWRcIlxuICAgIH07XG4gICAgY29uc3QgY2xvdWRGb3JtYXRpb25DbGllbnQgPSBuZXcgQ2xvdWRGb3JtYXRpb25DbGllbnQoeyByZWdpb24gfSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGVzY3JpYmVPcmdBY2Nlc3NJbnB1dCA9IHt9O1xuICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IERlc2NyaWJlT3JnYW5pemF0aW9uc0FjY2Vzc0NvbW1hbmQoZGVzY3JpYmVPcmdBY2Nlc3NJbnB1dCk7XG4gICAgICAgIGNvbnN0IGNsb3VkRm9ybWF0aW9uT3JnQWNjZXNzID0gYXdhaXQgY2xvdWRGb3JtYXRpb25DbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIkNsb3VkRm9ybWF0aW9uIGFjdGl2YXRpb24gc3RhdHVzOiBcIiwgY2xvdWRGb3JtYXRpb25PcmdBY2Nlc3MuU3RhdHVzKVxuICAgICAgICBvcmdDZm5TdGF0dXMuc3RhdHVzID0gY2xvdWRGb3JtYXRpb25PcmdBY2Nlc3MuU3RhdHVzID8/IFwiZGlzYWJsZWRcIjtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJvcn1gKTtcbiAgICAgICAgLy90aHJvdyBuZXcgRXJyb3IoYEVycm9yOiAke2Vycm9yfWApO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgY2xvdWRGb3JtYXRpb25DbGllbnQuZGVzdHJveSgpO1xuICAgICAgICByZXR1cm4gb3JnQ2ZuU3RhdHVzO1xuICAgIH1cbn1cbjtcbmV4cG9ydCBkZWZhdWx0IGdldE9yZ0Nsb3VkRm9ybWF0aW9uO1xuIiwiaW1wb3J0IHsgQ29udHJvbFRvd2VyQ2xpZW50LCBMaXN0TGFuZGluZ1pvbmVzQ29tbWFuZCwgR2V0TGFuZGluZ1pvbmVDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1jb250cm9sdG93ZXJcIjtcbmFzeW5jIGZ1bmN0aW9uIGdldENvbnRyb2xUb3dlcihyZWdpb24pIHtcbiAgICBsZXQgY29udHJvbFRvd2VySW5mbyA9IHt9O1xuICAgIGNvbnN0IGNvbnRyb2xUb3dlckNsaWVudCA9IG5ldyBDb250cm9sVG93ZXJDbGllbnQoeyByZWdpb24gfSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBMaXN0TGFuZGluZ1pvbmVzQ29tbWFuZCh7fSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY29udHJvbFRvd2VyQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmxhbmRpbmdab25lcywgbnVsbCwgMikpO1xuICAgICAgICBpZiAocmVzcG9uc2UubGFuZGluZ1pvbmVzICYmIHJlc3BvbnNlLmxhbmRpbmdab25lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IHtcbiAgICAgICAgICAgICAgICBsYW5kaW5nWm9uZUlkZW50aWZpZXI6IHJlc3BvbnNlLmxhbmRpbmdab25lc1swXS5hcm4sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgbHpSZWdpb24gPSByZXNwb25zZS5sYW5kaW5nWm9uZXNbMF0uYXJuPy50b1N0cmluZygpLnNwbGl0KCc6JylbM10gPz8gXCJcIjtcbiAgICAgICAgICAgIGlmIChselJlZ2lvbikge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xUb3dlckluZm8uY29udHJvbFRvd2VyUmVnaW9uID0gbHpSZWdpb247XG4gICAgICAgICAgICAgICAgY29uc3QgY29udHJvbFRvd2VyQ2xpZW50UmVnaW9uID0gbmV3IENvbnRyb2xUb3dlckNsaWVudCh7IHJlZ2lvbjogbHpSZWdpb24gfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBHZXRMYW5kaW5nWm9uZUNvbW1hbmQoaW5wdXQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGx6UmVzcG9uc2UgPSBhd2FpdCBjb250cm9sVG93ZXJDbGllbnRSZWdpb24uc2VuZChjb21tYW5kKTtcbiAgICAgICAgICAgICAgICBpZiAobHpSZXNwb25zZS5sYW5kaW5nWm9uZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShselJlc3BvbnNlLmxhbmRpbmdab25lLCBudWxsLCAyKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xUb3dlckluZm8uc3RhdHVzID0gbHpSZXNwb25zZS5sYW5kaW5nWm9uZS5zdGF0dXM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xUb3dlckluZm8ubGF0ZXN0QXZhaWxhYmxlVmVyc2lvbiA9IGx6UmVzcG9uc2UubGFuZGluZ1pvbmUubGF0ZXN0QXZhaWxhYmxlVmVyc2lvbjtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbFRvd2VySW5mby5kZXBsb3llZFZlcnNpb24gPSBselJlc3BvbnNlLmxhbmRpbmdab25lLnZlcnNpb247XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xUb3dlckluZm8uZHJpZnRTdGF0dXMgPSBselJlc3BvbnNlLmxhbmRpbmdab25lLmRyaWZ0U3RhdHVzPy5zdGF0dXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjaGVja2luZyBDb250cm9sIFRvd2VyIGluICR7cmVnaW9ufTpgLCBlcnJvcik7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBjb250cm9sVG93ZXJDbGllbnQuZGVzdHJveSgpO1xuICAgIH1cbiAgICByZXR1cm4gY29udHJvbFRvd2VySW5mbztcbn1cbmV4cG9ydCBkZWZhdWx0IGdldENvbnRyb2xUb3dlcjtcbiIsImltcG9ydCB7IFNTT0FkbWluQ2xpZW50LCBMaXN0SW5zdGFuY2VzQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtc3NvLWFkbWluXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRJZGNJbmZvKHJlZ2lvbkxpc3QpIHtcbiAgICBsZXQgaWRjRGV0YWlscyA9IHsgZm91bmQ6IGZhbHNlIH07XG4gICAgZm9yIChjb25zdCByZWdpb24gb2YgcmVnaW9uTGlzdCkge1xuICAgICAgICBjb25zdCBzc29BZG1pbkNsaWVudCA9IG5ldyBTU09BZG1pbkNsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHNzb0lucHV0ID0ge1xuICAgICAgICAgICAgICAgIE1heFJlc3VsdHM6IE51bWJlcihcIjEwMFwiKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgTGlzdEluc3RhbmNlc0NvbW1hbmQoc3NvSW5wdXQpO1xuICAgICAgICAgICAgY29uc3Qgc3NvSW5zdGFuY2VSZXNwb25zZSA9IGF3YWl0IHNzb0FkbWluQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgICAgICBpZiAoc3NvSW5zdGFuY2VSZXNwb25zZS5JbnN0YW5jZXMgJiYgc3NvSW5zdGFuY2VSZXNwb25zZS5JbnN0YW5jZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNzb0luc3RhbmNlID0gc3NvSW5zdGFuY2VSZXNwb25zZS5JbnN0YW5jZXNbMF07XG4gICAgICAgICAgICAgICAgaWRjRGV0YWlscy5mb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWRjRGV0YWlscy5yZWdpb24gPSByZWdpb247XG4gICAgICAgICAgICAgICAgaWRjRGV0YWlscy5hcm4gPSBzc29JbnN0YW5jZS5JbnN0YW5jZUFybjtcbiAgICAgICAgICAgICAgICBpZGNEZXRhaWxzLmlkID0gc3NvSW5zdGFuY2UuSWRlbnRpdHlTdG9yZUlkO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEVycm9yIGxvb2tpbmcgZm9yIEFXUyBJZGVudGl0eSBDZW50ZXIgZGV0YWlscyBpbiByZWdpb24gJHtyZWdpb259YCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBzc29BZG1pbkNsaWVudC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGlkY0RldGFpbHM7XG59XG47XG5leHBvcnQgZGVmYXVsdCBnZXRJZGNJbmZvO1xuIiwiaW1wb3J0IHsgT3JnYW5pemF0aW9uc0NsaWVudCwgRGVzY3JpYmVPcmdhbml6YXRpb25Db21tYW5kLCBMaXN0Um9vdHNDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1vcmdhbml6YXRpb25zXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRPcmdEZXRhaWxzKHJlZ2lvbikge1xuICAgIGNvbnN0IG9yZ0NsaWVudCA9IG5ldyBPcmdhbml6YXRpb25zQ2xpZW50KHsgcmVnaW9uIH0pO1xuICAgIGxldCBvcmdEZXRhaWxzID0ge307XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgb3JnRGVzY3JpYmVDb21tYW5kID0gbmV3IERlc2NyaWJlT3JnYW5pemF0aW9uQ29tbWFuZCh7fSk7XG4gICAgICAgIGNvbnN0IG9yZ0RhdGEgPSBhd2FpdCBvcmdDbGllbnQuc2VuZChvcmdEZXNjcmliZUNvbW1hbmQpO1xuICAgICAgICBpZiAob3JnRGF0YS5Pcmdhbml6YXRpb24pIHtcbiAgICAgICAgICAgIG9yZ0RldGFpbHMuaWQgPSBvcmdEYXRhLk9yZ2FuaXphdGlvbi5JZCA/PyBcIlwiO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYE9yZ2FuaXphdGlvbiBJRDogJHtvcmdEZXRhaWxzLmlkfWAgKTtcbiAgICAgICAgICAgIG9yZ0RldGFpbHMuYXJuID0gb3JnRGF0YS5Pcmdhbml6YXRpb24uQXJuID8/IFwiXCI7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgT3JnYW5pemF0aW9uIEFSTjogJHtvcmdEZXRhaWxzLmFybn1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IExpc3RSb290c0NvbW1hbmQoe30pO1xuICAgICAgICBjb25zdCByb290cyA9IGF3YWl0IG9yZ0NsaWVudC5zZW5kKGNvbW1hbmQpO1xuICAgICAgICBpZiAocm9vdHMuUm9vdHMpIHtcbiAgICAgICAgICAgIG9yZ0RldGFpbHMucm9vdE91SWQgPSByb290cy5Sb290c1swXS5JZDtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBBV1MgT3JnIHJvb3Qgb3UgaWQ6ICR7b3JnRGV0YWlscy5yb290T3VJZH1gKVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIGluZm8gZm91bmQgZm9yIHlvdXIgQVdTIE9yZ2FuaXphdGlvbi4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgQW4gZXJyb3Igb2NjdXJyZWQ6ICR7ZXJyb3J9YCk7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBvcmdDbGllbnQuZGVzdHJveSgpO1xuICAgICAgICByZXR1cm4gb3JnRGV0YWlscztcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBnZXRPcmdEZXRhaWxzO1xuIiwiaW1wb3J0IHsgT3JnYW5pemF0aW9uc0NsaWVudCwgTGlzdE9yZ2FuaXphdGlvbmFsVW5pdHNGb3JQYXJlbnRDb21tYW5kLCBMaXN0QWNjb3VudHNGb3JQYXJlbnRDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1vcmdhbml6YXRpb25zXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRPcmdUb3BMZXZlbE91cyhyZWdpb24sIHJvb3RPdUlkKSB7XG4gICAgY29uc3Qgb3JnQ2xpZW50ID0gbmV3IE9yZ2FuaXphdGlvbnNDbGllbnQoeyByZWdpb24gfSk7XG4gICAgbGV0IHRvcExldmVsT3VzID0gW107XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbGlzdE9Vc0NvbW1hbmQgPSBuZXcgTGlzdE9yZ2FuaXphdGlvbmFsVW5pdHNGb3JQYXJlbnRDb21tYW5kKHtcbiAgICAgICAgICAgIFBhcmVudElkOiByb290T3VJZCxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGxpc3RPVXNSZXNwb25zZSA9IGF3YWl0IG9yZ0NsaWVudC5zZW5kKGxpc3RPVXNDb21tYW5kKTtcbiAgICAgICAgaWYgKGxpc3RPVXNSZXNwb25zZS5Pcmdhbml6YXRpb25hbFVuaXRzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG91IG9mIGxpc3RPVXNSZXNwb25zZS5Pcmdhbml6YXRpb25hbFVuaXRzKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRvcExldmVsT3UgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBvdS5JZCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogb3UuTmFtZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgYWNjb3VudFJlc3BvbnNlID0gYXdhaXQgb3JnQ2xpZW50LnNlbmQobmV3IExpc3RBY2NvdW50c0ZvclBhcmVudENvbW1hbmQoeyBQYXJlbnRJZDogb3UuSWQgfSkpO1xuICAgICAgICAgICAgICAgIGlmIChhY2NvdW50UmVzcG9uc2UuQWNjb3VudHMgJiYgYWNjb3VudFJlc3BvbnNlLkFjY291bnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdG9wTGV2ZWxPdS5hY2NvdW50cyA9IGFjY291bnRSZXNwb25zZS5BY2NvdW50cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdG9wTGV2ZWxPdXMucHVzaCh0b3BMZXZlbE91KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgc2VydmljZSBhY2Nlc3M6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBvcmdDbGllbnQuZGVzdHJveSgpO1xuICAgIH1cbiAgICByZXR1cm4gdG9wTGV2ZWxPdXM7XG59XG47XG5leHBvcnQgZGVmYXVsdCBnZXRPcmdUb3BMZXZlbE91cztcbiIsImltcG9ydCB7IE9yZ2FuaXphdGlvbnNDbGllbnQsIExpc3RBY2NvdW50c0NvbW1hbmQgfSBmcm9tICdAYXdzLXNkay9jbGllbnQtb3JnYW5pemF0aW9ucyc7XG5hc3luYyBmdW5jdGlvbiBnZXRPcmdNZW1iZXJBY2NvdW50cygpIHtcbiAgICBsZXQgb3JnTWVtYmVyQWNjb3VudEluZm8gPSBbXTtcbiAgICBjb25zdCBvcmdzQ2xpZW50ID0gbmV3IE9yZ2FuaXphdGlvbnNDbGllbnQoeyByZWdpb246ICd1cy1lYXN0LTEnIH0pO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3Jnc0NsaWVudC5zZW5kKG5ldyBMaXN0QWNjb3VudHNDb21tYW5kKHt9KSk7XG4gICAgICAgIGlmIChyZXNwb25zZS5BY2NvdW50cyAmJiByZXNwb25zZS5BY2NvdW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFjY291bnQgb2YgcmVzcG9uc2UuQWNjb3VudHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgb3JnTWVtYmVyQWNjb3VudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudE5hbWU6IGFjY291bnQuTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudEVtYWlsOiBhY2NvdW50LkVtYWlsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgb3JnTWVtYmVyQWNjb3VudEluZm8ucHVzaChvcmdNZW1iZXJBY2NvdW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbGlzdGluZyBBV1MgYWNjb3VudHM6JywgZXJyb3IpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgb3Jnc0NsaWVudC5kZXN0cm95KCk7XG4gICAgfVxuICAgIHJldHVybiBvcmdNZW1iZXJBY2NvdW50SW5mbztcbn1cbmV4cG9ydCBkZWZhdWx0IGdldE9yZ01lbWJlckFjY291bnRzO1xuIiwiaW1wb3J0IHsgSUFNQ2xpZW50LCBMaXN0VXNlcnNDb21tYW5kLCBMaXN0QWNjZXNzS2V5c0NvbW1hbmQsIEdldEFjY2Vzc0tleUxhc3RVc2VkQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtaWFtXCI7XG4vLyBmdW5jdGlvbiBsaXN0IGFsbCBJQU0gdXNlcnMgYW5kIGlmIHRoZXkgaGF2ZSBrZXlzIGluIHRoZSBtYW5hZ2VtZW50IGFjY291bnRcbmNvbnN0IGNoZWNrSWFtVXNlcnMgPSBhc3luYyAoKSA9PiB7XG4gICAgLy8gU2V0IHRvIHVzLWVhc3QtMSBhcyBJQU0gaXMgZ2xvYmFsIGFuZCByZWdpb24gaXNuJ3QgYSBjb25jZXJuXG4gICAgY29uc3QgaWFtQ2xpZW50ID0gbmV3IElBTUNsaWVudCh7IHJlZ2lvbjogJ3VzLWVhc3QtMScgfSk7XG4gICAgY29uc3QgaWFtVXNlckluZm8gPSBbXTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBsaXN0VXNlcnNDb21tYW5kID0gbmV3IExpc3RVc2Vyc0NvbW1hbmQoe30pO1xuICAgICAgICBjb25zdCBsaXN0VXNlcnNSZXNwb25zZSA9IGF3YWl0IGlhbUNsaWVudC5zZW5kKGxpc3RVc2Vyc0NvbW1hbmQpO1xuICAgICAgICBmb3IgKGNvbnN0IHVzZXIgb2YgbGlzdFVzZXJzUmVzcG9uc2UuVXNlcnMgfHwgW10pIHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJOYW1lID0gdXNlci5Vc2VyTmFtZSB8fCBcIlwiO1xuICAgICAgICAgICAgY29uc3QgbGlzdEFjY2Vzc0tleXNDb21tYW5kID0gbmV3IExpc3RBY2Nlc3NLZXlzQ29tbWFuZCh7XG4gICAgICAgICAgICAgICAgVXNlck5hbWU6IHVzZXJOYW1lLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBsaXN0QWNjZXNzS2V5c1Jlc3BvbnNlID0gYXdhaXQgaWFtQ2xpZW50LnNlbmQobGlzdEFjY2Vzc0tleXNDb21tYW5kKTtcbiAgICAgICAgICAgIGNvbnN0IGFjY2Vzc0tleXMgPSBsaXN0QWNjZXNzS2V5c1Jlc3BvbnNlLkFjY2Vzc0tleU1ldGFkYXRhIHx8IFtdO1xuICAgICAgICAgICAgaWYgKGFjY2Vzc0tleXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYWNjZXNzS2V5IG9mIGFjY2Vzc0tleXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzS2V5SWQgPSBhY2Nlc3NLZXkuQWNjZXNzS2V5SWQgfHwgXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2V0TGFzdFVzZWRDb21tYW5kID0gbmV3IEdldEFjY2Vzc0tleUxhc3RVc2VkQ29tbWFuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBBY2Nlc3NLZXlJZDogYWNjZXNzS2V5SWQsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0VXNlZFJlc3BvbnNlID0gYXdhaXQgaWFtQ2xpZW50LnNlbmQoZ2V0TGFzdFVzZWRDb21tYW5kKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm91bmRVc2VySW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzS2V5SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0VXNlZDogbGFzdFVzZWRSZXNwb25zZSAmJiBsYXN0VXNlZFJlc3BvbnNlLkFjY2Vzc0tleUxhc3RVc2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBgJHtsYXN0VXNlZFJlc3BvbnNlLkFjY2Vzc0tleUxhc3RVc2VkLkxhc3RVc2VkRGF0ZX1gIHx8IFwiTm90IGF2YWlsYWJsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIk5vdCBhdmFpbGFibGVcIixcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaWFtVXNlckluZm8ucHVzaChmb3VuZFVzZXJJbmZvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmb3VuZFVzZXJJbmZvID0ge1xuICAgICAgICAgICAgICAgICAgICB1c2VyTmFtZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWFtVXNlckluZm8ucHVzaChmb3VuZFVzZXJJbmZvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcik7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBpYW1DbGllbnQuZGVzdHJveSgpO1xuICAgIH1cbiAgICByZXR1cm4gaWFtVXNlckluZm87XG59O1xuZXhwb3J0IGRlZmF1bHQgY2hlY2tJYW1Vc2VycztcbiIsImltcG9ydCB7IEVDMkNsaWVudCwgRGVzY3JpYmVJbnN0YW5jZXNDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1lYzJcIjtcbmFzeW5jIGZ1bmN0aW9uIGNoZWNrRWMyRXhpc3RzKHJlZ2lvbnMpIHtcbiAgICBsZXQgZWMyVmFsaWRhdGlvbiA9IFtdO1xuICAgIGZvciAoY29uc3QgcmVnaW9uIG9mIHJlZ2lvbnMpIHtcbiAgICAgICAgY29uc3QgZWMyQ2xpZW50ID0gbmV3IEVDMkNsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBEZXNjcmliZUluc3RhbmNlc0NvbW1hbmQoe30pO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBlYzJDbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5SZXNlcnZhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuUmVzZXJ2YXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhgV0FSTklORzogSW5zdGFuY2UocykgZXhpc3RzIGluIHJlZ2lvbjogJHtyZWdpb259YCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVjMkZvdW5kID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiByZWdpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBlYzJGb3VuZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBlYzJWYWxpZGF0aW9uLnB1c2goZWMyRm91bmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWMyRm91bmQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpb246IHJlZ2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVjMkZvdW5kOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBlYzJWYWxpZGF0aW9uLnB1c2goZWMyRm91bmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVjMkZvdW5kID0ge1xuICAgICAgICAgICAgICAgICAgICByZWdpb246IHJlZ2lvbixcbiAgICAgICAgICAgICAgICAgICAgZWMyRm91bmQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBlYzJWYWxpZGF0aW9uLnB1c2goZWMyRm91bmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEVycm9yIGNoZWNraW5nIGluc3RhbmNlOiAke2Vycm9yfWApO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgZWMyQ2xpZW50LmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgIH0gLy8gZW5kIGZvclxuICAgIHJldHVybiBlYzJWYWxpZGF0aW9uO1xufVxuO1xuZXhwb3J0IGRlZmF1bHQgY2hlY2tFYzJFeGlzdHM7XG4iLCJpbXBvcnQgeyBFQzJDbGllbnQsIERlc2NyaWJlVnBjc0NvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LWVjMlwiO1xuYXN5bmMgZnVuY3Rpb24gY2hlY2tWcGNFeGlzdHMocmVnaW9ucykge1xuICAgIGxldCB2cGNWYWxpZGF0aW9uID0gW107XG4gICAgZm9yIChjb25zdCByZWdpb24gb2YgcmVnaW9ucykge1xuICAgICAgICBjb25zdCBlYzJDbGllbnQgPSBuZXcgRUMyQ2xpZW50KHsgcmVnaW9uIH0pO1xuICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IERlc2NyaWJlVnBjc0NvbW1hbmQoe30pO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBlYzJDbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5WcGNzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLlZwY3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGBXQVJOSU5HOiBWUEMocykgZXhpc3RzIGluIHJlZ2lvbjogJHtyZWdpb259YCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZwY0ZvdW5kID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiByZWdpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICB2cGNGb3VuZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2cGNWYWxpZGF0aW9uLnB1c2godnBjRm91bmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdnBjRm91bmQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpb246IHJlZ2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHZwY0ZvdW5kOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2cGNWYWxpZGF0aW9uLnB1c2godnBjRm91bmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZwY0ZvdW5kID0ge1xuICAgICAgICAgICAgICAgICAgICByZWdpb246IHJlZ2lvbixcbiAgICAgICAgICAgICAgICAgICAgdnBjRm91bmQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2cGNWYWxpZGF0aW9uLnB1c2godnBjRm91bmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEVycm9yIGNoZWNraW5nIGluc3RhbmNlOiAke2Vycm9yfWApO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgZWMyQ2xpZW50LmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgIH0gLy8gZW5kIGZvclxuICAgIHJldHVybiB2cGNWYWxpZGF0aW9uO1xufVxuO1xuZXhwb3J0IGRlZmF1bHQgY2hlY2tWcGNFeGlzdHM7XG4iLCJpbXBvcnQgeyBDbG91ZFRyYWlsQ2xpZW50LCBEZXNjcmliZVRyYWlsc0NvbW1hbmQgfSBmcm9tICdAYXdzLXNkay9jbGllbnQtY2xvdWR0cmFpbCc7XG5hc3luYyBmdW5jdGlvbiBjaGVja0Nsb3VkVHJhaWxFeGlzdHMocmVnaW9ucykge1xuICAgIGxldCBjbG91ZFRyYWlsVmFsaWRhdGlvbiA9IFtdO1xuICAgIGZvciAoY29uc3QgcmVnaW9uIG9mIHJlZ2lvbnMpIHtcbiAgICAgICAgY29uc3QgY2xvdWRUcmFpbENsaWVudCA9IG5ldyBDbG91ZFRyYWlsQ2xpZW50KHsgcmVnaW9uIH0pO1xuICAgICAgICBjb25zdCBjbG91ZFRyYWlsRGVzY3JpYmVDb21tYW5kID0gbmV3IERlc2NyaWJlVHJhaWxzQ29tbWFuZCh7fSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjbG91ZFRyYWlsUmVzcG9uc2UgPSBhd2FpdCBjbG91ZFRyYWlsQ2xpZW50LnNlbmQoY2xvdWRUcmFpbERlc2NyaWJlQ29tbWFuZCk7XG4gICAgICAgICAgICBpZiAoY2xvdWRUcmFpbFJlc3BvbnNlLnRyYWlsTGlzdCkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdHJhaWwgb2YgY2xvdWRUcmFpbFJlc3BvbnNlLnRyYWlsTGlzdCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdHJhaWxJbmZvID0ge307XG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmFpbC5Ib21lUmVnaW9uID09IHJlZ2lvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhgdHJhaWwgZm91bmQgaW4gJHtyZWdpb259YClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWlsSW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpb246IHJlZ2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFpbEZvdW5kOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT3JnVHJhaWw6IHRyYWlsLklzTXVsdGlSZWdpb25UcmFpbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc011bHRpUmVnaW9uOiB0cmFpbC5Jc011bHRpUmVnaW9uVHJhaWxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFpbEluZm8gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiByZWdpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhaWxGb3VuZDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2xvdWRUcmFpbFZhbGlkYXRpb24ucHVzaCh0cmFpbEluZm8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBjaGVja2luZyBpbnN0YW5jZTogJHtlcnJvcn1gKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGNsb3VkVHJhaWxDbGllbnQuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfSAvLyBlbmQgZm9yIHJlZ2lvbnNcbiAgICByZXR1cm4gY2xvdWRUcmFpbFZhbGlkYXRpb247XG59XG47XG5leHBvcnQgZGVmYXVsdCBjaGVja0Nsb3VkVHJhaWxFeGlzdHM7XG4iLCJpbXBvcnQgeyBDb25maWdTZXJ2aWNlQ2xpZW50LCBEZXNjcmliZUNvbmZpZ3VyYXRpb25SZWNvcmRlclN0YXR1c0NvbW1hbmQsIERlc2NyaWJlRGVsaXZlcnlDaGFubmVsc0NvbW1hbmQgfSBmcm9tICdAYXdzLXNkay9jbGllbnQtY29uZmlnLXNlcnZpY2UnO1xuYXN5bmMgZnVuY3Rpb24gY2hlY2tDb25maWdFeGlzdHMocmVnaW9ucykge1xuICAgIGxldCBjb25maWdEZXRhaWxzID0gW107XG4gICAgZm9yIChjb25zdCByZWdpb24gb2YgcmVnaW9ucykge1xuICAgICAgICBjb25zdCBjb25maWdTZXJ2aWNlQ2xpZW50ID0gbmV3IENvbmZpZ1NlcnZpY2VDbGllbnQoeyByZWdpb24gfSk7XG4gICAgICAgIGxldCBjb25maWdEZXRhaWwgPSB7XG4gICAgICAgICAgICByZWdpb246IHJlZ2lvbixcbiAgICAgICAgICAgIGNvbmZpZ1JlY29yZGVyRm91bmQ6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlnRGVsaXZlcnlDaGFubmVsRm91bmQ6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBDb25maWcgcmVjb3JkZXIgZXhpc3RzXG4gICAgICAgICAgICBjb25zdCByZWNvcmRlclJlc3BvbnNlID0gYXdhaXQgY29uZmlnU2VydmljZUNsaWVudC5zZW5kKG5ldyBEZXNjcmliZUNvbmZpZ3VyYXRpb25SZWNvcmRlclN0YXR1c0NvbW1hbmQoe30pKTtcbiAgICAgICAgICAgIGNvbnN0IHJlY29yZGVyRXhpc3RzID0gcmVjb3JkZXJSZXNwb25zZS5Db25maWd1cmF0aW9uUmVjb3JkZXJzU3RhdHVzPy5sZW5ndGggIT09IDA7XG4gICAgICAgICAgICBpZiAocmVjb3JkZXJFeGlzdHMpIHtcbiAgICAgICAgICAgICAgICBjb25maWdEZXRhaWwuY29uZmlnUmVjb3JkZXJGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBDb25maWcgZGVsaXZlcnkgY2hhbm5lbCBleGlzdHNcbiAgICAgICAgICAgIGNvbnN0IGNoYW5uZWxSZXNwb25zZSA9IGF3YWl0IGNvbmZpZ1NlcnZpY2VDbGllbnQuc2VuZChuZXcgRGVzY3JpYmVEZWxpdmVyeUNoYW5uZWxzQ29tbWFuZCh7fSkpO1xuICAgICAgICAgICAgY29uc3QgY2hhbm5lbEV4aXN0cyA9IGNoYW5uZWxSZXNwb25zZS5EZWxpdmVyeUNoYW5uZWxzPy5sZW5ndGggIT09IDA7XG4gICAgICAgICAgICBpZiAoY2hhbm5lbEV4aXN0cykge1xuICAgICAgICAgICAgICAgIGNvbmZpZ0RldGFpbC5jb25maWdEZWxpdmVyeUNoYW5uZWxGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25maWdEZXRhaWxzLnB1c2goY29uZmlnRGV0YWlsKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGNoZWNraW5nIEFXUyBDb25maWcgaW4gJHtyZWdpb259OmAsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGNvbmZpZ1NlcnZpY2VDbGllbnQuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb25maWdEZXRhaWxzO1xufVxuZXhwb3J0IGRlZmF1bHQgY2hlY2tDb25maWdFeGlzdHM7XG4iXSwibmFtZXMiOlsicmVxdWlyZSIsImFzeW5jIiwicmVwb3J0RmlsZSIsImRhdGVUaW1lIiwiRGF0ZSIsInRvVVRDU3RyaW5nIiwicmVnaW9uIiwicHJvY2VzcyIsImVudiIsIkFXU19SRUdJT04iLCJhbGxSZWdpb25zIiwiZWMyQ2xpZW50IiwiRUMyQ2xpZW50IiwiZGVzY3JpYmVSZWdpb25zQ29tbWFuZCIsIkRlc2NyaWJlUmVnaW9uc0NvbW1hbmQiLCJyZXNwb25zZSIsInNlbmQiLCJyZWdpb25zIiwiUmVnaW9ucyIsInB1c2giLCJSZWdpb25OYW1lIiwiZXJyb3IiLCJjb25zb2xlIiwiZGVzdHJveSIsImFjY291bnRUeXBlIiwib3JnYW5pemF0aW9uc0NsaWVudCIsIk9yZ2FuaXphdGlvbnNDbGllbnQiLCJkZXNjcmliZU9yZ2FuaXphdGlvbkNvbW1hbmQiLCJEZXNjcmliZU9yZ2FuaXphdGlvbkNvbW1hbmQiLCJkZXNjcmliZU9yZ2FuaXphdGlvblJlc3BvbnNlIiwiaXNJbk9yZ2FuaXphdGlvbiIsIk9yZ2FuaXphdGlvbiIsIk1hc3RlckFjY291bnRJZCIsImlzTWFuYWdlbWVudEFjY291bnQiLCJkZWZpbmVBY2NvdW50VHlwZSIsImRpciIsImRlcHRoIiwiY29sb3JzIiwibGVnYWN5Q3VyQ2hlY2siLCJjdXJDbGllbnQiLCJDb3N0QW5kVXNhZ2VSZXBvcnRTZXJ2aWNlQ2xpZW50IiwiaXNMZWdhY3lDdXJTZXR1cCIsImlucHV0IiwiY29tbWFuZCIsIkRlc2NyaWJlUmVwb3J0RGVmaW5pdGlvbnNDb21tYW5kIiwiUmVwb3J0RGVmaW5pdGlvbnMiLCJsZW5ndGgiLCJlbmFibGVPcmdQb2xpY2llc0NoZWNrIiwib3JnQ2xpZW50IiwicG9saWN5VHlwZXNFbmFibGVkIiwic2NwRW5hYmxlZCIsInRhZ1BvbGljeUVuYWJsZWQiLCJiYWNrdXBQb2xpY3lFbmFibGVkIiwiTGlzdFJvb3RzQ29tbWFuZCIsInJvb3RzIiwiUm9vdHMiLCJQb2xpY3lUeXBlcyIsImVuYWJsZWRQb2xpY3kiLCJUeXBlIiwiU3RhdHVzIiwib3JnRW5hYmxlZFNlcnZpY2VzIiwiZGlzY292ZXJlZE9yZ1NlcnZpY2VzIiwib3JnU2VydmljZUFjY2Vzc0NvbW1hbmQiLCJMaXN0QVdTU2VydmljZUFjY2Vzc0Zvck9yZ2FuaXphdGlvbkNvbW1hbmQiLCJvcmdTZXJ2aWNlQWNjZXNzUmVzcG9uc2UiLCJFbmFibGVkU2VydmljZVByaW5jaXBhbHMiLCJvcmdTZXJ2aWNlIiwiZm91bmRPcmdTZXJ2aWNlIiwic2VydmljZSIsIlNlcnZpY2VQcmluY2lwYWwiLCJvcmdEZWxBZG1pbkRldGFpbHMiLCJvcmdEYURldGFpbHMiLCJvcmdEYURldGFpbCIsIkxpc3REZWxlZ2F0ZWRBZG1pbmlzdHJhdG9yc0NvbW1hbmQiLCJEZWxlZ2F0ZWRBZG1pbmlzdHJhdG9ycyIsImRhIiwiQWNjb3VudElkIiwiSWQiLCJMaXN0RGVsZWdhdGVkU2VydmljZXNGb3JBY2NvdW50Q29tbWFuZCIsImFjY291bnRSZXNwb25zZSIsIkRlbGVnYXRlZFNlcnZpY2VzIiwic2VydmljZXMiLCJhY2NvdW50TmFtZSIsIk5hbWUiLCJsb2ciLCJhY2NvdW50Iiwic3J2IiwiY2ZuT3JnU3RhdHVzIiwib3JnQ2ZuU3RhdHVzIiwic3RhdHVzIiwiY2xvdWRGb3JtYXRpb25DbGllbnQiLCJDbG91ZEZvcm1hdGlvbkNsaWVudCIsImRlc2NyaWJlT3JnQWNjZXNzSW5wdXQiLCJEZXNjcmliZU9yZ2FuaXphdGlvbnNBY2Nlc3NDb21tYW5kIiwiY2xvdWRGb3JtYXRpb25PcmdBY2Nlc3MiLCJjb250cm9sVG93ZXJEZXRhaWxzIiwiY29udHJvbFRvd2VySW5mbyIsImNvbnRyb2xUb3dlckNsaWVudCIsIkNvbnRyb2xUb3dlckNsaWVudCIsIkxpc3RMYW5kaW5nWm9uZXNDb21tYW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsImxhbmRpbmdab25lcyIsImxhbmRpbmdab25lSWRlbnRpZmllciIsImFybiIsImx6UmVnaW9uIiwidG9TdHJpbmciLCJzcGxpdCIsImNvbnRyb2xUb3dlclJlZ2lvbiIsImNvbnRyb2xUb3dlckNsaWVudFJlZ2lvbiIsIkdldExhbmRpbmdab25lQ29tbWFuZCIsImx6UmVzcG9uc2UiLCJsYW5kaW5nWm9uZSIsImxhdGVzdEF2YWlsYWJsZVZlcnNpb24iLCJkZXBsb3llZFZlcnNpb24iLCJ2ZXJzaW9uIiwiZHJpZnRTdGF0dXMiLCJpZGNJbmZvcm1hdGlvbiIsInJlZ2lvbkxpc3QiLCJpZGNEZXRhaWxzIiwiZm91bmQiLCJzc29BZG1pbkNsaWVudCIsIlNTT0FkbWluQ2xpZW50Iiwic3NvSW5wdXQiLCJNYXhSZXN1bHRzIiwiTnVtYmVyIiwiTGlzdEluc3RhbmNlc0NvbW1hbmQiLCJzc29JbnN0YW5jZVJlc3BvbnNlIiwiSW5zdGFuY2VzIiwic3NvSW5zdGFuY2UiLCJJbnN0YW5jZUFybiIsImlkIiwiSWRlbnRpdHlTdG9yZUlkIiwib3JnRGV0YWlscyIsIm9yZ0Rlc2NyaWJlQ29tbWFuZCIsIm9yZ0RhdGEiLCJBcm4iLCJyb290T3VJZCIsIm9yZ091cyIsInRvcExldmVsT3VzIiwibGlzdE9Vc0NvbW1hbmQiLCJMaXN0T3JnYW5pemF0aW9uYWxVbml0c0ZvclBhcmVudENvbW1hbmQiLCJQYXJlbnRJZCIsImxpc3RPVXNSZXNwb25zZSIsIk9yZ2FuaXphdGlvbmFsVW5pdHMiLCJvdSIsInRvcExldmVsT3UiLCJuYW1lIiwiTGlzdEFjY291bnRzRm9yUGFyZW50Q29tbWFuZCIsIkFjY291bnRzIiwiYWNjb3VudHMiLCJvcmdNZW1iZXJBY2NvdW50RGV0YWlscyIsIm9yZ01lbWJlckFjY291bnRJbmZvIiwib3Jnc0NsaWVudCIsIkxpc3RBY2NvdW50c0NvbW1hbmQiLCJvcmdNZW1iZXJBY2NvdW50IiwiYWNjb3VudEVtYWlsIiwiRW1haWwiLCJtZW1iZXJBY2NvdW50IiwibWVzc2FnZSIsIndhcm4iLCJpYW1Vc2VyUmVzdWx0IiwiaWFtQ2xpZW50IiwiSUFNQ2xpZW50IiwiaWFtVXNlckluZm8iLCJsaXN0VXNlcnNDb21tYW5kIiwiTGlzdFVzZXJzQ29tbWFuZCIsImxpc3RVc2Vyc1Jlc3BvbnNlIiwidXNlciIsIlVzZXJzIiwidXNlck5hbWUiLCJVc2VyTmFtZSIsImxpc3RBY2Nlc3NLZXlzQ29tbWFuZCIsIkxpc3RBY2Nlc3NLZXlzQ29tbWFuZCIsImFjY2Vzc0tleXMiLCJBY2Nlc3NLZXlNZXRhZGF0YSIsImFjY2Vzc0tleSIsImFjY2Vzc0tleUlkIiwiQWNjZXNzS2V5SWQiLCJnZXRMYXN0VXNlZENvbW1hbmQiLCJHZXRBY2Nlc3NLZXlMYXN0VXNlZENvbW1hbmQiLCJsYXN0VXNlZFJlc3BvbnNlIiwiZm91bmRVc2VySW5mbyIsImxhc3RVc2VkIiwiQWNjZXNzS2V5TGFzdFVzZWQiLCJMYXN0VXNlZERhdGUiLCJpYW1Vc2VyIiwiZWMyQ2hlY2siLCJlYzJWYWxpZGF0aW9uIiwiRGVzY3JpYmVJbnN0YW5jZXNDb21tYW5kIiwiUmVzZXJ2YXRpb25zIiwiZWMyRm91bmQiLCJmaW5kIiwicGFyYW0iLCJlYzIiLCJ2cGNDaGVjayIsInZwY1ZhbGlkYXRpb24iLCJEZXNjcmliZVZwY3NDb21tYW5kIiwiVnBjcyIsInZwY0ZvdW5kIiwidnBjRmluZCIsImNsb3VkVHJhaWxDaGVjayIsImNsb3VkVHJhaWxWYWxpZGF0aW9uIiwiY2xvdWRUcmFpbENsaWVudCIsIkNsb3VkVHJhaWxDbGllbnQiLCJjbG91ZFRyYWlsRGVzY3JpYmVDb21tYW5kIiwiRGVzY3JpYmVUcmFpbHNDb21tYW5kIiwiY2xvdWRUcmFpbFJlc3BvbnNlIiwidHJhaWxMaXN0IiwidHJhaWwiLCJ0cmFpbEluZm8iLCJIb21lUmVnaW9uIiwidHJhaWxGb3VuZCIsImlzT3JnVHJhaWwiLCJJc011bHRpUmVnaW9uVHJhaWwiLCJpc011bHRpUmVnaW9uIiwiY3RGaW5kIiwiY29uZmlnQ2hlY2siLCJjb25maWdEZXRhaWxzIiwiY29uZmlnU2VydmljZUNsaWVudCIsIkNvbmZpZ1NlcnZpY2VDbGllbnQiLCJjb25maWdEZXRhaWwiLCJjb25maWdSZWNvcmRlckZvdW5kIiwiY29uZmlnRGVsaXZlcnlDaGFubmVsRm91bmQiLCJyZWNvcmRlclJlc3BvbnNlIiwiRGVzY3JpYmVDb25maWd1cmF0aW9uUmVjb3JkZXJTdGF0dXNDb21tYW5kIiwiQ29uZmlndXJhdGlvblJlY29yZGVyc1N0YXR1cyIsImNoYW5uZWxSZXNwb25zZSIsIkRlc2NyaWJlRGVsaXZlcnlDaGFubmVsc0NvbW1hbmQiLCJEZWxpdmVyeUNoYW5uZWxzIiwiY29uZmlnRmluZCIsIm1haW4iXSwic291cmNlUm9vdCI6IiJ9